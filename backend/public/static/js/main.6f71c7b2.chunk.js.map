{"version":3,"sources":["cmps/MainCmps/UserPreview.jsx","store/actions/modalActions.js","services/httpService.js","services/userService.js","cmps/MainCmps/MainNavBar.jsx","store/actions/userActions.js","pages/About.jsx","services/utils.js","services/tripService.js","store/actions/tripActions.js","store/actions/msgActions.js","cmps/MainCmps/ErrorMsg.jsx","cmps/Home/AddTrip.jsx","services/reviewService.js","store/actions/reviewActions.js","cmps/Home/TripPreview.jsx","cmps/Home/TripList.jsx","cmps/Home/TripSlider.jsx","cmps/Home/UserFlow.jsx","pages/HomePage.jsx","cmps/Home/TripFilter.jsx","pages/TripStock.jsx","pages/Login.jsx","pages/Signup.jsx","services/socketService.js","pages/LoginSignupPage.jsx","services/dndItems.js","cmps/TripAssembly/ActivitiePreview.jsx","cmps/TripAssembly/OpenDaySlot.jsx","cmps/TripAssembly/DayActivities.jsx","cmps/TripAssembly/DayTimeLine.jsx","cmps/TripAssembly/DestNamePrev.jsx","cmps/TripAssembly/DestinationsHeader.jsx","cmps/TripAssembly/TripAssembly.jsx","cmps/TripApp/MemberPreview.jsx","cmps/TripApp/TripNavBar.jsx","cmps/TripRoute/AddDestiantion.jsx","cmps/TripRoute/WeekPreview.jsx","cmps/TripRoute/RouteCalendar.jsx","cmps/TripRoute/RouteTimeLinePreview.jsx","cmps/TripRoute/RouteTimeLine.jsx","cmps/TripRoute/TripRoute.jsx","cmps/TripApp/Chat.jsx","cmps/MainCmps/Map.jsx","pages/TripApp.jsx","pages/UserTrips.jsx","cmps/TripAssembly/EditActivity.jsx","cmps/TripAssembly/PrevEditActivity.jsx","cmps/tripReviews/AddReview.jsx","cmps/MainCmps/AddMember.jsx","cmps/MainCmps/NotificationMsg.jsx","cmps/MainCmps/Modal.jsx","cmps/MainCmps/LongText.jsx","cmps/tripReviews/ReviewPreview.jsx","cmps/tripReviews/ReviewList.jsx","pages/TripDetails.jsx","cmps/MainCmps/Loader.jsx","cmps/MainCmps/Footer.jsx","App.jsx","serviceWorker.js","store/reducers/modalReducer.js","store/reducers/msgReducer.js","store/reducers/reviewReducer.js","store/reducers/tripReducer.js","store/reducers/userReducer.js","store/store.js","index.js"],"names":["UserPreview","state","expand","toggleExpand","setState","Fragment","className","src","this","props","user","imgUrl","alt","username","onClick","to","_id","logout","Component","showModal","cmp","dispatch","type","closeModal","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","userService","login","signup","getUsers","httpService","getById","userId","remove","update","userCred","_handleLogin","Promise","reject","sessionStorage","clear","setItem","JSON","stringify","window","_MainNavBar","navBar","backgroundChanged","path","location","pathname","match","pageYOffset","addEventListener","prevProps","prevState","removeEventListener","usersData","loggedInUser","mapDispatchToProps","MainNavBar","connect","userReducer","withRouter","About","utils","makeId","length","txt","possible","i","charAt","Math","floor","random","calculateDays","start","end","Date","difference","getTime","ceil","createMat","cols","rows","mat","j","pos","col","getDateDay","timeStamp","getDate","getWeekDay","time","getDay","getTimeDayStr","hours","_get2DigTime","getHours","minuets","getMinutes","getRandomPic","imgIdx","getRandomInt","imgs","getIsoTime","setMinutes","getTimezoneOffset","toISOString","slice","calculateDates","destinations","nextDay","dates","day","td","push","forEach","dest","getMonth","idx","setHours","getRandomLatLng","locations","lat","lng","num","min","max","tripService","query","tripId","save","trip","filterBy","name","queryStr","loadTrip","flag","resolve","setTimeout","tripLoad","loadTrips","trips","addTrip","newTrip","showMsg","msg","closeMsg","_ErrorMsg","isShown","ErrorMsg","msgReducer","_AddTrip","tripName","currTrip","startDate","endDate","onSetDestinations","ev","preventDefault","newtrip","toLowerCase","now","id","onSaveDestination","activities","members","history","handleInput","value","targetName","target","formatDate","date","getFullYear","onSubmit","htmlFor","placeholder","required","onChange","minDate","selected","map","key","AddTrip","reviewService","add","reviewId","review","createdAt","addedReview","reviewActions","loadReviews","reviews","addReview","_TripPreview","handleClick","getTripPrice","reduce","acc","currValue","price","amount","getReviewsAvg","rating","currRev","toFixed","err","addClass","days","style","pointerEvents","createdBy","TripPreview","reviewReducer","_TripList","img","TripList","tripReducer","SwiperCore","use","EffectCoverflow","Autoplay","EffectFade","Navigation","Pagination","Scrollbar","A11y","TripSlider","effect","slidesPerView","navigation","rotate","stretch","depth","modifier","centeredSlides","delay","pagination","clickable","el","UserFlow","fontWeight","_HomePage","smooth","scroll","scrollIntoView","behavior","block","height","HomePage","TripFilter","mostOccDests","onsetFilter","autoComplete","list","_TripStock","getMostOccDests","concat","numOfOccMap","numOfOccArr","Object","entries","sort","dest1","dest2","destOcc","toLocaleUpperCase","substring","field","getTripsForDisplay","filter","includes","TripStock","Login","email","password","userCreds","handleForm","React","Signup","handleChange","tripToRed","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","_LoginSignupPage","action","tripIdToRed","all","page","LoginSignupPage","ItemTypes","ActivitiePreview","act","onRemoveAct","onEdit","onOpenDetails","useDrag","item","collect","monitor","isDragging","drag","isFirstCol","isDayHeadClass","literalDay","isDrag","isLenOne","duration","findIndex","destination","ref","gridRow","row","OpenDaySlot","onDragMove","getRowIdx","useDrop","accept","drop","isOver","_isOver","DayActivities","newDay","reCalcPos","DayTimeLine","times","DestNamePrev","updateFreeDays","freeDays","_dest","display","gridColumn","DestinationsHeader","allDestinations","TripAssembly","weekMat","tripLength","actsToDisplay","minDestinations","initiateAssembly","loadWeekMat","getMinDestinations","WeeklyActsToDisplay","mapActsToDays","destTimeStamp","at","prevDate","currDate","currDayActs","getDaysInMonth","freeDay","showDaysName","actId","removeAct","_act","updateTripAct","isOccTimeSlot","activity","currStartTime","currEndTime","checkedStartTime","checkedEndTime","act1","act2","sortDateMap","getCol","n","x","saveAct","find","newTime","getTimeFromIdx","currWeekDates","getLinearTripDays","currDayDate","getWeekDests","minDay","destsHeadLength","mapDestsToHeaderLength","destsNames","keys","destsLength","values","currDestName","currDest","tripStart","tripEnd","destinationsTimes","full","linearDays","getDestsWithActs","allActs","isActInDests","hour","onTogglePage","direction","pageCount","newPage","getDayNumOfAct","getTwoDig","numStr","startTime","toLocaleDateString","arrSorted","currDay","day1","day2","currActs","actPreviews","dayActs","renderDayActivities","MembersPreview","member","AddDestination","addDestOpen","onAddDestination","addDestination","toggleAddDestination","WeekPreview","showDay","hotDog","RouteCalendar","calendarData","unshift","getFirstSunday","getLastSaturday","getDaysAround","generateCalendar","weekCmps","weeksCount","splice","renderTable","RouteTimeLinePreview","isLast","updateDestinations","changeOrder","allowTrash","letFire","RouteTimeLine","TripRoute","toggleChat","trashOpen","classForTrash","_Chat","from","msgs","isTyping","loadHistory","addMsg","newMsg","sendMsg","userTyping","msgHandleChange","trim","chatOpen","Chat","_MapContainer","bounds","markers","selectedPlace","activeMarker","showingInfoWindow","onMarkerClick","marker","e","onMapClicked","containerStyle","width","zIndex","google","maps","LatLngBounds","extend","LatLng","BASE_IMG_URL","fitBounds","panTo","setZoom","title","position","icon","zoom","onReady","mapProps","getMarkers","visible","MapContainer","GoogleApiWrapper","_TripApp","settingsOpen","isSocketSetup","sideBar","destIdxToMove","moveToIdx","moveDifference","destTomove","constant","passDifference","constant2","toggleSettings","denyTrash","newDest","openSideBar","params","openSignup","getMarkersOfDests","sideBarClass","TripApp","_UserTrips","UserTrips","EditActivity","activitie","labels","notes","minTime","maxTime","handleTime","tzoffset","localISOTime","checked","onSaveAct","datetime","alert","currency","getValidTime","destIdx","minT","maxT","_min","_max","disabled","maxDate","showTimeSelect","showFullMonthYearPicker","dateFormat","PrevEditActivity","isInputOpen","split","handleContentEditable","currentTarget","dataset","innerText","endTime","contentEditable","suppressContentEditableWarning","autoCorrect","data-name","onInput","onBlur","AddReview","reviewToAdd","content","elInput","createRef","onInputChange","inputType","onAddReview","current","focus","defaultValue","AddMember","copied","emailToSend","mail","text","onCopy","color","appRoot","document","createElement","body","appendChild","NotificationMsg","_Modal","dynamicCmp","nameToDisplay","checkKey","curCmp","modal","onKeyDown","onMouseDown","stopPropagation","Modal","modalReducer","LongTxt","isLongTxtShown","onReadMore","ReviewPreview","repeat","stars","getStars","ReviewList","_TripDetails","isReviewOpen","onToggleExpend","aboutTrip","TripDetails","_Loader","loader","Loader","loaderOn","Footer","App","component","exact","Boolean","hostname","initialState","selectedReview","localLoggedinUser","parse","users","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","DndProvider","backend","HTML5Backend","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.6f71c7b2.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport class UserPreview extends Component {\r\n    state = {\r\n        expand: false\r\n    }\r\n    toggleExpand = () => {\r\n        this.setState({ expand: !this.state.expand })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n\r\n\r\n                <div >\r\n                    <img className=\"user-preview\" src={this.props.user.imgUrl} alt={this.props.user.username + 'img'} onClick={this.toggleExpand}/>\r\n                    { <div className={`user-preview-expand flex column justify-around ${this.state.expand?'open':''}`} >\r\n                        <Link to={`/user/${this.props.user._id}`} >My Trips</Link>\r\n                        <button onClick={this.props.logout}>Logout</button>\r\n                    </div>}\r\n                </div>\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n}","\r\n\r\nexport function showModal(cmp,props) {\r\n    return dispatch => {\r\n        dispatch({type:'SET_MODAL',cmp,props})\r\n    }\r\n}\r\n\r\nexport function closeModal() {\r\n    return  dispatch => {\r\n        dispatch({ type: 'CLOSE_MODAL' })\r\n    }\r\n}","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        // if (err.response && err.response.status === 401) {\r\n        //     window.location.assign('/#/login');\r\n        // }\r\n        throw err;\r\n    }\r\n}","import {storageService} from './asyncStorageService'\r\nimport httpService from './httpService'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update\r\n}\r\n\r\nwindow.userService = userService;\r\n\r\nfunction getUsers() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`user/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _handleLogin(user)\r\n    return Promise.reject('user not found'+userCred)\r\n}\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, Link, withRouter } from 'react-router-dom'\r\n\r\nimport { UserPreview } from '../MainCmps/UserPreview'\r\n\r\nimport { showModal } from '../../store/actions/modalActions'\r\nimport { logout } from '../../store/actions/userActions'\r\n\r\nclass _MainNavBar extends Component {\r\n    state = {\r\n        navBar: '',\r\n    }\r\n\r\n    componentDidMount() {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (!match) this.backgroundChanged()\r\n        window.addEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.location.pathname !== prevProps.location.pathname) this.backgroundChanged()\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n\r\n    backgroundChanged = () => {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (window.pageYOffset >= 80 || !match) {\r\n            this.setState({ navBar: true })\r\n        } else { this.setState({ navBar: false }) }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'main-navbar flex justify-between align-center full  ' + (this.state.navBar ? 'navBar-background' : '')}>\r\n                <Link to=\"/\" > <h1 className=\"logo\">Trolly</h1></Link>\r\n                <div className=\"flex justify-between main-navbar-links\">\r\n                    <Link to=\"/trip\">Trips</Link>\r\n                    <NavLink to=\"/about\" >About</NavLink>\r\n                    {this.props.usersData.loggedInUser ? <UserPreview logout={this.props.logout} user={this.props.usersData.loggedInUser} /> : <div onClick={() => this.props.showModal('login')}>Login</div>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        usersData: state.userReducer\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    showModal,\r\n    logout\r\n}\r\n\r\nexport const MainNavBar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_MainNavBar));","import { userService } from '../../services/userService';\r\n// import { loading, doneLoading } from './systemActions';\r\n\r\n// THUNK\r\n// export function loadUsers() {\r\n//   return async dispatch => {\r\n//     try {\r\n//       // example for loading\r\n//       dispatch(loading);\r\n//       const users = await userService.getUsers();\r\n//       dispatch({ type: 'SET_USERS', users });\r\n//     } catch (err) {\r\n//       console.log('UserActions: err in loadUsers', err);\r\n//       // example for routing - after changing the store\r\n//       // history.push('/some/path');\r\n//     } finally {\r\n//       dispatch(doneLoading);\r\n//     }\r\n//   };\r\n// }\r\n// THUNK\r\n// export function removeUser(userId) {\r\n//   return async dispatch => {\r\n//     try {\r\n//       await userService.remove(userId);\r\n//       dispatch({ type: 'USER_REMOVE', userId });\r\n//     } catch (err) {\r\n//       console.log('UserActions: err in removeUser', err);\r\n//     }\r\n//   };\r\n// }\r\n// THUNK\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    try{\r\n      const user = await userService.login(userCreds);\r\n      dispatch({ type: 'SET_USER', user });\r\n      return user\r\n    }catch(err){\r\n      console.log(err,'actionsuser');\r\n      dispatch({type:'LOGIN_PROBLEM'})\r\n    }\r\n  };\r\n}\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.signup(userCreds);\r\n    dispatch({ type: 'SET_USER', user });\r\n    return user\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await userService.logout();\r\n    dispatch({ type: 'SET_USER', user: null });\r\n  };\r\n}\r\n","import React from 'react'\r\n\r\nexport function About() {\r\n    return (\r\n        <div>\r\n            About\r\n        </div>\r\n    )\r\n}\r\n","\r\n\r\n\r\nexport const utils = {\r\n    makeId,\r\n    calculateDays,\r\n    createMat,\r\n    getDateDay,\r\n    getWeekDay,\r\n    getTimeDayStr,\r\n    getRandomPic,\r\n    getRandomInt,\r\n    getIsoTime,\r\n    calculateDates,\r\n    getRandomLatLng\r\n}\r\n\r\nfunction makeId(length = 5) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction calculateDays(start, end) {\r\n    end = new Date(end)\r\n    start = new Date(start)\r\n    var difference = end.getTime() - start.getTime();\r\n    var daysDifference = Math.ceil(difference / 999 / 60 / 60 / 24);\r\n    return daysDifference\r\n}\r\n\r\n\r\n\r\nfunction calculateDates(start, end, destinations) {\r\n    let nextDay = new Date(start)\r\n    let dates = [{ day: nextDay, td: { 'start': 0 } }]\r\n    while (nextDay.getDate() !== new Date(end).getDate()) {\r\n        nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n        dates.push({ day: nextDay, td: '' })\r\n        destinations.forEach(dest => {\r\n            if (dest.start.getDate() === nextDay.getDate() && dest.start.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'start': dest.idx }\r\n            } else if (dest.start < nextDay && nextDay.setHours(12) < dest.end.setHours(11)) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'full': dest.idx }\r\n            } else if (dest.end.getDate() === nextDay.getDate() && dest.end.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'end': dest.idx }\r\n            }\r\n        })\r\n    }\r\n    return dates\r\n}\r\n\r\n\r\nfunction createMat(cols, rows) {\r\n    const mat = []\r\n    for (let i = 0; i < rows; i++) {\r\n        mat[i] = []\r\n        for (let j = 0; j < cols; j++) {\r\n            mat[i][j] = { pos: { i, j } }\r\n\r\n            if (j === 0) {\r\n                mat[i][j] = { ...mat[i][j], col: 0 }\r\n            }\r\n        }\r\n    }\r\n\r\n    return mat\r\n}\r\n\r\nfunction getDateDay(timeStamp) {\r\n    const time = new Date(timeStamp);\r\n    return time.getDate()\r\n}\r\n\r\n\r\nfunction getWeekDay(timeStamp) {\r\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const time = new Date(timeStamp);\r\n    return days[time.getDay()]\r\n}\r\n\r\nfunction getTimeDayStr(timeStamp) {\r\n    let time = new Date(timeStamp)\r\n    let hours = _get2DigTime(time.getHours());\r\n    let minuets = _get2DigTime(time.getMinutes());\r\n    return `${hours}:${minuets}`\r\n}\r\n\r\nfunction _get2DigTime(num) {\r\n    if ((num + '').length === 1) return '0' + num\r\n    return num\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\nfunction getRandomPic() {\r\n    const imgIdx = getRandomInt(0, imgs.length - 1)\r\n    return imgs[imgIdx]\r\n}\r\n\r\nfunction getIsoTime(timeStamp) {\r\n    let time = new Date(timeStamp);\r\n    time.setMinutes(time.getMinutes() - time.getTimezoneOffset());\r\n    return time.toISOString().slice(0, 16)\r\n}\r\nfunction getRandomLatLng() {\r\n    let locations = [\r\n        { lat: -23.5475, lng: -46.6361 }, //sau paolo\r\n        { lat: 13.751330328, lng: 100.489664708 }, //bangkok\r\n        { lat: 25.105497, lng: 121.597366 }, //taipei\r\n        { lat: 21.028511, lng: 105.804817 }, //hanoi\r\n        { lat: 39.916668, lng: 116.383331 }, //beijin\r\n        { lat: -16.5000000, lng: -68.1500000 }, //la paz\r\n        { lat: 27.700769, lng: 85.300140 }, // //Kathmandu, nepal\r\n        { lat: 14.599512, lng: 120.984222 }, //manila\r\n        { lat: 1.290270, lng: 103.851959 }, //singapor city\r\n        { lat: 6.927079, lng: 79.861244 }, //colombo sri lanka\r\n        { lat: 28.644800, lng: 77.216721 }, //new delhi\r\n    ]\r\n    return locations[getRandomInt(0, locations.length - 1)]\r\n}\r\n\r\n\r\nconst imgs = [\r\n    'https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1', //clear water with sup\r\n    'https://images.unsplash.com/photo-1550399504-8953e1a6ac87?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //reading book at the beach\r\n    'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //sunglass on sand\r\n    'https://images.unsplash.com/photo-1527004013197-933c4bb611b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1', //norway\r\n    'https://images.unsplash.com/photo-1475066392170-59d55d96fe51?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-1.2.1', //manhaten\r\n    'https://images.unsplash.com/photo-1507272931001-fc06c17e4f43?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailnad\r\n    'https://images.unsplash.com/photo-1545579133-99bb5ab189bd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //maldivas\r\n    'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1524492412937-b28074a5d7da?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //india\r\n    'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0',  //italy/capri\r\n    'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //itlay/venice\r\n    'https://images.unsplash.com/photo-1517792844039-e52afb564132?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1499678329028-101435549a4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy',\r\n    'https://images.unsplash.com/photo-1535063406830-27dfae54262a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1554357475-accb8a88a330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //jordan\r\n    'https://images.unsplash.com/photo-1559628233-100c798642d4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //indonesia\r\n    'https://images.unsplash.com/photo-1527095655060-4026c4af2b25?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1583702993462-43615c05ceee?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1505662695181-d4b60363d2a3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //singapore\r\n    'https://images.unsplash.com/photo-1455459182396-ae46100617cb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //?\r\n    'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717865-a99cac1c95d8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717201-fbb671ff56b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n]","\r\nimport httpService from './httpService'\r\n\r\nexport const tripService = {\r\n    query,\r\n    getById,\r\n    remove,\r\n    save\r\n}\r\n\r\n\r\nconst user = {\r\n    _id: 'u101',\r\n    fullName: 'Orly Amdadi',\r\n    userName: 'orly@amdadi.com',\r\n    password: 'tinkerbell',\r\n    imgUrl: 'http://some-img',\r\n}\r\n\r\nasync function query(filterBy={name:''}) {\r\n    const queryStr = `?search=${filterBy.name}`;\r\n    return httpService.get(`trip${queryStr}`);\r\n    \r\n}\r\n\r\n\r\nasync function getById(tripId) {\r\n    return httpService.get(`trip/${tripId}`,tripId)\r\n\r\n}\r\n\r\nfunction remove(tripId) {\r\n    return httpService.delete(`trip/${tripId}`)\r\n}\r\n\r\nfunction save(trip) {\r\n    if (trip._id) {\r\n        return httpService.put(`trip/${trip._id}`, trip)\r\n\r\n    } else {\r\n        return httpService.post('trip', trip)\r\n    }\r\n}","import { tripService } from \"../../services/tripService\"\r\n\r\n\r\n\r\n\r\nexport function loadTrip(tripId, flag) {\r\n    return async dispatch => {\r\n        try {\r\n            if (flag) {\r\n                dispatch({ type: 'SET_LOADER' })\r\n                const trip = await new Promise((resolve, reject) => {\r\n                    setTimeout(async () => {\r\n                        console.log(tripId);\r\n                        var tripLoad = await tripService.getById(tripId)\r\n                        resolve(tripLoad)\r\n                    }, 4000)\r\n                })\r\n                dispatch({ type: 'SET_TRIP', trip  })\r\n            }\r\n            else var trip = await tripService.getById(tripId)\r\n            return trip\r\n        } catch (err) {\r\n            console.log(err);\r\n        } finally {\r\n            dispatch({ type: 'CLOSE_LOADER' })\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function loadTrips(filterBy) {\r\n    // console.log(\"loadTrips -> filterBy\", filterBy)\r\n    return async dispatch => {\r\n        const trips = await tripService.query(filterBy)\r\n        dispatch({ type: 'SET_TRIPS', trips })\r\n    }\r\n}\r\n\r\n\r\nexport function addTripFast(trip) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            await tripService.save(trip)\r\n        }\r\n\r\n        catch (err) {\r\n        }\r\n    }\r\n}\r\n\r\nexport function addTrip(newTrip) {\r\n    return async dispatch => {\r\n        try {\r\n            const trip = await tripService.save(newTrip)\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            return trip\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n}","export function showMsg(msg) {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            this.closeMsg()\r\n        }, 3000)\r\n        dispatch({ type: 'SET_MSG', msg })\r\n        \r\n    }\r\n    \r\n}\r\n\r\nexport function closeMsg() {\r\n    return dispatch => {\r\n        dispatch({ type: 'CLOSE_MSG' })\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions'\r\n\r\n\r\n\r\nclass _ErrorMsg extends Component {\r\n    render() {\r\n        const { msg, type } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                {(type === 'input') && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <small className=\"error-msg\"><i className=\"fas fa-exclamation-circle\"></i>{msg}</small>\r\n                </div>}\r\n                {type === 'invalid-move' && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <p className=\"invalid-move\"><i className=\"fas fa-exclamation-triangle\"></i>{msg}</p>\r\n                </div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        msg: state.msgReducer.msg,\r\n        isShown: state.msgReducer.isShown,\r\n        type: state.msgReducer.type\r\n\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const ErrorMsg = connect(mapStateToProps, mapDispatchToProps)(_ErrorMsg)\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux';\r\nimport { addTrip } from '../../store/actions/tripActions'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { showMsg, closeMsg } from '../../store/actions/msgActions';\r\n\r\n\r\n\r\nclass _AddTrip extends Component {\r\n\r\n\r\n    state = {\r\n        tripName: '',\r\n        currTrip: {\r\n            name: '',\r\n            startDate: '',\r\n            endDate: '',\r\n\r\n        },\r\n        destinations: '',\r\n    }\r\n\r\n    onSetDestinations = (ev) => {\r\n        ev.preventDefault()\r\n        const newtrip = this.state.currTrip\r\n        newtrip.name = newtrip.name.toLowerCase()\r\n        if (!this.state.currTrip.startDate && !this.state.currTrip.endDate) {\r\n            newtrip.startDate = Date.now()\r\n            newtrip.endDate = new Date(Date.now() + 1 * 1000 * 60 * 60 * 24)\r\n        }\r\n        let location = this.getRandomLatLng()\r\n        newtrip.location = location\r\n        newtrip.id = utils.makeId()\r\n        this.setState({\r\n            destinations: [...this.state.destinations, newtrip],\r\n            currTrip: {\r\n                name: '',\r\n                startDate: '',\r\n                endDate: '',\r\n            }\r\n        })\r\n    }\r\n\r\n    onSaveDestination = async (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.destinations.length) {\r\n            this.props.showMsg({type:'input', msg:'At least one destination must be added'})\r\n            return\r\n        }\r\n        const trip = {\r\n            tripName: this.state.tripName,\r\n            imgUrl: utils.getRandomPic(),\r\n            activities: [],\r\n            destinations: this.state.destinations\r\n        }\r\n        if (this.props.loggedInUser) {\r\n            trip.members = [\r\n                {\r\n                    id: this.props.loggedInUser._id,\r\n                    username: this.props.loggedInUser.username,\r\n                    imgUrl: this.props.loggedInUser.imgUrl,\r\n                }\r\n            ]\r\n        }\r\n        else trip.members = []\r\n        const newTrip = await this.props.addTrip(trip)\r\n        this.props.history.push(`/trip/${newTrip._id}/tripRoute`)\r\n    }\r\n\r\n    getRandomLatLng() {\r\n        const LL = utils.getRandomLatLng()\r\n        return LL\r\n    }\r\n\r\n\r\n    handleInput = (ev, name) => {\r\n        let value;\r\n        let targetName;\r\n        if (ev.target && ev.target.name === 'tripName') {\r\n            this.setState({ ...this.state, tripName: ev.target.value })\r\n            return\r\n        }\r\n        if (ev.target) {\r\n            value = ev.target.value;\r\n            targetName = ev.target.name\r\n        }\r\n        else {\r\n            value = new Date(ev).getTime();\r\n            targetName = name\r\n        }\r\n\r\n        this.setState({ ...this.state, currTrip: { ...this.state.currTrip, [targetName]: value } })\r\n    }\r\n\r\n\r\n    formatDate = (date) => {\r\n        return `${new Date(date).getDate()}/${new Date(date).getMonth() + 1}/${new Date(date).getFullYear()}`\r\n    }\r\n    render() {\r\n        const startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) ||\r\n            Date.now()\r\n        return (\r\n            <div className=\"flex add-destination-form-wraper\">\r\n                <form className=\"flex column add-destination-form\" onSubmit={this.onSetDestinations}>\r\n                    <div className=\"flex column\">\r\n                        <label htmlFor=\"add-dest-name\">Add name to your trip:</label>\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"tripName\"\r\n                            placeholder=\"Enter Trip Name\"\r\n                            id=\"add-dest-name\"\r\n                            value={this.state.tripName}\r\n                            required\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex column\">\r\n                        <label htmlFor=\"add-dest-city\">Add Destination:</label>\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"name\"\r\n                            placeholder=\"Enter City Name\"\r\n                            id=\"add-dest-city\"\r\n                            value={this.state.currTrip.name}\r\n                            required\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"startdate-dest-input\">Start At</label>\r\n\r\n                            <DatePicker\r\n                                minDate={startDate}\r\n                                id=\"startdate-dest-input\"\r\n                                name=\"startDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                // selected={this.state.currTrip.startDate || Date.now()}\r\n                                selected={this.state.destinations.length?startDate:Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'startDate') }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"enddate-dest-input\">End At</label>\r\n                            <DatePicker\r\n                                minDate={this.state.currTrip.startDate || Date.now()}\r\n                                id=\"enddate-dest-input\"\r\n                                name=\"endDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                selected={this.state.currTrip.endDate || Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'endDate') }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ErrorMsg />\r\n                    <button className=\"styled-button\" onSubmit={this.onSetDestinations}>Add destination</button>\r\n                    {this.state.destinations.length ? <ol className=\"trip-list-add-form flex column\">\r\n                        {this.state.destinations.map(dest => <li key={utils.makeId()} className=\"flex justify-between\">\r\n                            <p>{dest.name}</p>\r\n                            <div className=\"flex\">\r\n                                <p>{this.formatDate(dest.startDate)}</p> -\r\n                                <p>{this.formatDate(dest.endDate)}</p>\r\n                            </div>\r\n                        </li>)}\r\n                    </ol> : ''}\r\n                    <button className=\"styled-button\" onClick={this.onSaveDestination}>Ready To Plan!</button>\r\n                </form>\r\n                <div className=\"add-dest-img-wraper\">\r\n                    <img src=\"https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1\" alt=\"\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const AddTrip = connect(mapStateToProps, mapDispatchToProps)(withRouter(_AddTrip));","import httpService from './httpService';\r\nimport { utils } from './utils';\r\nimport { storageService } from './asyncStorageService'\r\n\r\n\r\nexport const reviewService = {\r\n    add,\r\n    query,\r\n    remove\r\n};\r\n\r\n\r\nasync function query(filterBy) {\r\n\r\n    if (filterBy) var queryStr = `?tripId=${filterBy.tripId}`;\r\n    // const reviews = await storageService.query(`review`);\r\n    // return reviews.filter(review => review.aboutTrip === filterBy.tripId)\r\n    return httpService.get(`review${queryStr}`);\r\n\r\n}\r\n\r\nfunction remove(reviewId) {\r\n    return httpService.delete(`review/${reviewId}`);\r\n}\r\nasync function add(review) {\r\n    review.createdAt = Date.now();\r\n    const addedReview = await httpService.post(`review`, review);\r\n    return addedReview\r\n}\r\n","import { reviewService } from '../../services/reviewService';\r\n\r\n\r\nexport const reviewActions = {\r\n    loadReviews,\r\n    addReview\r\n}\r\n\r\nfunction loadReviews(tripId) {\r\n    return async dispatch => {\r\n        try {\r\n            const reviews = await reviewService.query(tripId);\r\n            dispatch({ type: 'SET_REVIEWS', reviews });\r\n            return reviews\r\n\r\n        } catch (err) {\r\n            console.log('ReviewActions: err in loadReviews', err);\r\n        }\r\n    };\r\n}\r\n\r\nasync function addReview(review) {\r\n    await reviewService.add(review)\r\n    return async dispatch => {\r\n        try {\r\n            const addedReview = await reviewService.add(review);\r\n            dispatch({ type: 'REVIEW_ADD', review: addedReview });\r\n        }\r\n        catch (err) {\r\n            console.log('ReviewActions: err in addReview', err);\r\n        }\r\n    }\r\n}\r\n","import { withRouter } from 'react-router-dom'\r\nimport { utils } from '../../services/utils'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { reviewActions } from '../../store/actions/reviewActions'\r\n\r\nimport React, { Component } from 'react'\r\n\r\nclass _TripPreview extends Component {\r\n\r\n    async componentDidMount() {\r\n        const reviews = await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        if (!reviews) reviews = []\r\n        this.setState({ reviews })\r\n\r\n    }\r\n\r\n\r\n    handleClick = () => {\r\n        if (this.props.history.location.pathname === '/') {\r\n            this.props.history.push(`/trip/${this.props.trip._id}/triproute`)\r\n        }\r\n        else {\r\n            this.props.history.push(`/trip/${this.props.trip._id}`)\r\n        }\r\n\r\n    }\r\n\r\n    getTripPrice = (activities) => {\r\n        let price = activities.reduce((acc, currValue) => {\r\n            acc = acc + currValue.price.amount\r\n            return acc\r\n        }, 0)\r\n        return price\r\n    }\r\n\r\n    getReviewsAvg = () => {\r\n        try {\r\n            const rating = this.state.reviews.reduce((acc, currRev) => {\r\n                if (this.state.reviews.length) acc = acc + (+currRev.rating)\r\n                else acc = 0\r\n                return acc\r\n            }, 0)\r\n            return rating ? (rating / this.state.reviews.length).toFixed(1) : 0\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { trip, addClass } = this.props\r\n        if (!trip) return <p>Loading Trip . . .</p>\r\n        const price = this.getTripPrice(trip.activities)\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n        const style = (this.props.style ? this.props.style : '')\r\n        const reviews = this.getReviewsAvg()\r\n\r\n        return (\r\n            <div style={{ pointerEvents: (style.pointerEvents ? style.pointerEvents : 'inherit') }} onClick={this.handleClick} className={'trip-preview flex column ' + (addClass ? addClass : '')} >\r\n                < div className=\"img-wraper\" >\r\n                    <img src={trip.imgUrl} alt=\"\" />\r\n                </div>\r\n                <div className=\"trip-preview-details\">\r\n                    <h3>{trip.tripName}</h3>\r\n                    <div className=\"flex details-container\">\r\n                        {trip.createdBy && < div className=\"flex align-center column\">\r\n                            <img className=\"user-img\" src={trip.createdBy.imgUrl} alt=\"user-img\" />\r\n                            <p>By: {trip.createdBy.username}</p>\r\n                        </div>}\r\n                        <div className=\"flex justify-between column\">\r\n                            <p><i className=\"fas fa-hourglass-half\"></i>{days} days</p>\r\n                            <p>Est Price: <i className=\"fas fa-dollar-sign\"></i>{price}</p>\r\n                            <div className=\"flex rating-star\">\r\n                                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />\r\n                                <div className=\"flex justify-between\">\r\n                                    {reviews ? <span>{reviews} <span>({this.state.reviews.length} reviews) </span></span> : '(0)'}\r\n                                </div>\r\n\r\n                            </div>\r\n                            <p>{`Trollied by Roi and ${utils.getRandomInt(50,220)} others`}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadReviews: reviewActions.loadReviews\r\n}\r\n\r\nexport const TripPreview = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripPreview))\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { TripPreview } from './TripPreview'\r\nimport { connect } from 'react-redux';\r\nimport { loadTrips } from '../../store/actions/tripActions';\r\n\r\n\r\nclass _TripList extends Component {\r\n\r\n    async componentDidMount() {\r\n        if (!this.props.trips.length) {\r\n            await this.props.loadTrips()\r\n        }\r\n    }\r\n    render() {\r\n        const { trips, addClass, showModal } = this.props\r\n        if (!trips.length) return <p>Loading Trips . . . </p>\r\n        return (\r\n            <div className={'trip-list trips-container ' + (addClass ? addClass : '')}>\r\n\r\n                {trips.length ? trips.map((trip, idx) =>\r\n                    <TripPreview key={trip._id} trip={trip} showModal={showModal} addClass={addClass} img={utils.getRandomPic()} />\r\n                ) :\r\n                    <TripPreview key={trips._id} trip={trips} addClass={addClass} img={utils.getRandomPic()} />\r\n                }\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const TripList = connect(mapStateToProps, mapDispatchToProps)(_TripList);","import React from 'react';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\n\r\nimport 'swiper/swiper-bundle.css';\r\nimport 'swiper/components/effect-fade/effect-fade.scss';\r\nimport { TripList } from './TripList';\r\nimport { TripPreview } from './TripPreview';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\n\r\nSwiperCore.use([EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y]);\r\n\r\n\r\n\r\nconst coverflow = {\r\n    rotate: 50,\r\n    stretch: 0,\r\n    depth: 100,\r\n    modifier: 2,\r\n    // slideShadows: true,\r\n}\r\n\r\nexport function TripSlider({ trips }) {\r\n\r\n\r\n    return (\r\n        <Swiper\r\n            effect=\"coverflow\"\r\n            slidesPerView={\"auto\"}\r\n            // effectCoverflow={true}\r\n            navigation\r\n            rotate={-20}\r\n            stretch={0}\r\n            depth={200}\r\n            modifier={5}\r\n            centeredSlides={ true}\r\n            // autoplay={true}\r\n            delay={2500}\r\n\r\n        pagination={{ clickable: true }}\r\n        >\r\n\r\n\r\n            {\r\n                trips.map((i, el) => {\r\n                    return <SwiperSlide key={utils.makeId()}>\r\n                        <TripPreview trip={i}  key={i._id} addClass={'slider'} img={utils.getRandomPic()}/> \r\n                    </SwiperSlide>;\r\n                })\r\n            }\r\n        </Swiper >\r\n    );\r\n};","import React from 'react'\r\n\r\nexport function UserFlow() {\r\n    return (\r\n        <div className=\"flex column align-center user-flow\" id=\"userFlow\" >\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Choose a trip</p>\r\n                    <p className=\"flow-content\">Choose from one of our amazing planned trips</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869772/undraw_traveling_t8y2_xnd0ne.svg\" alt=\"choose-travel\" />\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869761/undraw_travel_plans_li01_k6igg6.svg\" alt=\"\" />\r\n                <div className=\"flow-text\">\r\n                    <p className=\"flow-headline\">Personalize it</p>\r\n                    <p className=\"flow-content\">Personalize <span style={{fontWeight:'bold'}}>destinations </span>on Route and <span style={{fontWeight:'bold'}}>activities </span>on Assembly </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Add your friends</p>\r\n                    <p className=\"flow-content\">invite friends to plan together on the same document</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600870015/undraw_social_friends_nsbv_c9ovrw.svg\" alt=\"\" />\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AddTrip } from '../cmps/Home/AddTrip';\r\nimport { TripSlider } from '../cmps/Home/TripSlider';\r\nimport { UserFlow } from '../cmps/Home/UserFlow';\r\nimport { loadTrips } from '../store/actions/tripActions'\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\n\r\n\r\n\r\nclass _HomePage extends Component {\r\n    state = {\r\n        trips: ''\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadTrips()\r\n    }\r\n\r\n    // getTripsForDisplay = () => {\r\n    //     this.props.trips.filter(trip=> trip)\r\n    // }\r\n\r\n\r\n    render() {\r\n        if (!this.props.trips[0]) return <p> </p>\r\n        return (\r\n\r\n            <div className=\"home-page  main-container \">\r\n                <div className=\"home-page-hero full\" >\r\n                    <div className=\"description-section\">\r\n                        <h3>Explore planned trips of professional travelers\r\n                            </h3>\r\n                        <h3>and personalize them</h3>\r\n                        <Link smooth to=\"#userFlow\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'center' })}>\r\n                            <button className=\"styled-button\"> Get Started</button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"main-home-page full\">\r\n                    <div className=\"flow-container\">\r\n                        <div style={{height:'100px'}} ></div>\r\n                        <UserFlow id=\"userFlow\" />\r\n                        <Link smooth to=\"#top-rated-trips\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'start' })}>\r\n                            <button className=\"styled-button\"> Let's Trolly!</button>\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"slideShow-area\" id=\"top-rated-trips\">\r\n                        <div id=\"top-rated-trips\"></div>\r\n                        <h2 className=\"\" >Top rated planned trips</h2>\r\n                        <section className=\"slideShow\" >\r\n                            <TripSlider trips={this.props.trips.slice(0, 4)} />\r\n                        </section>\r\n                        <Link to=\"/trip\"><button className=\"styled-button to-trip-list\"> Show me more</button></Link>\r\n                    </div>\r\n                    <AddTrip />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(_HomePage);","import React, { Component } from 'react'\r\n\r\nexport class TripFilter extends Component {\r\n\r\n\r\n    render() {\r\n        const { onsetFilter, mostOccDests } = this.props\r\n        return (        \r\n            <div className=\"trip-filter flex\" style={this.props.style}>\r\n                <input autoComplete=\"off\" placeholder=\"Search destination\" className=\"styled-input\" name=\"name\" onChange={this.props.handleInput} list=\"dest-filter\" />\r\n                <datalist onChange={this.props.handleInput} id=\"dest-filter\">\r\n                    {mostOccDests.map(dest => {\r\n                       return <option value={`${dest}`}></option>\r\n                    })}\r\n                </datalist>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { TripFilter } from '../cmps/Home/TripFilter';\r\nimport { TripList } from '../cmps/Home/TripList';\r\nimport { showModal } from '../store/actions/modalActions';\r\nimport { loadTrips } from '../store/actions/tripActions';\r\n\r\n\r\nclass _TripStock extends Component {\r\n    state = {\r\n        filterBy: {\r\n            name: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadTrips(this.state.filterBy)\r\n    }\r\n\r\n    getMostOccDests = () => {\r\n        const { trips } = this.props\r\n        let destinations = [];\r\n        trips.forEach(trip => {\r\n            destinations = destinations.concat(trip.destinations)\r\n        })\r\n\r\n        const numOfOccMap = destinations.reduce((acc, dest) => {\r\n            acc[dest.name] = (acc[dest.name]) ? acc[dest.name] + 1 : 1\r\n            return acc\r\n        }, {})\r\n        \r\n        let numOfOccArr = Object.entries(numOfOccMap)\r\n        numOfOccArr.sort((dest1, dest2) => {\r\n            return dest2[1] - dest1[1]\r\n        })\r\n\r\n        return numOfOccArr.slice(0, 5).map(destOcc => {\r\n            let destName = destOcc[0][0].toLocaleUpperCase() + destOcc[0].substring(1)\r\n            return destName\r\n        })\r\n    }\r\n\r\n    // renderSrcOpt = () => {\r\n\r\n    // }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        const value = target.value;\r\n        this.setState({ filterBy: { ...this.state.filterBy, [field]: value } }, () => {\r\n            this.props.loadTrips(this.state.filterBy)\r\n        });\r\n    }\r\n\r\n    getTripsForDisplay = () => {\r\n        const tripList = this.props.trips.filter(trip => {\r\n            return trip.destinations[0].name.includes(this.state.name)\r\n        })\r\n        return tripList\r\n    }\r\n\r\n    render() {\r\n        const trips = this.props.trips\r\n        const mostOccDests = this.getMostOccDests()\r\n        this.getMostOccDests()\r\n        return (\r\n            <div>\r\n                <h2>All Trips</h2>\r\n                <TripFilter mostOccDests={mostOccDests} handleInput={this.handleInput} onsetFilter={this.onsetFilter} />\r\n                <TripList showModal={this.props.showModal} trips={trips} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips,\r\n    showModal\r\n}\r\n\r\nexport const TripStock = connect(mapStateToProps, mapDispatchToProps)(_TripStock);","import React from 'react'\r\nimport { Formik } from 'formik';\r\n\r\n\r\nexport class Login extends React.Component {\r\n    state = {\r\n        msg: ''\r\n\r\n    }\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const { email, password } = ev.target\r\n        const userCreds = { email: email.value, password: password.value }\r\n        const user = await this.props.handleForm(userCreds)\r\n        if (!user) this.setState({ msg: 'wrong username or password' })\r\n        else{\r\n            this.props.closeModal()\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"login-form flex align-center justify-center column\" onSubmit={this.onSubmit} >\r\n                <input className=\"styled-input\" type=\"email\" placeholder=\"email\" name=\"email\"></input>\r\n                <input className=\"styled-input\" type=\"password\" placeholder=\"password\" name=\"password\"></input>\r\n                <button className=\"styled-button\">Login</button>\r\n                <p>not a user? please <span onClick={()=>this.props.handleClick('signup')}>sign up</span></p>\r\n                {this.state.msg && <p>{this.state.msg}</p>}\r\n            </form>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { Formik } from 'formik';\r\n\r\n\r\nexport class Signup extends React.Component {\r\n    state = {\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        imgUrl: 'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    }\r\n    handleChange=(ev)=>{\r\n        const {value,name}=ev.target;\r\n        this.setState({...this.state,[name]:value})\r\n    }\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()\r\n        this.props.handleForm(this.state,'signup',this.props.tripToRed)\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.onSubmit}>\r\n                <input\r\n                    type='text'\r\n                    name='username'\r\n                    value={this.state.username}\r\n                    placeholder='Enter Username'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='email'\r\n                    name='email'\r\n                    value={this.state.email}\r\n                    placeholder='Enter email'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='password'\r\n                    name='password'\r\n                    value={this.state.password}\r\n                    placeholder='Enter password'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <button>Sign Up</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService();\r\n// export const socketService = createDummySocketService();\r\n\r\n// window.socketService = socketService;\r\n// export socketService;\r\n\r\nfunction createSocketService() {\r\n  var socket;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    }\r\n  }\r\n  return socketService;\r\n}\r\n\r\n// function createDummySocketService() {\r\n//   var listenersMap = {}\r\n//   const socketService = {\r\n//     setup() {\r\n//       listenersMap = {}\r\n//       window.listenersMap = listenersMap;\r\n//     },\r\n//     terminate() {\r\n//       listenersMap = {}\r\n//     },\r\n//     on(eventName, cb) {\r\n//       listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n//     },\r\n//     off(eventName, cb) {\r\n//       listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n//     },\r\n//     emit(eventName, data) {\r\n//       if (!listenersMap[eventName]) return;\r\n//       listenersMap[eventName].forEach(listener => {\r\n//         listener(data)\r\n//       });\r\n//     },\r\n//     debugMsg() {\r\n//       this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n//     },\r\n//   }\r\n//   return socketService;\r\n// }\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Login } from './Login';\r\nimport { Signup } from './Signup';\r\nimport { signup, login } from '../store/actions/userActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\nimport { loadTrip, addTrip } from '../store/actions/tripActions'\r\nimport { socketService } from '../services/socketService'\r\n\r\nclass _LoginSignupPage extends Component {\r\n    state = {\r\n        login: true\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    handleForm = async (props, action, tripIdToRed) => {\r\n        if (action === 'signup') {\r\n            if (tripIdToRed) {\r\n                const [tripToRed, user] = await Promise.all([this.props.loadTrip(tripIdToRed), this.props.signup(props)])\r\n                tripToRed.members.push({ username: user.username, imgUrl: user.imgUrl, id: user._id })\r\n                await this.props.addTrip(tripToRed)\r\n                socketService.emit('tripToUpdate', tripToRed._id);\r\n\r\n                this.props.closeModal()\r\n                return user\r\n            }\r\n            return await this.props.signup(props)\r\n        } else {\r\n            var user = await this.props.login(props)\r\n            if (!user) return\r\n            return user\r\n        }\r\n    }\r\n    closeModal() {\r\n        this.props.closeModal()\r\n    }\r\n    render() {\r\n        const tripToRed = this.props.tripId\r\n        return (\r\n            this.state.login ? <Login handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                closeModal={() => this.closeModal()} /> :\r\n                <Signup handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                    closeModal={() => this.closeModal()} tripId={this.props.tripId} tripToRed={tripToRed} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    login,\r\n    closeModal,\r\n    showModal,\r\n    loadTrip,\r\n    addTrip\r\n\r\n}\r\n\r\nexport const LoginSignupPage = connect(mapStateToProps, mapDispatchToProps)(_LoginSignupPage);\r\n","export const ItemTypes = {\r\n    ACTIVITIE: 'activitie',\r\n    DESTINATION:'destination'\r\n}","\r\nimport React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\n\r\nexport function ActivitiePreview({ act, onRemoveAct, onEdit, destinations, onOpenDetails }) {\r\n\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.ACTIVITIE,\r\n            id: act.id\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n\r\n    \r\n\r\n    // const startTime = utils.getTimeDayStr(act.at)\r\n    // const endTime = utils.getTimeDayStr(act.at + (+act.duration / 2) * 60 * 60 * 1000)\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const isDrag = (isDragging) ? 'is-drag' : ''\r\n    const isLenOne = (act.duration === 1) ? 'len-one' : ''\r\n    const dest= destinations.findIndex(dest => act.destination === dest.name)\r\n\r\n    return (\r\n        <div ref={drag} className={`activity-prev-assembly activity-assembly ${isLenOne} ${isDayHeadClass} ${isFirstCol} ${isDrag}`} style={{ gridRow: `${act.row + 1 || 'auto'}/span ${act.duration}` }} key={utils.makeId()}>\r\n            <div className={'dest-color dest-'+dest}></div>\r\n            <div className=\"activity-name-container\">\r\n            <h5>{act.name}</h5>\r\n            </div>\r\n            <div className=\"activity-assembly-details column\">\r\n                {/* <p>{act.at && `${startTime}-${endTime}`}</p> */}\r\n                {/* <p>{act.destination}</p> */}\r\n                {/* {act.price.amount ? <p>{act.price.currency}{act.price.amount}</p> : ''} */}\r\n                <div className=\"activity-assembly-controls flex\">\r\n                    <button onClick={() => { onEdit(act) }} className=\"edit-activity \"><i className=\"fas fa-edit\"></i></button>\r\n                    <button onClick={() => { onOpenDetails(act) }}><i className=\"fas fa-info\"></i></button>\r\n                    <button onClick={() => { onRemoveAct(act.id) }} className=\"delete-activity \"><i className=\"fas fa-trash\"></i></button>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n","\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems'\r\nexport function OpenDaySlot({ act, getRowIdx, onDragMove }) {\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.ACTIVITIE,\r\n        drop: (item, monitor) => {\r\n            onDragMove(act, item.id)\r\n        },\r\n\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n\r\n    const rowIdx = null\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const _isOver = (isOver) ? 'is-over' : ''\r\n    if (isOver) {\r\n        console.log(act);\r\n    }\r\n   \r\n    return (\r\n        <React.Fragment>\r\n            {act.literalDay && <div  className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n            {!act.literalDay && <div ref={drop} className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { ActivitiePreview } from './ActivitiePreview'\r\nimport { OpenDaySlot } from './OpenDaySlot'\r\n\r\nexport function DayActivities({ day, getRowIdx, onRemoveAct, onEdit, destinations, onDragMove, onOpenDetails }) {\r\n\r\n    function reCalcPos(day) {\r\n        let newDay = []\r\n        let i = 0;\r\n        while (i < 35) {\r\n            if (!day[i].id) {\r\n                newDay.push(day[i])\r\n                i++\r\n\r\n            } else {\r\n                newDay.push(day[i])\r\n                i += day[i].duration\r\n            }\r\n        }\r\n        return newDay\r\n    }\r\n    let newDay = reCalcPos(day)\r\n\r\n    var isAfterActs = false;\r\n    var currActsLength = 0\r\n    return (\r\n        <div className=\"day-list-assembly\">\r\n            {newDay.map((act, idx, day) => {\r\n                if (act.id) {\r\n                    isAfterActs = true\r\n                    currActsLength += act.duration\r\n                    return <ActivitiePreview\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act}  onOpenDetails={onOpenDetails}/>\r\n\r\n                } else {\r\n                    return <OpenDaySlot\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onDragMove={onDragMove}  />\r\n                }\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function DayTimeLine() {\r\n\r\n\r\n    return (\r\n        <div className=\"time-line-assembly\">\r\n\r\n            {(function () {\r\n                let times = []\r\n                for (let i = 0; i < 35; i++) {\r\n                    let time = <div key={utils.makeId()} className=\"time-assembly\">\r\n                        {(i % 2 === 0) && <span>{`${7 + i / 2}:00`}</span>}\r\n                    </div>\r\n                    times.push(time)\r\n                }\r\n                return times\r\n\r\n            })()}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n// var gFreeDays = 14\r\nexport function DestNamePrev({ dest, updateFreeDays, freeDays, destinations }) {\r\n    \r\n    const idx = destinations.findIndex(_dest => _dest.name === dest.name)\r\n    const display = (dest.duration) ? '' : 'none'\r\n    return (\r\n\r\n        <div className={`dest-name-preview dest-${idx} `} style={{ gridColumn: `span ${dest.duration}`, display: display }}>\r\n            {dest.name}\r\n        </div>\r\n    )\r\n}\r\n","import { utils } from '../../services/utils'\r\nimport { DestNamePrev } from './DestNamePrev'\r\nimport React from 'react'\r\n\r\n\r\nexport function DestinationsHeader({ destinations, allDestinations }) {\r\n    destinations.sort((dest1, dest2) => dest1.time - dest2.time)\r\n    return (\r\n        <div className=\"destinations-header\">\r\n            {destinations.map((dest, idx) => {\r\n                return <DestNamePrev destinations={allDestinations} idx={idx}  key={utils.makeId()} dest={dest} />\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { DayActivities } from './DayActivities'\r\nimport { DayTimeLine } from './DayTimeLine';\r\nimport { DestinationsHeader } from './DestinationsHeader';\r\n\r\nconst daysCount = 3\r\n\r\nexport class TripAssembly extends Component {\r\n\r\n    state = {\r\n        activities: null,\r\n        weekMat: null,\r\n        page: 0,\r\n        startDate: null,\r\n        endDate: null,\r\n        tripLength: '',\r\n        actsToDisplay: null,\r\n        minDestinations: null\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.initiateAssembly()\r\n    }\r\n\r\n    initiateAssembly = async () => {\r\n        const { destinations, activities } = this.props.trip\r\n        let startDate, endDate\r\n        [startDate, endDate] = [destinations[0].startDate, destinations[destinations.length - 1].endDate]\r\n        const tripLength = utils.calculateDays(startDate, endDate)\r\n        await this.setState({ tripLength, startDate, endDate, activities })\r\n        await this.loadWeekMat()\r\n        await this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n\r\n    loadWeekMat = () => {\r\n        const { activities } = this.props.trip;\r\n        const actsDaysMap = this.mapActsToDays(activities);\r\n        const WeeklyActsToDisplay = actsDaysMap.slice(this.state.page * daysCount, this.state.page * daysCount + daysCount)\r\n        const destTimeStamp = WeeklyActsToDisplay[0][1][0].at\r\n        const startDate = utils.getDateDay(destTimeStamp)\r\n        let weekMat = utils.createMat(daysCount, 35);\r\n        let col = 0\r\n\r\n        let prevDate = WeeklyActsToDisplay[0][0]\r\n        for (let i = 0; i < WeeklyActsToDisplay.length; i++) {\r\n            let currDate, currDayActs\r\n            [currDate, currDayActs] = [WeeklyActsToDisplay[i][0], WeeklyActsToDisplay[i][1]];\r\n            if (prevDate > currDate) {\r\n                currDate += this.getDaysInMonth(destTimeStamp)\r\n            }\r\n            prevDate = currDate\r\n            col = currDate - startDate\r\n\r\n            currDayActs.forEach(act => {\r\n                if (!act.freeDay) {\r\n                    let row = this.getRowIdx(act.at)\r\n                    act.col = col\r\n                    act.row = row\r\n                    weekMat[row][col] = act\r\n                }\r\n            })\r\n\r\n        }\r\n        weekMat = this.showDaysName(destTimeStamp, weekMat)\r\n        this.setState({ weekMat, actsToDisplay: WeeklyActsToDisplay })\r\n    }\r\n\r\n    onRemoveAct = (actId) => {\r\n        this.props.showModal('removeActivity', { removeAct: this.removeAct, actId, })\r\n    }\r\n\r\n    removeAct = async (actId) => {\r\n        let { activities } = this.state;\r\n        activities = await activities.filter((_act => _act.id !== actId))\r\n        await this.props.updateTripAct(activities)\r\n        await this.setState({ activities })\r\n        await this.props.closeModal()\r\n    }\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.trip === this.props.trip) return\r\n        this.initiateAssembly()\r\n\r\n    }\r\n\r\n\r\n\r\n    showDaysName(startTime, mat) {\r\n        for (let j = 0; j < daysCount; j++) {\r\n            const date = new Date(startTime + j * 24 * 60 ** 2 * 1000)\r\n            mat[0][j] = { duration: 1, literalDay: utils.getWeekDay(startTime + j * 24 * 60 ** 2 * 1000), date: date.toLocaleDateString() }\r\n        }\r\n        return mat\r\n    }\r\n\r\n\r\n\r\n\r\n    isOccTimeSlot = (activity) => {\r\n        const { activities } = this.state\r\n        const currStartTime = activity.at\r\n\r\n        const currEndTime = currStartTime + activity.duration * 30 * 60 * 1000\r\n        for (let i = 0; i < activities.length; i++) {\r\n            const act = activities[i]\r\n            const checkedStartTime = act.at\r\n            const checkedEndTime = act.at + act.duration * 30 * 60 * 1000\r\n            if (activity.id && activity.id === act.id) continue\r\n\r\n            if (\r\n                (((currStartTime > checkedStartTime) && (currStartTime < checkedEndTime)) ||\r\n                    ((currEndTime > checkedStartTime) && (currEndTime < checkedEndTime))) ||\r\n\r\n                ((checkedStartTime > currStartTime) && (checkedStartTime < currEndTime)) ||\r\n                ((checkedEndTime > currStartTime) && (checkedEndTime < currEndTime))\r\n\r\n            ) {\r\n                return true\r\n            }\r\n\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    mapActsToDays = () => {\r\n        const { activities, destinations } = this.props.trip;\r\n        activities.sort((act1, act2) => act1.at - act2.at)\r\n        let map = activities.reduce((acc, activity) => {\r\n\r\n            let day = utils.getDateDay(activity.at)\r\n            if (!acc[day]) acc[day] = []\r\n            acc[day].push(activity)\r\n            return acc\r\n\r\n        }, {})\r\n        map = this.sortDateMap(map)\r\n        return map\r\n    }\r\n\r\n\r\n\r\n    getCol = (mat, col) => {\r\n        const MatColumn = (_mat, n) => _mat.map(x => x[n]);\r\n        return MatColumn(mat, col);\r\n    }\r\n\r\n    sortDateMap(map) {\r\n        let arrSorted = [];\r\n        for (let day in map) {\r\n\r\n            arrSorted.push([+day, map[day]]);\r\n        }\r\n        const linearDays = this.getLinearTripDays();\r\n        for (let i = 0; i < linearDays.length; i++) {\r\n            let currDay = utils.getDateDay(linearDays[i])\r\n            let isInclude = arrSorted.find((day) => day[0] === currDay)\r\n            if (!isInclude) {\r\n                arrSorted.push([currDay, [{ at: linearDays[i], freeDay: true }]])\r\n            }\r\n\r\n        }\r\n        arrSorted.sort(function (day1, day2) {\r\n            return day1[1][0].at - day2[1][0].at;\r\n        });\r\n\r\n        return arrSorted\r\n\r\n    }\r\n    onEdit = (act) => {\r\n        this.props.showModal('editActivity', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n    }\r\n\r\n    onOpenDetails = (act) => {\r\n        this.props.showModal('activityDetails', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n\r\n    }\r\n\r\n    onDragMove = ({ pos }, id) => {\r\n\r\n        const activity = this.state.activities.find(act => act.id === id)\r\n        const dest = this.props.trip.destinations.find(_dest => _dest.name === activity.destination)\r\n\r\n        let newTime = this.getTimeFromIdx(pos)\r\n        if (newTime < dest.startDate - 24 * 60 ** 2 * 1000 || newTime - 12 * 60 ** 2 * 1000 > dest.endDate) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'Cannot move activities to another destination!' })\r\n            return\r\n        }\r\n        if (!newTime) return\r\n        console.log(newTime);\r\n\r\n        activity.at = newTime\r\n\r\n        if (this.isOccTimeSlot(activity)) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n        this.saveAct(activity)\r\n    }\r\n\r\n    getTimeFromIdx = ({ i, j }) => {\r\n        const { page } = this.state\r\n        const currWeekDates = this.getLinearTripDays()\r\n        if (j + page * daysCount >= currWeekDates.length) {\r\n\r\n            return false\r\n        }\r\n\r\n\r\n        const currDayDate = new Date(currWeekDates[j + page * daysCount])\r\n        if (i % 2 !== 0) {\r\n            currDayDate.setHours(7 + (i - 1) / 2, 0)\r\n        } else {\r\n            currDayDate.setHours(6 + i / 2, 30)\r\n\r\n        }\r\n        // const isoMonthDate = currDayDate.toISOString().substring(0, 10)\r\n\r\n        // let isoTime = (i % 2 !== 0) ? `${this.getTwoDig(7 + (i - 1) / 2)}:00` : `${this.getTwoDig(6 + i / 2)}:30`\r\n        // const isoDate = new Date(isoMonthDate + 'T' + isoTime)\r\n        // const resTime = isoDate.getTime()\r\n        return currDayDate.getTime()\r\n    }\r\n\r\n    saveAct = (act) => {\r\n        let { activities } = this.state;\r\n        if (act.id) {\r\n            activities = activities.map(_act => {\r\n                return (_act.id === act.id) ? act : _act\r\n            })\r\n        } else {\r\n            act.id = utils.makeId()\r\n            activities.push(act)\r\n        }\r\n        this.props.closeModal()\r\n\r\n        this.props.updateTripAct(activities)\r\n        this.setState({ activities })\r\n        this.loadWeekMat()\r\n    }\r\n\r\n\r\n    getDaysInMonth(timeStamp) {\r\n        let time = new Date(timeStamp)\r\n        let year, month;\r\n        [month, year] = [time.getMonth(), time.getFullYear()]\r\n\r\n        return new Date(year, month + 1, 0).getDate();\r\n    }\r\n\r\n\r\n    getWeekDests = () => {\r\n        const { page } = this.state\r\n        var { destinations } = this.props.trip\r\n        const linearDays = this.getLinearTripDays()\r\n        const minDay = linearDays[page * daysCount]\r\n        return destinations.filter(dest => {\r\n            return dest.startDate >= minDay || dest.endDate >= minDay\r\n        })\r\n    }\r\n\r\n    getMinDestinations = () => {\r\n\r\n        const destinations = this.getWeekDests()\r\n        const { page } = this.state\r\n        const minDestinations = []\r\n        const destsHeadLength = this.mapDestsToHeaderLength()\r\n        const destsNames = Object.keys(destsHeadLength)\r\n        const destsLength = Object.values(destsHeadLength)\r\n        for (let i = 0; i < destsNames.length; i++) {\r\n\r\n            const time = destinations.find(dest => {\r\n                return dest.name === destsNames[i]\r\n            })\r\n            \r\n            minDestinations.push({ name: destsNames[i], duration: destsLength[i], time })\r\n        }\r\n        return minDestinations\r\n\r\n\r\n    }\r\n\r\n\r\n    mapDestsToHeaderLength = () => {\r\n        const { trip } = this.props\r\n        const { page } = this.state\r\n        const { destinations } = this.props.trip\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination, idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate), idx }\r\n        })\r\n        const currWeekDests = utils.calculateDates(tripStart, tripEnd, destinationsTimes).slice(page * daysCount, page * daysCount + daysCount)\r\n        let currDestName;\r\n        let currDest;\r\n        return currWeekDests.reduce((acc, { td }, idx) => {\r\n\r\n            if (td.full || td.full === 0) {\r\n                currDest = destinations[td.full]\r\n                currDestName = currDest.name\r\n                acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n            } else {\r\n                if (((td.start || td.start === 0) && (!td.end && td.end !== 0))) {\r\n                    currDest = destinations[td.start]\r\n                    currDestName = currDest.name\r\n                    acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n                } else {\r\n\r\n                    if (td.start || td.start === 0) {\r\n                        currDest = destinations[td.start]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n                    if (td.end || td.end === 0) {\r\n                        currDest = destinations[td.end]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n            return acc\r\n        }, {})\r\n\r\n    }\r\n\r\n    getLinearTripDays = () => {\r\n        const linearDays = []\r\n        let { startDate, tripLength } = this.state\r\n        for (let i = 0; i < tripLength; i++) {\r\n            linearDays.push(startDate + i * 24 * 60 * 60 * 1000)\r\n        }\r\n        return linearDays\r\n    }\r\n\r\n    getDestsWithActs = (destinations, allActs) => {\r\n        destinations = destinations.filter((dest) => {\r\n            return this.isActInDests(dest, allActs)\r\n        })\r\n        return destinations\r\n\r\n    }\r\n\r\n    isActInDests(dest, allActs) {\r\n        for (let acts of allActs) {\r\n            let currActs = acts[1]\r\n            for (let act of currActs) {\r\n                if (act.destination === dest.name) return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    getRowIdx = (timeStamp) => {\r\n        const time = new Date(timeStamp)\r\n        const hour = time.getHours()\r\n        const minuets = time.getMinutes()\r\n        let slot;\r\n        if (minuets === 0) {\r\n            slot = (hour - 6) * 2 - 1\r\n\r\n        } else {\r\n            slot = (hour - 6) * 2\r\n        }\r\n\r\n        return slot\r\n    }\r\n\r\n\r\n    onTogglePage = async (direction) => {\r\n        const { tripLength, page } = this.state\r\n        let pageCount = Math.ceil(tripLength / daysCount)\r\n        let newPage = (direction = 'next') ? (page + 1) % pageCount : (page - 1) % pageCount\r\n        await this.setState({ page: newPage })\r\n        await this.loadWeekMat()\r\n        this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n    getDayNumOfAct = (day) => {\r\n        return day.reduce((acc, act) => {\r\n            acc += (act.id) ? 1 : 0\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    getTwoDig = (num) => {\r\n        let numStr = num + ''\r\n        return (numStr.length === 1) ? '0' + numStr : numStr\r\n    }\r\n\r\n    renderDayActivities(mat) {\r\n        const actPreviews = []\r\n\r\n        for (let i = 0; i < daysCount; i++) {\r\n\r\n            var col = this.getCol(mat, i)\r\n            actPreviews.push(<DayActivities onDragMove={this.onDragMove} getTimeFromIdx={this.getTimeFromIdx} destinations={this.props.trip.destinations} onEdit={this.onEdit} onOpenDetails={this.onOpenDetails} onRemoveAct={this.onRemoveAct} getRowIdx={this.getRowIdx} key={utils.makeId()} day={col} />\r\n            )\r\n        }\r\n\r\n        return actPreviews\r\n    }\r\n\r\n\r\n    render() {\r\n        const { weekMat, minDestinations } = this.state\r\n        const { destinations } = this.props.trip\r\n        if (!weekMat || !minDestinations) return <div>Loading...</div>\r\n        const dayActs = this.renderDayActivities(weekMat)\r\n        this.mapDestsToHeaderLength()\r\n        return (\r\n            <div className=\"assembly-container\">\r\n                <section className=\"paging-assembly\">\r\n                    <div className=\"toggle-page\" onClick={() => this.onTogglePage('prev')}>{'<'}</div>\r\n                    <span>{this.state.page + 1}</span>\r\n                    <div className=\"toggle-page\" onClick={() => this.onTogglePage('next')}>{'>'}</div>\r\n                </section>\r\n                <DestinationsHeader allDestinations={destinations} destinations={minDestinations} />\r\n                <div className={'trip-assembly-main full'}>\r\n                    <DayTimeLine />\r\n                    {dayActs}\r\n                </div >\r\n                <button className='editActivity styled-button' onClick={() => this.props.showModal('editActivity', { saveAct: this.saveAct, isOccTimeSlot: this.isOccTimeSlot, act: null, destinations: this.props.trip.destinations })}>add activity</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react'\r\nexport function MembersPreview({ member }) {\r\n    const url=member.imgUrl||'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    return (\r\n        <div className=\"member-preview\" >\r\n            <img className=\"image-preview\" src={url}></img>\r\n            <div className=\"is-active-circle\"></div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { utils } from '../../services/utils'\r\n \r\nimport { MembersPreview } from './MemberPreview'\r\n\r\n\r\nexport class TripNavBar extends React.Component {\r\n    state={\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n    }\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.trip!==this.props.trip){\r\n            this.setState({ trip: this.props.trip})\r\n        }\r\n        \r\n    }\r\n    render(){\r\n        if(!this.props.trip) return <div>1</div>\r\n        return (\r\n            <div className=\"trip-navbar flex align-center justify-center full\">\r\n                <div className=\"members-preview flex\">\r\n                    {this.props.trip.members.map(member=><MembersPreview  key={utils.makeId()} member={member}/>)}\r\n                </div>\r\n                <div className=\"trip-routes flex justify-center\">\r\n                    <NavLink to={`/trip/${this.props.trip._id}/triproute`}>Route</NavLink>\r\n                    <NavLink to={`/trip/${this.props.trip._id}/tripassembly`}>Assembly</NavLink>\r\n                </div>\r\n                <button className=\"ustyled-button add-user-btn\" onClick={() => this.props.showModal('add-member', this.props.trip._id )}><i className=\"fas fa-user-plus\"></i></button>\r\n                {/* <a className='see' onClick={toggleSettings}>settings</a> \r\n                <TripSettings settingsOpen={settingsOpen} tripId={trip._id}/>  */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport class AddDestination extends React.Component {\r\n    state = {\r\n        addDestOpen: false,\r\n        destination: {\r\n            name: '',\r\n            days: ''\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.setState({destination:{\r\n            name:'',\r\n            days:'',\r\n            location:utils.getRandomLatLng()\r\n        }})\r\n    }\r\n\r\n    onAddDestination = () => {\r\n        this.setState({ addDestination: !this.state.addDestination })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const { name, value } = ev.target;\r\n        this.setState({ destination: { ...this.state.destination, [name]: value } })\r\n\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        this.toggleAddDestination()\r\n        this.props.addDestination(this.state.destination)\r\n\r\n    }\r\n    toggleAddDestination = () => {\r\n        this.setState({ addDestOpen: !this.state.addDestOpen })\r\n    }\r\n\r\n    render() {\r\n        const addDestOpen = this.state.addDestOpen ? 'form-open' : ''\r\n        return (\r\n            <React.Fragment>\r\n                <i className=\"fas fa-plus add-destination-button\" onClick={this.toggleAddDestination}></i>\r\n                <div className={`add-destination column ${addDestOpen}`}>\r\n                    <div className=\"styled-header\">Add destination</div>\r\n                    <form onSubmit={this.onSubmit} className={`add-destination-form  `}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Enter destination\"\r\n                            // className=\"styled-input\"\r\n                            name=\"name\"\r\n                            value={this.state.destination.name}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Number of days\"\r\n                            // className=\"styled-input\"\r\n                            name=\"days\"\r\n                            value={this.state.destination.days}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        <button className=\"styled-button\">Add!</button>\r\n                    </form>\r\n                    <div className=\"add-destination-footer\"></div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n\r\n\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function WeekPreview({ dates,showDay }) {\r\n    function hotDog(date) {\r\n        if (!date.td) return\r\n        const keys = Object.keys(date.td)\r\n        return keys.map(key => {\r\n            const className = `dest-${date.td[key]} ${key}`\r\n            return <div key={utils.makeId()} className={className}></div>\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <tr key={utils.makeId()}>\r\n            {dates.map((date, idx) => <td onClick={()=>showDay(date)} className={`${!date.td?'faded':''}`} key={utils.makeId()}>{new Date(date.day).getDate()}{hotDog(date)}</td>)}\r\n        </tr>\r\n    )\r\n\r\n}\r\n","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { WeekPreview } from './WeekPreview'\r\n\r\n\r\nexport function RouteCalendar({ trip,showDay }) {\r\n\r\n    function generateCalendar() {\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination,idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate) , idx }\r\n        })\r\n        const calendarData = calculateDates(tripStart, tripEnd, destinationsTimes)\r\n        const fullCalendarData = getDaysAround(calendarData, tripStart, tripEnd)\r\n        return fullCalendarData\r\n    }\r\n    function getDaysAround(data, start, end) {\r\n        let fullCalendarData = getFirstSunday(start, data)\r\n        fullCalendarData = getLastSaturday(end, data)\r\n        return fullCalendarData\r\n\r\n    }\r\n\r\n    function getFirstSunday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() > 0) {\r\n            currDay = new Date(currDay.getTime() - (1000 * 60 * 60 * 24))\r\n            calendarData.unshift({ day: currDay })\r\n        }\r\n        return calendarData\r\n\r\n    }\r\n    function getLastSaturday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() < 6) {\r\n            currDay = new Date(currDay.getTime() + (1000 * 60 * 60 * 24))\r\n            calendarData.push({ day:currDay })\r\n        }\r\n        return calendarData\r\n    }\r\n\r\n\r\n\r\n    function renderTable(data) {\r\n        const weekCmps = []\r\n        if (data.length % 7 !== 0) return null\r\n        let weeksCount = data.length / 7;\r\n        while (weeksCount) {\r\n            weekCmps.push(<WeekPreview showDay={showDay} key={utils.makeId()} dates={data.splice(0, 7)}  />)\r\n            weeksCount--\r\n        }\r\n        return weekCmps\r\n\r\n    }\r\n\r\n    function calculateDates(start, end, destinations) {\r\n        let nextDay = new Date(start)\r\n        let dates = [{ day: nextDay, td:{'start':0} }]\r\n        while (nextDay.getDate() !== new Date(end).getDate()) {\r\n            nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n            dates.push({ day: nextDay, td:''})\r\n            destinations.forEach(dest=>{\r\n                if(dest.start.getDate()===nextDay.getDate()&& dest.start.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'start':dest.idx}\r\n                }else if(dest.start<nextDay && nextDay.setHours(12)<dest.end.setHours(11) ){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'full':dest.idx}\r\n                }else if(dest.end.getDate()===nextDay.getDate()&& dest.end.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'end':dest.idx}\r\n                }\r\n            })\r\n        }\r\n        return dates\r\n    }\r\n\r\n\r\n    const calendarData = generateCalendar()\r\n    return (\r\n        <table className=\"route-calendar\">\r\n            <thead className=\"table-header\">\r\n                <tr >\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                    <th>\r\n                        M\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        W\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        F\r\n                    </th>\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                </tr>\r\n\r\n            </thead>\r\n            <tbody>\r\n                {renderTable(calendarData) || 'w'}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\n\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function RouteTimeLinePreview({ destination, idx, isLast, changeOrder, updateDestinations,allowTrash }) {\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.DESTINATION,\r\n            id: idx\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            if(item.id===idx)return\r\n            updateDestinations(item.id, idx)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    if(isDragging===true){\r\n        // allowTrash()\r\n    }\r\n\r\n    const _isOver = (isOver)?'is-dragging':''\r\n    const letFire = isDragging? 'on':'';\r\n    return (\r\n        <React.Fragment>\r\n            { <div className={`fire-ring ${letFire}`}></div>}\r\n            <div ref={drop} className=\"time-line-area flex align-center\">\r\n                <div className=\"route-time-line-context flex align-center \">\r\n                    <div ref={drag} className={`index-ball dest-${idx} flex align-center justify-center  ${_isOver} `} ><p>{idx + 1}</p></div>\r\n                    <div className=\"time-line-text\">\r\n                        <p>{destination.name}</p>\r\n                        <p>{utils.calculateDays(destination.startDate, destination.endDate) - 1} Nights</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            { !isLast && <div className=\"line\"></div>}\r\n        </React.Fragment>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { RouteTimeLinePreview } from './RouteTimeLinePreview'\r\n\r\nexport function RouteTimeLine({ trip, updateDestinations,allowTrash }) {\r\n    // export class RouteTimeLine extends React.Component {\r\n  \r\n    return (\r\n        <div  className=\"route-time-line\">\r\n            {trip.destinations.map((destination, idx) => {\r\n                return (\r\n                    <RouteTimeLinePreview\r\n                        key={utils.makeId()}\r\n                        destination={destination}\r\n                        idx={idx}\r\n                        isLast={(idx + 1) === trip.destinations.length ? true : false}\r\n                        updateDestinations={updateDestinations}\r\n                        allowTrash={allowTrash}\r\n                    />)\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","// import { GoogleApiWrapper } from 'google-maps-react';\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { MembersPreview } from '../TripApp/MemberPreview';\r\nimport { AddDestination } from './AddDestiantion';\r\nimport { RouteCalendar } from './RouteCalendar'\r\nimport { RouteTimeLine } from './RouteTimeLine'\r\n\r\nexport function TripRoute ({trip,updateDestinations,showModal,addDestination,toggleChat,allowTrash,trashOpen,showDay}) {\r\n    const [ {isOver} , drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            updateDestinations(item.id,-1)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n        const classForTrash = trashOpen?'trash-open':'';\r\n        return (\r\n            <div className=\"trip-route flex column\">\r\n                <div className=\"members-preview flex justify-between align-center\">\r\n                    {trip.members.map((member, idx) => <MembersPreview key={idx} member={member} />)}\r\n                    <button className=\"ustyled-button add-user-btn\" onClick={() => showModal('add-member', trip._id)}><i className=\"fas fa-user-plus \"></i></button>\r\n                </div>\r\n                <RouteCalendar trip={trip} showDay={showDay} />\r\n                <div className=\"trip-bar-icons trip-bar-destinations-icons flex justify-between\">\r\n                <AddDestination addDestination={addDestination}/>\r\n                    <i ref={drop}  className={`fas fa-trash ${classForTrash}`}></i>\r\n\r\n                </div>\r\n                <RouteTimeLine trip={trip} updateDestinations={updateDestinations} allowTrash={allowTrash}/>\r\n                <div className=\"trip-bar-icons flex justify-between flex1 align-end\">\r\n                    <i className=\"fas fa-sms\"></i>\r\n                    <i className=\"fas fa-comments\" onClick={toggleChat} ></i>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { socketService } from '../../services/socketService';\r\n\r\nclass _Chat extends Component {\r\n    state = {\r\n        msg: {\r\n            from: this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler',\r\n            txt: ''\r\n        },\r\n        msgs: [],\r\n        isTyping: ''\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        socketService.on('chat addMsg', this.addMsg);\r\n        socketService.on('isTyping', this.userTyping);\r\n        socketService.on('notTyping', this.userTyping);\r\n\r\n        // socketService.emit('chat history');\r\n        // socketService.on('load history', this.loadHistory)\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('chat addMsg', this.addMsg);\r\n        socketService.off('isTyping', this.userTyping);\r\n        socketService.off('notTyping', this.userTyping);\r\n\r\n\r\n        // socketService.off('chat history', this.loadHistory)\r\n        socketService.terminate();\r\n    }\r\n    loadHistory = history => {\r\n        this.setState({ msgs: history || [] });\r\n    }\r\n    addMsg = newMsg => {\r\n        this.setState(prevState => ({ msgs: [...prevState.msgs, newMsg] }));\r\n    }\r\n    sendMsg = ev => {\r\n        ev.preventDefault();\r\n        socketService.emit('chat newMsg', this.state.msg);\r\n        socketService.emit(\"stopTyping\", \"\");\r\n        // this.addMsg(this.state.msg)//remove\r\n        const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n        this.setState({ msg: { from: user, txt: '' } });\r\n    }\r\n    userTyping = isTyping => {\r\n        this.setState({ isTyping });\r\n    }\r\n\r\n    msgHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        if ((value.trim()).length > 0) {\r\n            const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n            socketService.emit('user typing', user);\r\n\r\n        }\r\n        else {\r\n            socketService.emit(\"stopTyping\", \"\");\r\n        }\r\n        this.setState(prevState => {\r\n            return {\r\n                msg: {\r\n                    ...prevState.msg,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        \r\n        \r\n        return (\r\n            <div className={`chat-container flex column  ${this.props.chatOpen ? 'open' : ''}`}>\r\n                <div className=\"chat-header styled-header\">\r\n                    {this.props.trip.destinations[0].name} Chat\r\n                </div>\r\n\r\n                <ul className=\"chat-history\">\r\n                    {this.state.msgs.map((msg, idx) => (\r\n                        <li key={idx}>\r\n                            <div className=\"message-data\">{this.props.loggedInUser ? ((this.props.loggedInUser.username === msg.from) ? 'Me' : msg.from) : ((msg.from === 'Traveler') ? 'Traveler' : msg.from)}</div>\r\n\r\n\r\n\r\n                            <div className=\"message\">{msg.txt}</div>\r\n\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                {this.props.loggedInUser ? \r\n                ((this.state.isTyping && this.state.isTyping !== this.props.loggedInUser.username) ? <p>{this.state.isTyping} is Typing</p> : '') \r\n                : ((this.state.isTyping && !this.state.msg.txt.trim().length) ? <p>{this.state.isTyping} is Typing</p> : '')}\r\n\r\n\r\n                <form className=\"chat-send flex align-center\" onSubmit={this.sendMsg}>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={this.state.msg.txt}\r\n                        onChange={this.msgHandleChange}\r\n                        name=\"txt\"\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"New message\"\r\n\r\n                    />\r\n                    <button><i className=\"far fa-paper-plane\"></i></button>\r\n                </form>\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat);","import React from 'react'\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\nconst API_KEY = 'AIzaSyBXIyfwpDtmz9fLAQI-MUqWuhQtc-GQYoo'\r\n// const API_KEY =''\r\n\r\nclass _MapContainer extends React.Component {\r\n    state = {\r\n        bounds: '',\r\n        markers: [],\r\n        selectedPlace: '',\r\n        activeMarker: {},\r\n        showingInfoWindow: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const bounds = new this.props.google.maps.LatLngBounds();\r\n        const markers = [];\r\n        for (var i = 0; i < this.props.markers.length; i++) {\r\n            bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\r\n            markers.push(this.props.markers[i])\r\n        }\r\n        const BASE_IMG_URL = 'https://res.cloudinary.com/roidinary/image/upload/c_scale,w_20/'\r\n        const imgs = [\r\n            `${BASE_IMG_URL}v1600380972/locationVector1_xickq3.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector2_jpgbc9.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector3_izhosm.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector4_idbol0.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector5_jjqnfo.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector6_nvbbsq.png`\r\n        ]\r\n        this.setState({ bounds, markers, imgs })\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.markers !== prevProps.markers) {\r\n            const bounds = new this.props.google.maps.LatLngBounds();\r\n            for (var i = 0; i < this.props.markers.length; i++) {\r\n                bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\r\n            }\r\n            if (this.state.markers.length > 1&& this.state.map) this.state.map.fitBounds(this.state.bounds)\r\n            else{\r\n                if(this.state.map){\r\n                    this.state.map.panTo(this.props.markers[0].location)\r\n                    this.state.map.setZoom(10)\r\n\r\n                }\r\n            } \r\n            this.setState({ markers: this.props.markers, bounds })\r\n        }\r\n    }\r\n    onMarkerClick = (props, marker, e) =>\r\n        this.setState({\r\n            selectedPlace: props,\r\n            activeMarker: marker,\r\n            showingInfoWindow: true\r\n        });\r\n    onMapClicked = (props) => {\r\n        if (this.state.showingInfoWindow) {\r\n            this.setState({\r\n                showingInfoWindow: false,\r\n                activeMarker: null\r\n            })\r\n        }\r\n    };\r\n\r\n    getMarkers() {\r\n        return this.state.markers.map((marker, idx) => {\r\n            return (<Marker key={utils.makeId()}\r\n                onClick={this.onMarkerClick}\r\n                title={'The marker`s title will appear as a tooltip.'}\r\n                name={marker.name}\r\n                position={marker.location}\r\n                icon={this.state.imgs[idx]}\r\n            >\r\n\r\n            </Marker>)\r\n        })\r\n    }\r\n\r\n    containerStyle = {\r\n        width: '100%',\r\n        height: '300px',\r\n        zIndex: -1\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Map\r\n                google={this.props.google}\r\n                containerStyle={this.containerStyle}\r\n                zoom={10}\r\n                onClick={this.onMapClicked}\r\n                onReady={(mapProps, map) => {\r\n                    if (this.state.markers.length > 1) map.fitBounds(this.state.bounds)\r\n                    else map.panTo(this.state.markers[0].location)\r\n                    this.setState({ map })\r\n                }}\r\n            >\r\n\r\n\r\n                {this.state.markers[0] && this.getMarkers()}\r\n                <InfoWindow\r\n                    marker={this.state.activeMarker}\r\n                    visible={this.state.showingInfoWindow}>\r\n                    <div>\r\n                        <h1>{this.state.selectedPlace.name}</h1>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport const MapContainer = GoogleApiWrapper({\r\n    // apiKey: (API_KEY)\r\n})(_MapContainer)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Router, Switch, withRouter } from 'react-router-dom'\r\nimport { loadTrip, addTrip, addTripFast } from '../store/actions/tripActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\n// import { TripRoute } from '../cmps/TripRoute'\r\nimport { tripService } from '.././services/tripService'\r\nimport { TripAssembly } from '../cmps/TripAssembly/TripAssembly'\r\nimport { TripNavBar } from '../cmps/TripApp/TripNavBar'\r\nimport { TripRoute } from '../cmps/TripRoute/TripRoute'\r\nimport { utils } from '../services/utils'\r\nimport { logDOM } from '@testing-library/react'\r\nimport { Chat } from '../cmps/TripApp/Chat'\r\nimport { socketService } from '../services/socketService'\r\nimport { MapContainer } from '../cmps/MainCmps/Map';\r\nimport { closeMsg, showMsg } from '../store/actions/msgActions'\r\nimport { ErrorMsg } from '../cmps/MainCmps/ErrorMsg'\r\n// import locationCevtorRed from 'https://res.cloudinary.com/roidinary/image/upload/v1600377967/locationVectorRed_vzufx4.png'\r\n\r\nclass _TripApp extends Component {\r\n\r\n    state = {\r\n        chatOpen: false,\r\n        settingsOpen: false,\r\n        isSocketSetup: false,\r\n        trashOpen: false,\r\n        markers: [],\r\n        sideBar: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { loadTrip } = this.props\r\n        socketService.setup();\r\n        socketService.on('tripUpdated', loadTrip);\r\n        const { id } = this.props.match.params\r\n        socketService.emit('enter trip', id);\r\n        try {\r\n            await loadTrip(id,true)\r\n            if (this.props.match.params.openSignup === 'true') {\r\n                this.props.showModal('signup', id)\r\n            }\r\n            const markers = this.getMarkersOfDests()\r\n            this.setState({ isSocketSetup: true, markers })\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    getMarkersOfDests() {\r\n        return this.props.trip.destinations.map(dest => {\r\n            return { location: dest.location, name: dest.name }\r\n        })\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('tripUpdated', loadTrip);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState) {\r\n\r\n        if (prevProps.trip === this.props.trip) return\r\n        const markers = this.getMarkersOfDests()\r\n        this.setState({ markers })\r\n        socketService.on('tripUpdated', loadTrip);\r\n    }\r\n\r\n    updateDestinations = async (destIdxToMove, moveToIdx) => {\r\n        let destinations = [...this.props.trip.destinations]\r\n        let activities = [...this.props.trip.activities]\r\n        const moveDifference = utils.calculateDays(destinations[destIdxToMove].startDate, destinations[destIdxToMove].endDate)\r\n        const destTomove = destinations.splice(destIdxToMove, 1)[0]\r\n        const constant = (1000 * 60 * 60 * 24 * (moveDifference - 1))\r\n        if (moveToIdx === -1) {\r\n            activities = activities.reduce((acc, act, idx) => {\r\n                if (act.destination === destTomove.name) return acc\r\n                acc.push(act)\r\n                return acc\r\n            }, [])\r\n            destinations.forEach((dest, idx) => {\r\n                if (idx >= destIdxToMove) {\r\n                    dest.startDate = dest.startDate - constant\r\n                    dest.endDate = dest.endDate - constant\r\n                    activities.forEach(act => {\r\n                        if (act.destination === dest.name) act.at -= constant\r\n                    })\r\n                }\r\n            })\r\n\r\n        } else {\r\n            if (destIdxToMove > moveToIdx) {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[moveToIdx].startDate, this.props.trip.destinations[destIdxToMove - 1].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate - constant2;\r\n                destTomove.endDate = destTomove.endDate - constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at -= constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx > moveToIdx && idx <= destIdxToMove) {\r\n                        dest.startDate = dest.startDate + constant\r\n                        dest.endDate = dest.endDate + constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at += constant\r\n                        })\r\n                    }\r\n                })\r\n            } else {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[destIdxToMove + 1].startDate, this.props.trip.destinations[moveToIdx].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate + constant2;\r\n                destTomove.endDate = destTomove.endDate + constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at += constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx < moveToIdx && idx >= destIdxToMove) {\r\n                        dest.startDate = dest.startDate - constant\r\n                        dest.endDate = dest.endDate - constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at -= constant\r\n                        })\r\n                    }\r\n                })\r\n\r\n            }\r\n        }\r\n        const newTrip = { ...this.props.trip, activities, destinations }\r\n        await this.props.addTrip(newTrip)\r\n        socketService.emit('tripToUpdate', newTrip._id);\r\n\r\n    }\r\n\r\n    updateTripAct = async (activities) => {\r\n        let newTrip = { ...this.props.trip, activities }\r\n        await this.props.addTrip(newTrip)\r\n        socketService.emit('tripToUpdate', newTrip._id);\r\n\r\n    }\r\n\r\n    toggleChat = () => {\r\n        this.setState({ chatOpen: !this.state.chatOpen })\r\n    }\r\n    toggleSettings = () => {\r\n        this.setState({ settingsOpen: !this.state.settingsOpen })\r\n    }\r\n    allowTrash = () => {\r\n        this.setState({ trashOpen: true })\r\n        setTimeout(() => {\r\n            this.denyTrash()\r\n\r\n        }, 3000)\r\n    }\r\n    denyTrash = () => {\r\n        ;\r\n        this.setState({ trashOpen: false })\r\n    }\r\n    getMarkers() {\r\n        return this.props.trip.destinations.map(dest => {\r\n            return { location: dest.location, name: dest.name }\r\n        })\r\n    }\r\n\r\n    addDestination = async (newDest) => {\r\n        const { destinations } = { ...this.props.trip }\r\n        newDest.startDate = destinations[destinations.length - 1].endDate\r\n        newDest.endDate = newDest.startDate + 1000 * 60 * 60 * 24 * (+newDest.days - 1)\r\n        newDest.id = utils.makeId()\r\n        newDest.location = { lat: 53.5511, lng: 9.9937 }\r\n        destinations.push(newDest)\r\n        const newTrip = { ...this.props.trip, destinations }\r\n        await this.props.addTrip(newTrip)\r\n        // const markers = this.getMarkersOfDests()\r\n        // console.log(markers);\r\n        // this.setState({ markers })\r\n        socketService.emit('tripToUpdate', newTrip._id);\r\n    }\r\n\r\n    showDay = (day) => {\r\n        const actToRender = this.props.trip.activities.reduce((acc, act) => {\r\n            if (new Date(act.at).getDate() === day.day.getDate()) {\r\n                acc.push(act)\r\n            }\r\n            return acc\r\n        }, [])\r\n    }\r\n\r\n    openSideBar = () => {\r\n        console.log('togglenuid');\r\n        this.setState({ sideBar: !this.state.sideBar })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        const sideBarClass = this.state.sideBar ? 'open-side-bar' : ''\r\n        console.log(sideBarClass, 'add class');\r\n        if (!trip) return <div>Loading....</div>\r\n        return (\r\n            <div className=\"trip-app  \">\r\n                <ErrorMsg />\r\n                <div className=\"trip-app-area flex \">\r\n                    <button onClick={this.openSideBar} className={`side-bar-bars ${sideBarClass}`}><i className=\"fas fa-bars \" ></i></button>\r\n                    <div className={`trip-side-bar flex column ${sideBarClass} `}>\r\n                        <TripRoute\r\n                            trip={trip}\r\n                            addDestination={this.addDestination}\r\n                            updateDestinations={this.updateDestinations}\r\n                            showModal={this.props.showModal}\r\n                            toggleChat={this.toggleChat}\r\n                            allowTrash={this.allowTrash}\r\n                            trashOpen={this.state.trashOpen}\r\n                            showDay={this.showDay}\r\n                            openSideBar={this.openSideBar}\r\n                        />\r\n                    </div>\r\n                    <div className=\"trip-app-main full\">\r\n                        {this.state.markers[0] && <MapContainer markers={this.state.markers} />}\r\n                        <TripAssembly\r\n                            showMsg={this.props.showMsg}\r\n                            closeMsg={this.props.closeMsg}\r\n                            trip={trip} updateTripAct={this.updateTripAct}\r\n                            showModal={this.props.showModal}\r\n                            closeModal={this.props.closeModal}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {this.state.isSocketSetup && <Chat chatOpen={this.state.chatOpen} trip={trip} />}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trip: state.tripReducer.currTrip\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadTrip,\r\n    showModal,\r\n    closeModal,\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg\r\n\r\n\r\n}\r\nexport const TripApp = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripApp))\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass _UserTrips extends Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const UserTrips = connect(mapStateToProps, mapDispatchToProps)(_UserTrips);","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class EditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: ['relax'],\r\n            duration: 1,\r\n            notes: '',\r\n            price: 0,\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        if (act) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n            minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({\r\n\r\n                activitie: {\r\n                    ...act, name: act.name, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                    destination: act.destination\r\n                }, minTime, maxTime\r\n            })\r\n        } else {\r\n\r\n            minTime = utils.getIsoTime(destinations[0].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destinations.length - 1].endDate)\r\n\r\n            await this.setState({ activitie: { ...this.state.activitie, destination: destinations[0].name }, minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { destinations } = this.props.props\r\n        const { destination } = this.state.activitie\r\n        if (prevState.activitie.destination === destination) return\r\n        if (destination && !this.state.activitie.id) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === destination)\r\n            const minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            const maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({ minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        const field = target.name;\r\n        let value = target.value;\r\n\r\n        // if (field === 'at') {\r\n        //     let time = value.substring(value.length - 5)\r\n        //     let hours = +time.split(':')[0]\r\n        //     let minuets = +time.split(':')[1]\r\n        //     if (minuets <= 15) {\r\n        //         minuets = 0\r\n        //     } else if (minuets >= 45) {\r\n        //         minuets = 0\r\n        //         hours += 1\r\n        //     } else {\r\n        //         minuets = 30\r\n        //     }\r\n        //     if (hours >= 0 && hours < 7) {\r\n        //         alert('Please choose events between 7:00 AM and 11:30 PM')\r\n        //         return\r\n        //     }\r\n        //     minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\r\n        //     hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\r\n        //     value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\r\n        // }\r\n\r\n        if (target.type === 'checkbox') this.setState({ [field]: target.checked });\r\n        else if (target.type === 'number') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            alert('You aleardy have plans for that date! please choose a different one.')\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n    render() {\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        const { destinations } = this.props.props\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let currDate = new Date(activitie.at)\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n        return (\r\n\r\n            // <div>\r\n            //     <p>Name: <span contentEditable={true} suppressContentEditableWarning={true}\r\n            //         onBlur={(ev)=>{this.checkinput(ev, 'name')}}>{this.state.activitie.name}</span></p>\r\n\r\n            // </div>\r\n\r\n            <form className=\"edit-activity-form flex column\" onSubmit={this.onSaveAct}>\r\n                <label htmlFor=\"name\">Name</label>\r\n                <input className=\"styled-input\" placeholder=\"name\" name=\"name\" id=\"name\" value={this.state.activitie.name} onChange={this.handleChange}></input>\r\n                {!activitie.id && <label htmlFor=\"dest-input\">Destination</label>}\r\n                {!activitie.id && <select value={this.state.activitie.destination} placeholder=\"destination\" name=\"destination\" id=\"dest-input\" onChange={this.handleChange}>\r\n                    <option value=\"\" disabled selected>Select Destination</option>\r\n                    {destinations.map((dest, idx) => {\r\n                        return <option key={utils.makeId()} value={dest.name}>{dest.name}</option>\r\n\r\n                    })}\r\n                </select>}\r\n                <label htmlFor=\"start-time-activity-input\">Time</label>\r\n                <DatePicker\r\n                    minDate={minT}\r\n                    maxDate={maxT}\r\n                    selected={this.getValidTime().getTime()}\r\n                    minTime={min}\r\n                    maxTime={max}\r\n                    autoComplete=\"off\"\r\n                    className=\"styled-input\"\r\n                    showTimeSelect\r\n                    required\r\n                    showFullMonthYearPicker\r\n                    dateFormat=\"Pp\"\r\n                    onChange={time => this.handleTime(time)}\r\n                />\r\n                {/* <input className=\"styled-input\" type=\"datetime-local\" id=\"start-time-activity-input\" min={minTime} max={maxTime} name=\"at\"\r\n                    onChange={this.handleChange} value={this.state.activitie.at}\r\n                    required=\"required\" id=\"date-activity-input\" /> */}\r\n                <label htmlFor=\"duration\">Duration (Half hours)</label>\r\n                <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                <label htmlFor=\"notes\">Notes</label>\r\n                <textarea placeholder=\"notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                <label htmlFor=\"price\" id=\"price\">Price</label>\r\n                <input className=\"styled-input\" type=\"number\" placeholder=\"price\" name=\"price\" id=\"price\" onChange={this.handleChange} placeholder=\"price\" value={this.state.activitie.price}></input>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class PrevEditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: '',\r\n            duration: '',\r\n            notes: '',\r\n            price: '',\r\n            currency: '',\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: '',\r\n        isInputOpen: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n        minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n        maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n        this.setState({\r\n\r\n            activitie: {\r\n                ...act, name: act.name, currency: act.price.currency, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                destination: act.destination\r\n            }, minTime, maxTime\r\n        })\r\n    }\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const field = ev.target.name;\r\n        let value = ev.target.value;\r\n\r\n        if (field === 'at') {\r\n            let time = value.substring(value.length - 5)\r\n            let hours = +time.split(':')[0]\r\n            let minuets = +time.split(':')[1]\r\n            if (minuets <= 15) {\r\n                minuets = 0\r\n            } else if (minuets >= 45) {\r\n                minuets = 0\r\n                hours += 1\r\n            } else {\r\n                minuets = 30\r\n            }\r\n            if (hours >= 0 && hours < 7) {\r\n                this.props.showMsg({ type: 'input', msg: 'Please choose events between 7:00 AM and 11:30 PM' })\r\n                return\r\n            }\r\n            minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\r\n            hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\r\n            value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\r\n            this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n        }\r\n\r\n        else if (field === 'duration') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    handleContentEditable = (ev) => {\r\n        const field = ev.currentTarget.dataset.name\r\n        let value = ev.target.innerText\r\n        if (field === 'price') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            this.props.showMsg({ type: 'input', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        console.log(\"PrevEditActivity -> getValidTime -> this.state.activitie.at\", this.state.activitie.at)\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { activitie, minTime, maxTime } = this.state\r\n        const { destinations } = this.props.props\r\n        const startTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime())\r\n        const endTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime() + (this.state.activitie.duration / 2) * 60 * 60 * 1000)\r\n\r\n\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let currDate = new Date(activitie.at)\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n\r\n        return (\r\n\r\n\r\n            <form className=\"preview-activity-form flex column\" >\r\n                <h2 contentEditable={true} suppressContentEditableWarning={true} autoCorrect=\"off\" data-name=\"name\" onInput={this.handleContentEditable}>{this.state.activitie.name}</h2>\r\n                <div className=\"flex\">\r\n                    <small><i className=\"fas fa-map-marker\"></i> {this.state.activitie.destination}</small>\r\n                    <small><i className=\"far fa-clock\"></i>{`${startTime}-${endTime}`} <i onClick={() => { this.setState({ isInputOpen: !this.state.isInputOpen }) }} className=\"fas fa-edit\"></i></small>\r\n                </div>\r\n\r\n                <ErrorMsg />\r\n\r\n                <div className={`flex time-container ${this.state.isInputOpen ? 'openHeight' : ''} `}>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Beginning time:</h4>\r\n\r\n\r\n                        <input className=\"styled-input date\" type=\"datetime-local\" id=\"start-time-activity-input\" min={minTime} max={maxTime} name=\"at\"\r\n                            onChange={this.handleChange} value={this.state.activitie.at}\r\n                            required=\"required\" id=\"date-activity-input\" />\r\n                    </div>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Duration (Half hours)</h4>\r\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                    </div>\r\n\r\n                </div>\r\n                {<img src={this.props.props.act.imgUrl} alt=\"https://teddytennis.com/cyprus/wp-content/uploads/sites/76/2017/11/placeholder.png\"/>}\r\n\r\n                <DatePicker\r\n                    minDate={minT}\r\n                    maxDate={maxT}\r\n                    selected={this.getValidTime().getTime()}\r\n                    minTime={min}\r\n                    maxTime={max}\r\n                    autoComplete=\"off\"\r\n                    className=\"styled-input\"\r\n                    showTimeSelect\r\n                    required\r\n\r\n                    // dateFormat=\"Pp\"\r\n                    onChange={time => this.handleTime(time)}\r\n                />\r\n                <h4 htmlFor=\"notes\">Notes</h4>\r\n                <textarea placeholder=\"notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                <div className=\"flex\">\r\n                    <h4>Price:</h4>\r\n                    <p>{this.state.activitie.currency}</p>\r\n                    <p contentEditable={true} suppressContentEditableWarning={true} data-name=\"price\" onBlur={this.handleContentEditable}>{this.state.activitie.price}</p>\r\n                </div>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form >\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg'\r\n\r\n\r\n\r\nexport class AddReview extends React.Component {\r\n\r\n    state = {\r\n        reviewToAdd: {\r\n            content: '',\r\n            name: '',\r\n            rating: null,\r\n        }\r\n    }\r\n    elInput = React.createRef()\r\n\r\n    componentDidMount() {\r\n        this.elInput.current.focus()\r\n    }\r\n\r\n\r\n    onInputChange = (value, inputType) => {\r\n        this.setState({\r\n            reviewToAdd: { ...this.state.reviewToAdd, [inputType]: value }\r\n        })\r\n    }\r\n\r\n    onAddReview = (ev, review) => {\r\n        ev.preventDefault();\r\n        let addReview = this.props.props\r\n        if (!review.rating) {\r\n            this.props.showMsg('You must rate this trip first')\r\n            return\r\n        }\r\n        addReview(review)\r\n        this.props.closeModal()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'review-modal flex'}>\r\n                <form className=\"flex column \" onSubmit={(ev) => { this.onAddReview(ev, this.state.reviewToAdd) }}>\r\n                    <div className=\" headline\">\r\n                        <h2>Review</h2>\r\n                    </div>\r\n                    <input className=\"styled-input\" placeholder=\"Enter your name\" type=\"text\" name=\"name\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} />\r\n                    <textarea id=\"content\" required name=\"content\" placeholder=\"Enter your review here\" ref={this.elInput} onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }}>\r\n                    </textarea>\r\n                    <ErrorMsg />\r\n                    <select name=\"rating\" defaultValue=\"-1\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} >\r\n                        <option disabled value=\"-1\">Rate the trip</option>\r\n                        <option value=\"1\">1</option>\r\n                        <option value=\"2\">2</option>\r\n                        <option value=\"3\">3</option>\r\n                        <option value=\"4\">4</option>\r\n                        <option value=\"5\">5</option>\r\n                    </select>\r\n                    <button onSubmit={(ev) => { this.onAddReview(ev, this.state.reviewToAdd) }}>Save</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\nexport class AddMember extends Component {\r\n\r\n    state = {\r\n        value: '',\r\n        copied: false,\r\n        // emailToSend: {\r\n        //     subject: '',\r\n        //     body: '',\r\n        //     email: ''\r\n\r\n        // }\r\n    }\r\n\r\n    componentDidMount() {\r\n    this.setState({value:`http://localhost:3000/#/trip/${this.props.props}/triproute/true`})\r\n    }\r\n    \r\n\r\n    handleInput = (value, name) => {\r\n        this.setState({ emailToSend: { ...this.state.emailToSend, [name]: value } })\r\n    }\r\n\r\n    onAddMember(ev, mail) {\r\n        ev.preventDefault()\r\n        this.props.closeModal()\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n            return (\r\n            <div className=\"flex column share-trip\">\r\n                <h3>Share this link with your trip partners and start planning together!</h3>\r\n                <img src=\"https://thumbs.dreamstime.com/b/group-young-people-friends-celebrating-successful-hiking-expedition-group-young-people-friends-celebrating-successful-hiking-123552345.jpg\" alt=\"\"/>\r\n                <input disabled className=\"styled-input\" value={this.state.value}\r\n                    onChange={({ target: { value } }) => this.setState({ value, copied: false })} />\r\n\r\n                {/* <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <span>Copy to clipboard with span</span>\r\n                </CopyToClipboard> */}\r\n\r\n                <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <button className=\"styled-button\">Copy and share</button>\r\n                </CopyToClipboard>\r\n\r\n                {this.state.copied ? <span style={{ color: 'orange' }}>Copied!</span> : null}\r\n            </div>\r\n\r\n            // <div className={'add-member'}>\r\n            //     <form className=\"flex column\" onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>\r\n            //         <div className=\"headline\">\r\n            //             <h2>Add Member</h2>\r\n            //         </div>\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter your friend Email\"\r\n            //             type=\"email\"\r\n            //             name=\"email\"\r\n            //             required\r\n            //             value={this.state.emailToSend.email}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter subject\"\r\n            //             type=\"text\"\r\n            //             name=\"subject\"\r\n            //             required\r\n            //             value={this.state.emailToSend.subject}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <textarea\r\n            //             required\r\n            //             name=\"body\"\r\n            //             placeholder=\"Enter your review here\"\r\n            //             value={this.state.emailToSend.body}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }}>\r\n            //         </textarea>\r\n            //         {/* <ErrorMsg /> */}\r\n            //         <button onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>Save</button>\r\n            //     </form>\r\n            // </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst appRoot = document.createElement('div');\r\ndocument.body.appendChild(appRoot);\r\n// ReactDOM.render(<App />, appRoot);","import React, { Component } from 'react'\r\n\r\n\r\nexport class NotificationMsg extends Component {\r\n    state = {\r\n        isShown: false,\r\n        msg: '',\r\n        type: ''\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <p>Are you sure you want to delete?</p>\r\n                <div className=\"flex notification-btns\">\r\n                    <button className=\"styled-button\" onClick={() => this.props.props.removeAct(this.props.props.actId)}>Delete</button>\r\n                    <button className=\"styled-button\" onClick={() => this.props.closeModal()}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        )\r\n        // const { isShown, msg, type } = this.state\r\n        // const _hidden = (isShown)?'':'hidden-msg'\r\n        // return (\r\n        //     <div className={ `notification-box ${type} ${_hidden}` }  >\r\n        //         { isShown && <span onClick={ () => this.setState({ isShown: false }) }>X</span> }\r\n        //         { isShown && <h2> { msg }</h2> }\r\n        //     </div>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { LoginSignupPage } from '../../pages/LoginSignupPage';\r\nimport { closeModal, showModal } from '../../store/actions/modalActions'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions';\r\nimport { EditActivity } from '../TripAssembly/EditActivity';\r\nimport { PrevEditActivity } from '../TripAssembly/PrevEditActivity';\r\nimport { AddReview } from '../tripReviews/AddReview';\r\nimport { AddMember } from './AddMember';\r\nimport { NotificationMsg } from './NotificationMsg';\r\n\r\nclass _Modal extends React.Component {\r\n    state = {\r\n        dynamicCmp: '',\r\n        nameToDisplay: ''\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const curCmp = this.props.modal.cmp\r\n        // console.log(prevProps.modal.cmp, curCmp);\r\n        if (prevProps.modal.cmp === curCmp) return\r\n        let dynamicCmp = '';\r\n        let nameToDisplay = '';\r\n        switch (curCmp) {\r\n            case 'login':\r\n                dynamicCmp = <LoginSignupPage page={true} handleClick={this.handleClick} />\r\n                nameToDisplay = 'Please Login'\r\n                break\r\n            case 'signup':\r\n                const tripId = this.props.modal.props\r\n                dynamicCmp = <LoginSignupPage page={false} handleClick={this.handleClick} tripId={tripId} />\r\n                nameToDisplay = 'Please Sign Up'\r\n                break\r\n            case 'editActivity':\r\n                dynamicCmp = <EditActivity props={this.props.modal.props} />\r\n                nameToDisplay = 'Edit activity'\r\n                break\r\n            case 'activityDetails':\r\n                dynamicCmp = <PrevEditActivity props={this.props.modal.props} showMsg={this.props.showMsg}\r\n                closeMsg={this.props.closeMsg}/>\r\n                nameToDisplay = 'Activity Details'\r\n                break\r\n            case 'removeActivity':\r\n                dynamicCmp = <NotificationMsg props={this.props.modal.props} closeModal={this.props.closeModal} />\r\n                nameToDisplay = 'Delete Activity'\r\n                break\r\n            case 'add-review':\r\n                dynamicCmp = <AddReview props={this.props.modal.props.addReview} showMsg={this.props.showMsg}\r\n                    closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Review'\r\n                break\r\n            case 'add-member':\r\n                dynamicCmp = <AddMember props={this.props.modal.props}\r\n                    closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Member'\r\n                break\r\n            default:\r\n                dynamicCmp = <div>proplem loading modal</div>\r\n        }\r\n        this.setState({ dynamicCmp, nameToDisplay })\r\n\r\n    }\r\n    handleClick = (cmp) => {\r\n        this.props.showModal(cmp)\r\n    }\r\n\r\n\r\n    checkKey = (ev) => {\r\n        if (ev.key === \"Escape\") this.closeModal()\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.props.closeModal()\r\n    }\r\n\r\n\r\n    render() {\r\n        const showLoginSignup = this.state.curCmp === 'login' || this.state.curCmp === 'signup' ? true : false;\r\n        return (\r\n            <div className={`modal-screen flex align-center justify-center ${this.props.modal.isShown ? '' : 'hide'}`} onKeyDown={this.checkKey} onMouseDown={this.closeModal}>\r\n                <div className={`modal-container `} onMouseDown={(ev) => ev.stopPropagation()} >\r\n                    <div className=\"modal-header flex align-center justify-center styled-header\" ><p>{this.state.nameToDisplay}</p><button onClick={this.closeModal}>X</button></div>\r\n                    <div className=\"modal-content\"  >\r\n                        {this.state.dynamicCmp}\r\n                        {/* {this.props.msg? <p>{this.props.msg}</p>:''} */}\r\n                    </div>\r\n                </div >\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.modalReducer,\r\n        msg: state.msgReducer.msg\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    closeModal,\r\n    showModal,\r\n    showMsg,\r\n    closeMsg\r\n}\r\nexport const Modal = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Modal))\r\n","import React from 'react'\r\n\r\n\r\nexport class LongTxt extends React.Component {\r\n\r\n    state = {\r\n        text: this.props.text,\r\n        isLongTxtShown: false\r\n    }\r\n\r\n    onReadMore = () => {\r\n        this.setState({ isLongTxtShown: !this.state.isLongTxtShown })\r\n    }\r\n\r\n    render() {\r\n        const  text  = this.state.text\r\n        var isLongTxtShown = this.state.isLongTxtShown\r\n        return (\r\n            <p>\r\n                {(text.length < 100 || (isLongTxtShown && text.length > 100)) ? text : text.substring(0, 100) + ' . . .'}\r\n                {text.length > 100 && <button className=\" styled-button expend-description\" onClick={this.onReadMore}>{this.state.isLongTxtShown ? 'Less' : 'More'}</button>}\r\n            </p >\r\n        )\r\n    }\r\n}\r\n","\r\nimport React from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { LongTxt } from '../MainCmps/LongText';\r\n\r\n\r\nexport function ReviewPreview({ review }) {\r\n    const rating = ''.repeat(review.rating);\r\n    \r\n\r\n    function getStars() {\r\n        let stars = [];\r\n        for (let i = 0; i < review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />)\r\n        }\r\n        for (let i = 0; i < 5 - review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600690459/450716_preview1_pvoieq.png\" alt=\"\" />)\r\n        }\r\n        return stars\r\n    }\r\n\r\n\r\n    const time = `${new Date(review.createdAt).getDate()}/${new Date(review.createdAt).getMonth() + 1}/${new Date(review.createdAt).getFullYear()}`\r\n    return (\r\n        < React.Fragment >\r\n            <div className=\"review-details flex justify-between\">\r\n                <div>{getStars()} </div>\r\n                <p>{time}</p>\r\n            </div>\r\n            <h3>{review.name || 'Traveler'}</h3>\r\n            {review.content && <LongTxt text={review.content} />}\r\n\r\n        </React.Fragment >\r\n    )\r\n}\r\n","import { ReviewPreview } from './ReviewPreview.jsx'\r\nimport React from 'react'\r\n\r\n\r\nexport function ReviewList({ reviews }) {\r\n    return (\r\n        <ul className=\"review-list flex column container\">\r\n            <h3>What people Saying about this trip: </h3>\r\n            {(!reviews || !reviews.length)? 'No reviews have been written for this trip yet' : reviews.map((review) =>\r\n                <li className=\"review flex column\" key={review.id}>\r\n                    <ReviewPreview key={review._id} review={review} />\r\n                </li>\r\n\r\n            )}\r\n        </ul>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { utils } from '../services/utils'\r\nimport { TripPreview } from '../cmps/Home/TripPreview'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { ReviewList } from '../cmps/tripReviews/ReviewList'\r\nimport { reviewActions } from '../store/actions/reviewActions'\r\nimport { loadTrip } from '../store/actions/tripActions'\r\nimport { showModal } from '../store/actions/modalActions'\r\n\r\nclass _TripDetails extends Component {\r\n\r\n    state = {\r\n        trip: '',\r\n        isReviewOpen: false,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { id } = this.props.match.params\r\n        try {\r\n           await this.props.loadTrip(id)\r\n            await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    onToggleExpend = () => {\r\n        this.setState({ isReviewOpen: true })\r\n    }\r\n\r\n\r\n    addReview = async (review) => {\r\n        // review.byUserId = this.props.loggedInUser._id\r\n        review.aboutTrip = this.props.trip._id\r\n        await reviewActions.addReview(review)\r\n        await this.props.loadReviews({ tripId: this.props.trip._id })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        if (!trip) return <p> Loading . . .</p>\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n\r\n\r\n        return (\r\n            <div className=\"trip-preview reviews-page\">\r\n                <div className=\"img-wraper\">\r\n                    <img src={utils.getRandomPic()} alt=\"\" />\r\n                </div>\r\n                <h2>{days} days to {trip.destinations[0].name}</h2>\r\n                <p>By: Moshe544</p>\r\n                {/* <TripPreview trip={trip} img={utils.getRandomPic()} style={{ pointerEvents: 'none' }} addClass={'details'} /> */}\r\n                <div className=\"addreview-container\">\r\n                    <Link to={`/trip/${trip._id}/triproute`}>\r\n                        <button onClick={this.props.closeModal} className=\"styled-button\">Explore this trip</button>\r\n                    </Link>\r\n                    <ReviewList reviews={this.props.reviews} />\r\n                    <div className=\"flex reviews-btns-container\">\r\n                        <button className=\"review-btns styled-button\" onClick={() => this.props.showModal('add-review', { addReview: this.addReview })}>Add Review</button>\r\n                        <button className=\"review-btns styled-button\" onClick={() => { this.props.history.push('/trip') }}>Back</button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        trip: state.tripReducer.currTrip,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addReview: reviewActions.addReview,\r\n    loadReviews: reviewActions.loadReviews,\r\n    loadTrip,\r\n    showModal,\r\n}\r\n\r\nexport const TripDetails = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripDetails))\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nclass _Loader extends React.Component {\r\n    render() {\r\n        if(!this.props.loader)  return <React.Fragment/>\r\n\r\n        return (\r\n            <div className=\"positioning-container\">\r\n                <div className=\"spinning-container\">\r\n                <span>LOADING</span>\r\n                    <div className=\"airplane-container\">\r\n                        {/* <span className=\"fa fa-plane\"></span> */}\r\n                        <img className=\"plane\" src=\"https://res.cloudinary.com/roidinary/image/upload/v1600624566/Asset_dwekpj.png\"></img>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loader: state.modalReducer.loaderOn\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    \r\n}\r\nexport const Loader = connect(mapStateToProps, mapDispatchToProps)(_Loader)","import React from 'react';\r\nexport function Footer() {\r\n    return (\r\n        <div className=\"footer flex align-center justify-center\">\r\n            TrollyRights 2022\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { MainNavBar } from './cmps/MainCmps/MainNavBar';\r\nimport { About } from './pages/About';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { TripStock } from './pages/TripStock';\r\nimport { LoginSignupPage } from './pages/LoginSignupPage';\r\nimport { TripApp } from './pages/TripApp.jsx'\r\nimport { UserTrips } from './pages/UserTrips';\r\nimport { Modal } from './cmps/MainCmps/Modal';\r\n\r\nimport '../src/scss/main.scss'\r\nimport { TripDetails } from './pages/TripDetails';\r\n\r\nimport { Loader } from './cmps/MainCmps/Loader';\r\nimport { Footer } from './cmps/MainCmps/Footer';\r\n\r\n\r\nexport function App() {\r\n\r\n  return (\r\n\r\n    <div style={{position:\"relative\"}} className=\"App \">\r\n      <MainNavBar />\r\n      <main>\r\n        <Modal />\r\n        <Loader />\r\n        <Switch>\r\n          <Route component={LoginSignupPage} path='/lognsignup' />\r\n          <Route component={TripApp} path='/trip/:id/:triproute/:openSignup?' />\r\n          {/* <Route component={TripApp} path='/trip/:id/:triproute' /> */}\r\n          <Route component={TripDetails} path='/trip/:id/' />\r\n          <Route component={UserTrips} path='/user/:id' />\r\n          <Route component={TripStock} path='/trip' />\r\n          <Route component={About} path='/about' />\r\n          <Route exact component={HomePage} path='/' />\r\n        </Switch>\r\n      </main>\r\n        <Footer/>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const initialState = {\r\n    isShown: false,\r\n    props: null,\r\n    cmp: null,\r\n    msg:null,\r\n    loaderOn: false\r\n}\r\n\r\nexport function modalReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MODAL':\r\n            return {\r\n                isShown: true,\r\n                props: action.props,\r\n                cmp: action.cmp\r\n            }\r\n        case 'CLOSE_MODAL':\r\n            return {\r\n                isShown: false,\r\n                props: null,\r\n                cmp: null\r\n            }\r\n        case 'LOGIN_PROBLEML':\r\n            return {\r\n                ...state,\r\n                msg:'wrong email or password'\r\n            }\r\n        case 'SET_LOADER':\r\n            return {\r\n                loaderOn: true,\r\n            }\r\n        case 'CLOSE_LOADER':\r\n            return {\r\n                loaderOn: false,\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    isShown: false,\r\n    type: '',\r\n    msg: ''\r\n}\r\n\r\nexport function msgReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MSG':\r\n            return {\r\n                isShown: true,\r\n                msg: action.msg.msg,\r\n                type: action.msg.type\r\n            }\r\n        case 'CLOSE_MSG':\r\n            return {\r\n                isShown: false,\r\n                type: '',\r\n                msg: ''\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    reviews: [],\r\n    selectedReview: null\r\n  };\r\n  \r\n  export function reviewReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n      case 'SET_REVIEWS':\r\n        return { ...state, reviews: action.reviews };\r\n      case 'REVIEW_ADD':\r\n        return { ...state, reviews: [...state.reviews, action.review] };\r\n      case 'REVIEW_UPDATE':\r\n        return {\r\n          ...state,\r\n          reviews: state.reviews.map(review =>\r\n            review._id === action.review._id ? action.review : review\r\n          )};\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  ","const initialState = {\r\n    trips: [],\r\n    currTrip: null\r\n\r\n}\r\n\r\n\r\nexport function tripReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_TRIPS':\r\n            return {\r\n                ...state,\r\n                trips: action.trips\r\n            }\r\n        case 'EDIT_TRIP':\r\n            return {\r\n                ...state, currTrip: { ...action.trip }, trips: state.trips.map(trip => {\r\n                    if (action.trip._id === trip._id) return action.trip\r\n                    return trip;\r\n                })\r\n\r\n            }\r\n        case 'SET_TRIP':\r\n            return {\r\n                ...state,\r\n                currTrip: { ...action.trip }\r\n            }\r\n\r\n\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","\r\nlet localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n    users: [],\r\n    loggedInUser: localLoggedinUser\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            return {\r\n                users:[...state.users],\r\n                loggedInUser: action.user\r\n            }\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { modalReducer } from './reducers/modalReducer';\r\nimport { msgReducer } from './reducers/msgReducer';\r\nimport { reviewReducer } from './reducers/reviewReducer';\r\nimport {tripReducer } from './reducers/tripReducer';\r\nimport { userReducer } from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    tripReducer,\r\n    userReducer,\r\n    modalReducer,\r\n    reviewReducer,\r\n    msgReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { DndProvider } from 'react-dnd'\r\nimport {HTML5Backend} from 'react-dnd-html5-backend'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <DndProvider backend={HTML5Backend}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </DndProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}