{"version":3,"sources":["cmps/MainCmps/UserPreview.jsx","services/httpService.js","services/tripService.js","store/actions/tripActions.js","store/actions/modalActions.js","services/userService.js","cmps/MainCmps/MainNavBar.jsx","store/actions/userActions.js","pages/About.jsx","services/utils.js","store/actions/msgActions.js","cmps/MainCmps/ErrorMsg.jsx","cmps/Home/AddTrip.jsx","cmps/MainCmps/GooglePlaces.jsx","services/reviewService.js","store/actions/reviewActions.js","cmps/Home/TripPreview.jsx","cmps/Home/TripSlider.jsx","cmps/Home/UserFlow.jsx","pages/HomePage.jsx","cmps/Home/TripFilter.jsx","cmps/Home/TripList.jsx","pages/TripStock.jsx","pages/Login.jsx","pages/Signup.jsx","services/socketService.js","pages/LoginSignupPage.jsx","services/eventBusService.js","services/dndItems.js","cmps/TripAssembly/ActivitiePreview.jsx","cmps/TripAssembly/OpenDaySlot.jsx","cmps/TripAssembly/DayActivities.jsx","cmps/TripAssembly/DayTimeLine.jsx","cmps/TripAssembly/DestNamePrev.jsx","cmps/TripAssembly/DestinationsHeader.jsx","cmps/TripAssembly/TripAssembly.jsx","cmps/TripApp/MemberPreview.jsx","cmps/TripRoute/AddDestiantion.jsx","cmps/TripRoute/WeekPreview.jsx","cmps/TripRoute/RouteCalendar.jsx","cmps/TripRoute/RouteTimeLinePreview.jsx","cmps/TripRoute/RouteTimeLine.jsx","cmps/TripRoute/TripRoute.jsx","cmps/TripApp/Chat.jsx","cmps/MainCmps/Map.jsx","pages/TripApp.jsx","pages/UserTrips.jsx","cmps/TripAssembly/EditActivity.jsx","cmps/TripAssembly/PrevEditActivity.jsx","cmps/tripReviews/AddReview.jsx","cmps/MainCmps/LongText.jsx","cmps/tripReviews/ReviewPreview.jsx","cmps/tripReviews/ReviewList.jsx","cmps/tripReviews/TripReviews.jsx","cmps/MainCmps/AddMember.jsx","cmps/MainCmps/AlertUser.jsx","cmps/MainCmps/NotificationMsg.jsx","cmps/MainCmps/Modal.jsx","cmps/MainCmps/Loader.jsx","cmps/MainCmps/Footer.jsx","App.jsx","serviceWorker.js","store/reducers/modalReducer.js","store/reducers/msgReducer.js","store/reducers/reviewReducer.js","store/reducers/tripReducer.js","store/reducers/userReducer.js","store/store.js","index.js"],"names":["UserPreview","state","expand","toggleExpand","setState","Fragment","className","src","this","props","user","imgUrl","alt","username","onClick","logout","closemainNavbar","Component","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","tripService","query","getById","remove","tripId","httpService","save","trip","_id","filterBy","name","queryStr","loadTrip","flag","dispatch","type","Promise","resolve","reject","setTimeout","tripLoad","loadTrips","trips","addTrip","newTrip","showModal","cmp","closeModal","userService","login","signup","getUsers","userId","update","userCred","_handleLogin","sessionStorage","clear","setItem","JSON","stringify","window","_MainNavBar","navBar","isNavbarOpen","backgroundChanged","path","location","pathname","match","pageYOffset","openMainNavbar","addEventListener","prevProps","prevState","resetTrip","removeEventListener","to","usersData","loggedInUser","mapDispatchToProps","MainNavBar","connect","userReducer","withRouter","About","utils","makeId","length","txt","possible","i","charAt","Math","floor","random","calculateDays","start","end","Date","difference","getTime","ceil","createMat","cols","rows","mat","j","pos","col","getDateDay","timeStamp","getDate","getWeekDay","time","getDay","getTimeDayStr","hours","_get2DigTime","getHours","minuets","getMinutes","getRandomPic","imgIdx","getRandomInt","imgs","getIsoTime","setMinutes","getTimezoneOffset","toISOString","slice","calculateDates","destinations","nextDay","dates","day","td","push","forEach","dest","getMonth","idx","setHours","getRandomLatLng","locations","lat","lng","setToHourMinuets","hour","min","getRandomName","num","max","showMsg","msg","closeMsg","_ErrorMsg","isShown","ErrorMsg","msgReducer","_AddTrip","tripName","currTrip","startDate","endDate","onSetDestinations","ev","preventDefault","newtrip","toLowerCase","now","id","onSaveDestination","activities","members","history","handleAddress","handleSelect","value","geocodeByAddress","results","getLatLng","latlng","handleInput","targetName","target","formatDate","date","getFullYear","onSubmit","placeholder","required","autoComplete","onChange","autocomplete","htmlFor","minDate","selected","map","key","AddTrip","reviewService","add","reviewId","review","createdAt","addedReview","reviewActions","loadReviews","reviews","addReview","_TripPreview","handleClick","isMember","find","member","originId","getTripPrice","reduce","acc","currValue","price","amount","getReviewsAvg","rating","currRev","toFixed","err","addClass","days","style","pointerEvents","createdBy","TripPreview","reviewReducer","TripSlider","effect","slidesPerView","navigation","centeredSlides","delay","coverflowEffect","rotate","depth","pagination","clickable","el","img","UserFlow","fontWeight","SwiperCore","use","EffectCoverflow","Autoplay","EffectFade","Navigation","Pagination","Scrollbar","A11y","_HomePage","smooth","scroll","scrollIntoView","behavior","block","HomePage","tripReducer","TripFilter","mostOccDests","list","_TripList","TripList","_TripStock","getMostOccDests","concat","numOfOccMap","numOfOccArr","Object","entries","sort","dest1","dest2","destOcc","toLocaleUpperCase","substring","field","getTripsForDisplay","filter","includes","onsetFilter","TripStock","Login","email","password","userCreds","handleForm","React","Signup","handleChange","tripToRed","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","_LoginSignupPage","action","tripIdToRed","all","page","LoginSignupPage","eventBus","listener","callListener","detail","dispatchEvent","CustomEvent","ItemTypes","ActivitiePreview","act","onRemoveAct","onEdit","onOpenDetails","useDrag","item","collect","monitor","isDragging","drag","isFirstCol","isDayHeadClass","literalDay","isDrag","isLenOne","duration","findIndex","destination","ref","gridRow","row","OpenDaySlot","onDragMove","getRowIdx","useDrop","accept","drop","isOver","_isOver","DayActivities","newDay","reCalcPos","DayTimeLine","times","DestNamePrev","updateFreeDays","freeDays","_dest","display","gridColumn","DestinationsHeader","allDestinations","daysCount","gridTemplateColumns","TripAssembly","weekMat","tripLength","actsToDisplay","minDestinations","setChosenDay","linearDaysDates","getLinearTripDays","toLocaleDateString","currDayDate","openSideBar","initiateAssembly","windowWidth","innerWidth","loadWeekMat","getMinDestinations","WeeklyActsToDisplay","mapActsToDays","destTimeStamp","at","prevDate","currDate","currDayActs","getDaysInMonth","freeDay","showDaysName","actId","removeAct","_act","updateTripAct","isOccTimeSlot","activity","currStartTime","currEndTime","checkedStartTime","checkedEndTime","act1","act2","sortDateMap","getCol","n","x","saveAct","newTime","getTimeFromIdx","destStart","desEnd","actCopy","currWeekDates","getWeekDests","linearDays","minDay","idxMaxDay","maxDay","destEnd","destsHeadLength","mapDestsToHeaderLength","destsNames","keys","destsLength","values","currDestName","currDest","tripStart","tripEnd","destinationsTimes","full","getDestsWithActs","allActs","isActInDests","onTogglePage","direction","pageCount","newPage","getDayNumOfAct","getTwoDig","numStr","setFullAssembly","setDestsMarkers","_removeBus","removeBus","startTime","_time","arrSorted","currDay","day1","day2","currActs","actPreviews","dayActs","renderDayActivities","MembersPreview","AddDestination","addDestOpen","toggleAddDestination","addDestination","WeekPreview","showDay","hotDog","RouteCalendar","calendarData","unshift","getFirstSunday","getLastSaturday","getDaysAround","generateCalendar","weekCmps","weeksCount","splice","renderTable","RouteTimeLinePreview","isLast","updateDestinations","letFire","RouteTimeLine","TripRoute","toggleChat","_Chat","from","msgs","isTyping","loadHistory","addMsg","newMsg","sendMsg","userTyping","msgHandleChange","trim","chatOpen","Chat","_MapContainer","bounds","markers","selectedPlace","activeMarker","showingInfoWindow","onMarkerClick","marker","e","onMapClicked","containerStyle","width","height","google","maps","LatLngBounds","extend","LatLng","initiateMarkerABounds","BASE_IMG_URL","fitBounds","panTo","setZoom","title","position","icon","zoom","onReady","mapProps","styles","featureType","elementType","stylers","saturation","color","lightness","visibility","weight","getMarkers","visible","MapContainer","GoogleApiWrapper","apiKey","_TripApp","settingsOpen","isSocketSetup","sideBar","getMarkersOfDests","destIdxToMove","moveToIdx","moveDifference","destTomove","constant","passDifference","constant2","_newTrip","toggleSettings","newDest","actToRender","setTrip","params","openSignup","removeTrip","sideBarClass","TripApp","_UserTrips","UserTrips","EditActivity","activitie","labels","notes","minTime","maxTime","handleTime","tzoffset","localISOTime","checked","onSaveAct","datetime","currency","getValidTime","destIdx","minT","maxT","minTemp","_min","_max","maxDate","showTimeSelect","showFullMonthYearPicker","dateFormat","PrevEditActivity","isInputOpen","handleContentEditable","currentTarget","dataset","innerText","endTime","contentEditable","suppressContentEditableWarning","data-placeholder","spellCheck","data-name","onBlur","AddReview","reviewToAdd","content","elInput","createRef","onInputChange","inputType","onAddReview","setRating","val","current","focus","classToAdd","isReviewOpen","currRate","LongTxt","text","isLongTxtShown","onReadMore","ReviewPreview","stars","getStars","ReviewList","_TripReviews","onToggleExpend","TripReviews","AddMember","copied","emailToSend","mail","disabled","onCopy","appRoot","document","createElement","AlertUser","modal","padding","body","appendChild","NotificationMsg","_Modal","dynamicCmp","nameToDisplay","checkKey","curCmp","onKeyDown","onMouseDown","stopPropagation","Modal","modalReducer","_Loader","loader","Loader","loaderOn","Footer","App","component","exact","Boolean","hostname","initialState","selectedReview","localLoggedinUser","parse","users","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","DndProvider","backend","HTML5Backend","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.81bc2090.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport class UserPreview extends Component {\r\n    state = {\r\n        expand: false\r\n    }\r\n    toggleExpand = () => {\r\n        this.setState({ expand: !this.state.expand })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div >\r\n                    <img className=\"user-preview\" src={this.props.user.imgUrl} alt={this.props.user.username + 'img'} onClick={this.toggleExpand}/>\r\n                    { <div className={`user-preview-expand flex column justify-around ${this.state.expand?'open':''}`} >\r\n                      \r\n                        <button className=\"styled-button logout\" onClick={()=>{this.props.logout(); this.props.closemainNavbar()}}>Logout</button>\r\n                    </div>}\r\n                </div>\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n}","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        throw err;\r\n    }\r\n}","\r\nimport httpService from './httpService'\r\n\r\nexport const tripService = {\r\n    query,\r\n    getById,\r\n    remove,\r\n    save\r\n}\r\n\r\n\r\n// const user = {\r\n//     _id: 'u101',\r\n//     fullName: 'Orly Amdadi',\r\n//     userName: 'orly@amdadi.com',\r\n//     password: 'tinkerbell',\r\n//     imgUrl: 'http://some-img',\r\n// }\r\n\r\nasync function query(filterBy={name:''}) {\r\n    const queryStr = `?search=${filterBy.name}`;\r\n    return httpService.get(`trip${queryStr}`);\r\n    \r\n}\r\n\r\n\r\nasync function getById(tripId) {\r\n    return httpService.get(`trip/${tripId}`,tripId)\r\n\r\n}\r\n\r\nfunction remove(tripId) {\r\n    return httpService.delete(`trip/${tripId}`)\r\n}\r\n\r\nfunction save(trip) {\r\n    if (trip._id) {\r\n        return httpService.put(`trip/${trip._id}`, trip)\r\n\r\n    } else {\r\n        return httpService.post('trip', trip)\r\n    }\r\n}","import { tripService } from \"../../services/tripService\"\r\n\r\nexport function loadTrip(tripId, flag) {\r\n    return async dispatch => {\r\n        try {\r\n            let trip = {}\r\n            if (flag) {\r\n                dispatch({ type: 'SET_LOADER' })\r\n                trip = await new Promise((resolve, reject) => {\r\n                    setTimeout(async () => {\r\n                        var tripLoad = await tripService.getById(tripId)\r\n                        resolve(tripLoad)\r\n                    }, 3500)\r\n                })\r\n                dispatch({ type: 'SET_TRIP', trip })\r\n            }\r\n            else {\r\n                trip = await tripService.getById(tripId)\r\n                dispatch({ type: 'SET_TRIP', trip })\r\n            }\r\n            return trip\r\n        } catch (err) {\r\n            console.log(err);\r\n        } finally {\r\n            dispatch({ type: 'CLOSE_LOADER' })\r\n\r\n        }\r\n\r\n    }\r\n}\r\nexport function setTrip(trip) {\r\n    \r\n    return async dispatch => {\r\n        dispatch({ type: 'SET_LOADER' })\r\n        dispatch({ type: 'SET_TRIP', trip })\r\n        dispatch({ type: 'CLOSE_LOADER' })\r\n        return trip\r\n\r\n    }\r\n}\r\n\r\nexport function resetTrip() {\r\n    const trip = null\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_TRIP', trip })\r\n    }\r\n}\r\n\r\nexport function loadTrips(filterBy) {\r\n    return async dispatch => {\r\n        const trips = await tripService.query(filterBy)\r\n        dispatch({ type: 'SET_TRIPS', trips })\r\n    }\r\n}\r\n\r\n\r\nexport function addTripFast(trip) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            await tripService.save(trip)\r\n        }\r\n\r\n        catch (err) {\r\n        }\r\n    }\r\n}\r\n\r\nexport function addTrip(newTrip) {\r\n    return async dispatch => {\r\n        try {\r\n            \r\n            const trip = await tripService.save(newTrip)\r\n            // socketService.emit('tripToUpdate', trip);\r\n            // socketService.emit('tripToUpdate', newTrip);\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            return trip\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n}\r\nexport function removeTrip(tripId) {\r\n    return async dispatch => {\r\n        try {\r\n            const trip = await tripService.remove(tripId)\r\n            dispatch({ type: 'REMOVE_TRIP', trip })\r\n            return trip\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n}\r\n","\r\n\r\nexport function showModal(cmp,props) {\r\n    return dispatch => {\r\n        dispatch({type:'SET_MODAL',cmp,props})\r\n    }\r\n}\r\n\r\nexport function closeModal() {\r\n    return  dispatch => {\r\n        dispatch({ type: 'CLOSE_MODAL' })\r\n    }\r\n}","\r\nimport httpService from './httpService'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update\r\n}\r\n\r\nwindow.userService = userService;\r\n\r\nfunction getUsers() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`user/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _handleLogin(user)\r\n    return Promise.reject('user not found'+userCred)\r\n}\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, Link, withRouter } from 'react-router-dom'\r\n\r\nimport { UserPreview } from '../MainCmps/UserPreview'\r\n\r\nimport { resetTrip } from '../../store/actions/tripActions'\r\nimport { showModal } from '../../store/actions/modalActions'\r\nimport { logout } from '../../store/actions/userActions'\r\n\r\nclass _MainNavBar extends Component {\r\n    state = {\r\n        navBar: '',\r\n        isNavbarOpen: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (!match) this.backgroundChanged()\r\n        window.addEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.location.pathname !== prevProps.location.pathname) {\r\n            this.backgroundChanged()\r\n            if (this.props.location.pathname === '/') {\r\n                this.props.resetTrip()\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n\r\n    backgroundChanged = () => {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (window.pageYOffset >= 80 || !match) {\r\n            this.setState({ navBar: true })\r\n        } else { this.setState({ navBar: false }) }\r\n    }\r\n\r\n    openMainNavbar = () => {\r\n        this.setState({ isNavbarOpen: !this.state.isNavbarOpen })\r\n    }\r\n\r\n    closemainNavbar =()=>{\r\n        this.setState({ isNavbarOpen: false })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className={'main-navbar flex justify-between align-center full  ' + (this.state.navBar ? 'navBar-background' : '')}>\r\n                    <Link to=\"/\" onClick={this.closemainNavbar}> <h1 className=\"logo\">Trolly</h1></Link>\r\n                    <div className={`flex justify-between main-navbar-links ${this.state.isNavbarOpen ? 'mainbar-open' : ''}`}>\r\n                        <Link to=\"/trip\"onClick={this.closemainNavbar} >Trips</Link>\r\n                        <NavLink to=\"/about\" onClick={this.closemainNavbar} >About</NavLink>\r\n                        {this.props.usersData.loggedInUser ? <UserPreview openMainNavbar={this.closemainNavbar} logout={this.props.logout} user={this.props.usersData.loggedInUser} /> : <div onClick={() => {this.props.showModal('login'); this.closemainNavbar()}}>Login</div>}\r\n                    </div>\r\n                    <button className=\"mobile-hamburger \" onClick={this.openMainNavbar}> </button>\r\n                </div>\r\n                <div className={`navbar-screen ${this.state.isNavbarOpen ? 'screen-open' : ''}`} onClick={this.closemainNavbar}></div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        usersData: state.userReducer\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    showModal,\r\n    logout,\r\n    resetTrip\r\n}\r\n\r\nexport const MainNavBar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_MainNavBar));","import { userService } from '../../services/userService';\r\n\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    try{\r\n      const user = await userService.login(userCreds);\r\n      dispatch({ type: 'SET_USER', user });\r\n      return user\r\n    }catch(err){\r\n      console.log(err,'actionsuser');\r\n      dispatch({type:'LOGIN_PROBLEM'})\r\n    }\r\n  };\r\n}\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.signup(userCreds);\r\n    dispatch({ type: 'SET_USER', user });\r\n    return user\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await userService.logout();\r\n    dispatch({ type: 'SET_USER', user: null });\r\n  };\r\n}\r\n","import React from 'react'\r\n\r\nexport function About() {\r\n    return (\r\n        <div className=\"about-page\">\r\n            <div className=\"about-hero full \">\r\n                <h2>We love to travel the world so we made it easy to plan</h2>\r\n            </div>\r\n            <div className=\"about-main\">\r\n                <div className=\"about-desc\">\r\n\r\n                    <h3>About Trolly</h3>\r\n                    <p>Trolly enables users to quickly and easily explore a destinations offerings and create personalized sightseeing itineraries by utilizing local expertise and cutting-edge artificial intelligence. Drawing from a database of over 80,000 destinations Trolly makes trip planning easy, intuitive and enjoyable for over 25 million travelers a year.</p>\r\n\r\n                    <p>We use technologies that allow users to create and edit trip's plans with friends, chat and watch live changes</p>\r\n                </div>\r\n                <h3>About Us</h3>\r\n                <div className=\"flex about-us justify-evenly\">\r\n                    <div className=\"flex column\">\r\n                        <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600889656/opinion-sin-imagen_raxn0y.png\" alt=\"\" />\r\n                        <p>Junior Developer</p>\r\n                    </div>\r\n                    <div className=\"flex column\">\r\n                        <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600889656/opinion-sin-imagen_raxn0y.png\" alt=\"\" />\r\n                        <p>Junior Developer</p>\r\n                    </div>\r\n                    <div className=\"flex column\">\r\n                        <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600889656/opinion-sin-imagen_raxn0y.png\" alt=\"\" />\r\n                        <p>Junior Developer</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","\r\n\r\n\r\nexport const utils = {\r\n    makeId,\r\n    calculateDays,\r\n    createMat,\r\n    getDateDay,\r\n    getWeekDay,\r\n    getTimeDayStr,\r\n    getRandomPic,\r\n    getRandomInt,\r\n    getIsoTime,\r\n    calculateDates,\r\n    getRandomLatLng,\r\n    setToHourMinuets,\r\n    getRandomName\r\n}\r\n\r\nfunction makeId(length = 5) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction calculateDays(start, end) {\r\n    end = new Date(end)\r\n    start = new Date(start)\r\n    var difference = end.getTime() - start.getTime();\r\n    var daysDifference = Math.ceil(difference / 999 / 60 / 60 / 24);\r\n    return daysDifference\r\n}\r\n\r\n\r\n\r\nfunction calculateDates(start, end, destinations) {\r\n    let nextDay = new Date(start)\r\n    let dates = [{ day: nextDay, td: { 'start': 0 } }]\r\n    while (nextDay.getDate() !== new Date(end).getDate()) {\r\n        nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n        dates.push({ day: nextDay, td: '' })\r\n        destinations.forEach(dest => {\r\n            if (dest.start.getDate() === nextDay.getDate() && dest.start.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'start': dest.idx }\r\n            } else if (dest.start < nextDay && nextDay.setHours(12) < dest.end.setHours(11)) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'full': dest.idx }\r\n            } else if (dest.end.getDate() === nextDay.getDate() && dest.end.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'end': dest.idx }\r\n            }\r\n        })\r\n    }\r\n    return dates\r\n}\r\n\r\n\r\nfunction createMat(cols, rows) {\r\n    const mat = []\r\n    for (let i = 0; i < rows; i++) {\r\n        mat[i] = []\r\n        for (let j = 0; j < cols; j++) {\r\n            mat[i][j] = { pos: { i, j } }\r\n\r\n            if (j === 0) {\r\n                mat[i][j] = { ...mat[i][j], col: 0 }\r\n            }\r\n        }\r\n    }\r\n\r\n    return mat\r\n}\r\n\r\nfunction getDateDay(timeStamp) {\r\n    const time = new Date(timeStamp);\r\n    return time.getDate()\r\n}\r\n\r\nfunction setToHourMinuets(timeStamp, hour, min) {\r\n    let time = new Date(timeStamp)\r\n    time.setHours(hour, min)\r\n    return time.getTime()\r\n\r\n}\r\n\r\n\r\nfunction getWeekDay(timeStamp) {\r\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const time = new Date(timeStamp);\r\n    return days[time.getDay()]\r\n}\r\n\r\nfunction getTimeDayStr(timeStamp) {\r\n    let time = new Date(timeStamp)\r\n    let hours = _get2DigTime(time.getHours());\r\n    let minuets = _get2DigTime(time.getMinutes());\r\n    return `${hours}:${minuets}`\r\n}\r\n\r\nfunction _get2DigTime(num) {\r\n    if ((num + '').length === 1) return '0' + num\r\n    return num\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\nfunction getRandomPic() {\r\n    const imgIdx = getRandomInt(0, imgs.length - 1)\r\n    return imgs[imgIdx]\r\n}\r\n\r\nfunction getIsoTime(timeStamp) {\r\n    let time = new Date(timeStamp);\r\n    time.setMinutes(time.getMinutes() - time.getTimezoneOffset());\r\n    return time.toISOString().slice(0, 16)\r\n}\r\nfunction getRandomLatLng() {\r\n    let locations = [\r\n        { lat: -23.5475, lng: -46.6361 }, //sau paolo\r\n        { lat: 13.751330328, lng: 100.489664708 }, //bangkok\r\n        { lat: 25.105497, lng: 121.597366 }, //taipei\r\n        { lat: 21.028511, lng: 105.804817 }, //hanoi\r\n        { lat: 39.916668, lng: 116.383331 }, //beijin\r\n        { lat: -16.5000000, lng: -68.1500000 }, //la paz\r\n        { lat: 27.700769, lng: 85.300140 }, // //Kathmandu, nepal\r\n        { lat: 14.599512, lng: 120.984222 }, //manila\r\n        { lat: 1.290270, lng: 103.851959 }, //singapor city\r\n        { lat: 6.927079, lng: 79.861244 }, //colombo sri lanka\r\n        { lat: 28.644800, lng: 77.216721 }, //new delhi\r\n    ]\r\n    return locations[getRandomInt(0, locations.length - 1)]\r\n}\r\n\r\nfunction getRandomName() {\r\n    const name = [\r\n        'Moshe544',\r\n        'Cochava',\r\n        'Ilanit',\r\n        'Yaron.B',\r\n        'J-Lo',\r\n        'Meni',\r\n        'QueenB',\r\n        'Latifa',\r\n        'Elvis',\r\n        'Yorgan',\r\n        'Matilda',\r\n        'Muki',\r\n        'Puki',\r\n        'Alfonso',\r\n        'Idan',\r\n        'Roi',\r\n        'Stav',\r\n        'Jermi',\r\n        'Fernandinho',\r\n        'Messi',\r\n        'L-James',\r\n        'Yonit',\r\n        'Adam',\r\n        'Eve',\r\n        'Kelly',\r\n        'Steve',\r\n        'Stue',\r\n        'Laquisha',\r\n        'Marisa',\r\n        'Sharon',\r\n        'Eliyahu'\r\n    ]\r\n    return name[getRandomInt(0, name.length - 1)]\r\n}\r\n\r\n\r\nconst imgs = [\r\n    'https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1', //clear water with sup\r\n    'https://images.unsplash.com/photo-1550399504-8953e1a6ac87?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //reading book at the beach\r\n    'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //sunglass on sand\r\n    'https://images.unsplash.com/photo-1527004013197-933c4bb611b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1', //norway\r\n    'https://images.unsplash.com/photo-1475066392170-59d55d96fe51?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-1.2.1', //manhaten\r\n    'https://images.unsplash.com/photo-1507272931001-fc06c17e4f43?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailnad\r\n    'https://images.unsplash.com/photo-1545579133-99bb5ab189bd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //maldivas\r\n    'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1524492412937-b28074a5d7da?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //india\r\n    'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0',  //italy/capri\r\n    'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //itlay/venice\r\n    'https://images.unsplash.com/photo-1517792844039-e52afb564132?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1499678329028-101435549a4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy',\r\n    'https://images.unsplash.com/photo-1535063406830-27dfae54262a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1554357475-accb8a88a330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //jordan\r\n    'https://images.unsplash.com/photo-1559628233-100c798642d4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //indonesia\r\n    'https://images.unsplash.com/photo-1527095655060-4026c4af2b25?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1583702993462-43615c05ceee?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1505662695181-d4b60363d2a3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //singapore\r\n    'https://images.unsplash.com/photo-1455459182396-ae46100617cb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //?\r\n    'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717865-a99cac1c95d8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717201-fbb671ff56b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n]","export function showMsg(msg) {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            this.closeMsg()\r\n        }, 3000)\r\n        dispatch({ type: 'SET_MSG', msg })\r\n        \r\n    }\r\n    \r\n}\r\n\r\nexport function closeMsg() {\r\n    return dispatch => {\r\n        dispatch({ type: 'CLOSE_MSG' })\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions'\r\n\r\n\r\n\r\nclass _ErrorMsg extends Component {\r\n    render() {\r\n        const { msg, type } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                {(type === 'input') && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <small className=\"error-msg\"><i className=\"fas fa-exclamation-circle\"></i>{msg}</small>\r\n                </div>}\r\n                {type === 'invalid-move' && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <p className=\"invalid-move\"><i className=\"fas fa-exclamation-triangle\"></i>{msg}</p>\r\n                </div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        msg: state.msgReducer.msg,\r\n        isShown: state.msgReducer.isShown,\r\n        type: state.msgReducer.type\r\n\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const ErrorMsg = connect(mapStateToProps, mapDispatchToProps)(_ErrorMsg)\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux';\r\nimport { addTrip } from '../../store/actions/tripActions'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { showMsg, closeMsg } from '../../store/actions/msgActions';\r\nimport { GooglePlaces } from '../MainCmps/GooglePlaces';\r\nimport {\r\n    geocodeByAddress,\r\n    // geocodeByPlaceId,\r\n    getLatLng,\r\n} from 'react-places-autocomplete';\r\n\r\n\r\nclass _AddTrip extends Component {\r\n\r\n\r\n    state = {\r\n        tripName: '',\r\n        currTrip: {\r\n            name: '',\r\n            location: { lat: null, lng: null },\r\n            startDate: '',\r\n            endDate: '',\r\n\r\n        },\r\n        destinations: '',\r\n    }\r\n\r\n    onSetDestinations = (ev) => {\r\n        ev.preventDefault()\r\n        const newtrip = this.state.currTrip\r\n        newtrip.name = newtrip.name.toLowerCase()\r\n        if (!newtrip.startDate && !newtrip.endDate) {\r\n            newtrip.startDate = Date.now()\r\n            newtrip.endDate = Date.now() + 1 * 1000 * 60 * 60 * 24\r\n        }\r\n        newtrip.startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) || this.state.currTrip.startDate || Date.now()\r\n        if (!this.state.currTrip.endDate) {\r\n            newtrip.endDate = (newtrip.startDate)?newtrip.startDate+ 1 * 1000 * 60 * 60 * 24:Date.now()+ 1 * 1000 * 60 * 60 * 24\r\n        }\r\n        newtrip.id = utils.makeId()\r\n        this.setState({\r\n            destinations: [...this.state.destinations, newtrip],\r\n            currTrip: {\r\n                name: '',\r\n                location: { lat: null, lng: null },\r\n                startDate: '',\r\n                endDate: '',\r\n            }\r\n        })\r\n    }\r\n\r\n    onSaveDestination = async (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.destinations.length) {\r\n            this.props.showMsg({ type: 'input', msg: 'At least one destination must be added' })\r\n            return\r\n        }\r\n        const trip = {\r\n            tripName: this.state.tripName,\r\n            imgUrl: utils.getRandomPic(),\r\n            activities: [],\r\n            destinations: this.state.destinations\r\n        }\r\n\r\n        if (this.props.loggedInUser) {\r\n            trip.members = [\r\n                {\r\n                    id: this.props.loggedInUser._id,\r\n                    username: this.props.loggedInUser.username,\r\n                    imgUrl: this.props.loggedInUser.imgUrl,\r\n                }\r\n            ]\r\n        }\r\n\r\n        else trip.members = []\r\n        const newTrip = await this.props.addTrip(trip)\r\n        this.props.history.push(`/trip/${newTrip._id}/tripRoute`)\r\n    }\r\n\r\n    // getRandomLatLng() {\r\n    //     const LL = utils.getRandomLatLng()\r\n    //     return LL\r\n    // }\r\n\r\n\r\n    handleAddress = (name) => {\r\n        this.setState({ currTrip: { ...this.state.currTrip, name } })\r\n    }\r\n\r\n    handleSelect = async (value) => {\r\n        const results = await geocodeByAddress(value);\r\n        const latlng = await getLatLng(results[0])\r\n        this.setState({ currTrip: { ...this.state.currTrip, location: latlng, name: value } })\r\n    }\r\n\r\n    handleInput = (ev, name) => {\r\n        let value;\r\n        let targetName;\r\n        if (ev.target && ev.target.name === 'tripName') {\r\n            this.setState({ ...this.state, tripName: ev.target.value })\r\n            return\r\n        }\r\n        if (ev.target) {\r\n            value = ev.target.value;\r\n            targetName = ev.target.name\r\n        }\r\n        else {\r\n\r\n            value = new Date(ev).getTime();\r\n            targetName = name\r\n        }\r\n\r\n        this.setState({ ...this.state, currTrip: { ...this.state.currTrip, [targetName]: value } })\r\n    }\r\n\r\n\r\n    formatDate = (date) => {\r\n        return `${new Date(date).getDate()}/${new Date(date).getMonth() + 1}/${new Date(date).getFullYear()}`\r\n    }\r\n    render() {\r\n        const startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) ||\r\n            Date.now()\r\n        \r\n        return (\r\n            <div className=\"flex add-destination-form-wraper\">\r\n                <form className=\"flex column add-destination-form\" onSubmit={this.onSetDestinations}>\r\n                    <h3>Create your trip</h3>\r\n                    <div className=\"flex column\">\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"tripName\"\r\n                            placeholder=\"Enter Trip Name\"\r\n                            id=\"add-dest-name\"\r\n                            value={this.state.tripName}\r\n                            required\r\n                            autoComplete=\"off\"\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    {/* <GooglePlaces\r\n                        handleSelect={this.handleSelect}\r\n                        handleAddress={this.handleAddress}\r\n                        address={this.state.currTrip.name}\r\n                        location={this.state.currTrip.location}\r\n                    /> */}\r\n                    <div className=\"flex column\">\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"name\"\r\n                            placeholder=\"Enter City Name\"\r\n                            id=\"add-dest-city\"\r\n                            value={this.state.currTrip.name}\r\n                            required\r\n                            autocomplete=\"off\"\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"startdate-dest-input\">Start</label>\r\n                            <DatePicker\r\n                                minDate={startDate}\r\n                                id=\"startdate-dest-input\"\r\n                                name=\"startDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                // selected={this.state.currTrip.startDate || Date.now()}\r\n                                selected={this.state.destinations.length ? startDate : Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'startDate') }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"enddate-dest-input\">End </label>\r\n                            <DatePicker\r\n                                minDate={this.state.currTrip.startDate || Date.now()}\r\n                                id=\"enddate-dest-input\"\r\n                                name=\"endDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                selected={this.state.currTrip.endDate || Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'endDate') }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ErrorMsg />\r\n                    <button className=\"styled-button\" onSubmit={this.onSetDestinations}>Add destination</button>\r\n                    {this.state.destinations.length ? <ol className=\"trip-list-add-form flex column\">\r\n                        {this.state.destinations.map(dest => <li key={utils.makeId()} className=\"flex justify-between\">\r\n                            <p>{dest.name}</p>\r\n                            <div className=\"flex\">\r\n                                <p>{this.formatDate(dest.startDate)}</p> -\r\n                                <p>{this.formatDate(dest.endDate)}</p>\r\n                            </div>\r\n                        </li>)}\r\n                    </ol> : ''}\r\n                    <button className=\"styled-button\" onClick={this.onSaveDestination}>Ready To Plan!</button>\r\n                </form>\r\n                <div className=\"add-dest-img-wraper\">\r\n                    <img src=\"https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1\" alt=\"\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const AddTrip = connect(mapStateToProps, mapDispatchToProps)(withRouter(_AddTrip));","import React, { Component } from 'react'\r\n\r\nimport PlacesAutocomplete from 'react-places-autocomplete';\r\n\r\n\r\nexport class GooglePlaces extends Component {\r\n\r\n    state = {\r\n        address: '',\r\n        coordinates: { lat: null, lng: null },\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <PlacesAutocomplete value={this.props.address} onChange={this.props.handleAddress} onSelect={this.props.handleSelect}>\r\n                    {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => {\r\n                        return <div> <input\r\n                            {...getInputProps({\r\n                                placeholder: 'Enter destination (city)...',\r\n                                className: 'styled-input',\r\n                            })}\r\n                        />\r\n                            <div className=\"places-list\">\r\n                                {loading ? <p>Loading . . .</p> : null}\r\n                                {suggestions.map((suggestion) => {\r\n\r\n                                    const style = {\r\n                                        backgroundColor: suggestion.active ? '#f097ee' : '#fff',\r\n                                        display: suggestion ? 'inherit' : 'none',\r\n                                        padding: suggestion ? '5px 10px' : 'none',\r\n                                        borderRadius: '3px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '0.8rem',\r\n                                        width:'100%',\r\n                                    }\r\n                                    return (<div {...getSuggestionItemProps(suggestion, { style })}>\r\n                                        {suggestion.description}\r\n                                    </div>)\r\n\r\n                                })}\r\n                            </div>\r\n\r\n                        </div>\r\n                    }}\r\n                </PlacesAutocomplete>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n","import httpService from './httpService';\r\nimport { utils } from './utils';\r\nimport { storageService } from './asyncStorageService'\r\n\r\n\r\nexport const reviewService = {\r\n    add,\r\n    query,\r\n    remove\r\n};\r\n\r\n\r\nasync function query(filterBy) {\r\n    if (filterBy) var queryStr = `?tripId=${filterBy.tripId}`;\r\n    // const reviews = await storageService.query(`review`);\r\n    // return reviews.filter(review => review.aboutTrip === filterBy.tripId)\r\n    return httpService.get(`review${queryStr}`);\r\n\r\n}\r\n\r\nfunction remove(reviewId) {\r\n    return httpService.delete(`review/${reviewId}`);\r\n}\r\nasync function add(review) {\r\n    review.createdAt = Date.now();\r\n    const addedReview = await httpService.post(`review`, review);\r\n    return addedReview\r\n}\r\n","import { reviewService } from '../../services/reviewService';\r\n\r\n\r\nexport const reviewActions = {\r\n    loadReviews,\r\n    addReview\r\n}\r\n\r\nfunction loadReviews(tripId) {\r\n    return async dispatch => {\r\n        try {\r\n            const reviews = await reviewService.query(tripId);\r\n            dispatch({ type: 'SET_REVIEWS', reviews });\r\n            return reviews\r\n\r\n        } catch (err) {\r\n            console.log('ReviewActions: err in loadReviews', err);\r\n        }\r\n    };\r\n}\r\n\r\nasync function addReview(review) {\r\n    await reviewService.add(review)\r\n    return async dispatch => {\r\n        try {\r\n            const addedReview = await reviewService.add(review);\r\n            dispatch({ type: 'REVIEW_ADD', review: addedReview });\r\n        }\r\n        catch (err) {\r\n            console.log('ReviewActions: err in addReview', err);\r\n        }\r\n    }\r\n}\r\n","import { withRouter } from 'react-router-dom'\r\nimport { utils } from '../../services/utils'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { reviewActions } from '../../store/actions/reviewActions'\r\nimport { addTrip } from '../../store/actions/tripActions'\r\nimport { showModal } from '../../store/actions/modalActions'\r\n\r\nimport React, { Component } from 'react'\r\n\r\nclass _TripPreview extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadReviews()\r\n      \r\n    }\r\n\r\n    async loadReviews(){\r\n        let reviews = await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        if (!reviews) reviews = []\r\n        this.setState({ reviews })\r\n\r\n    }\r\n\r\n\r\n    handleClick = async() => {\r\n        let isMember;\r\n        const trip={...this.props.trip}\r\n        if (this.props.loggedInUser) {\r\n            isMember = this.props.trip.members.find(member => member.id === this.props.loggedInUser._id)\r\n        }\r\n        if (isMember) {\r\n            this.props.history.push(`/trip/${this.props.trip._id}/triproute`)\r\n            return\r\n        }\r\n        else{\r\n            const name = this.props.loggedInUser? this.props.loggedInUser.username:'guest';\r\n            const originId = trip._id\r\n            delete trip._id\r\n            trip.members=[]\r\n            trip.originId= originId\r\n            trip.tripName= trip.tripName+' - '+name\r\n            const newTrip = await this.props.addTrip(trip)\r\n            this.props.history.push(`/trip/${newTrip._id}/triproute`)\r\n        }\r\n    }\r\n\r\n    getTripPrice = (activities) => {\r\n        let price = activities.reduce((acc, currValue) => {\r\n            acc = acc + currValue.price.amount\r\n            return acc\r\n        }, 0)\r\n        return price\r\n    }\r\n\r\n    getReviewsAvg = () => {\r\n        try {\r\n            const rating = this.state.reviews.reduce((acc, currRev) => {\r\n                if (this.state.reviews.length) acc = acc + (+currRev.rating)\r\n                else acc = 0\r\n                return acc\r\n            }, 0)\r\n            return rating ? (rating / this.state.reviews.length).toFixed(1) : 0\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { trip, addClass } = this.props\r\n        if (!trip) return <p>Loading Trip . . .</p>\r\n        const price = this.getTripPrice(trip.activities)\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n        const style = (this.props.style ? this.props.style : '')\r\n        const reviews = this.getReviewsAvg()\r\n\r\n        return (\r\n            <div style={{ pointerEvents: (style.pointerEvents ? style.pointerEvents : 'inherit') }} onClick={this.handleClick} className={'trip-preview flex column ' + (addClass ? addClass : '')} >\r\n                < div className=\"img-wraper\" >\r\n                    <img src={trip.imgUrl} alt=\"\" />\r\n                </div>\r\n                <div className=\"trip-preview-details\">\r\n                    <h3>{trip.tripName}</h3>\r\n                    <div className=\"flex details-container\">\r\n                        {trip.createdBy && < div className=\"flex align-center column img-container\">\r\n                            <img className=\"user-img\" src={trip.createdBy.imgUrl} alt=\"user-img\" />\r\n                            <p> {trip.createdBy.username}</p>\r\n                        </div>}\r\n                        <div className=\"flex justify-between column\">\r\n                            <p><i className=\"fas fa-hourglass-half\"></i>{days} days</p>\r\n                            <p>Est Price: <i className=\"fas fa-dollar-sign\"></i>{price}</p>\r\n                            <div className=\"flex rating-star\">\r\n                                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />\r\n                                <div className=\"flex justify-between\">\r\n                                    {reviews ? <span>{reviews} <span>({this.state.reviews.length} reviews) </span></span> : '(0)'}\r\n                                </div>\r\n\r\n                            </div>\r\n                            <p>{`Trollied by ${utils.getRandomName()} and ${utils.getRandomInt(50, 220)} others`}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadReviews: reviewActions.loadReviews,\r\n    addTrip: addTrip,\r\n    showModal\r\n}\r\n\r\nexport const TripPreview = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripPreview))\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\n\r\nimport 'swiper/swiper-bundle.css';\r\nimport 'swiper/components/effect-fade/effect-fade.scss';\r\nimport { TripPreview } from './TripPreview';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\n\r\nSwiperCore.use([EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y]);\r\n\r\n\r\n\r\n\r\nexport function TripSlider({ trips }) {\r\n\r\n\r\n\r\n    return (\r\n        <Swiper\r\n            effect=\"coverflow\"\r\n            slidesPerView={\"auto\"}\r\n            // effectCoverflow={true}\r\n            navigation\r\n            centeredSlides={ true}\r\n            // autoplay={true}\r\n            delay={2500}\r\n            coverflowEffect= {{\r\n                rotate: 30,\r\n                depth: 200\r\n              }}\r\n\r\n        pagination={{ clickable: true }}\r\n        >\r\n\r\n\r\n            {\r\n                trips.map((i, el) => {\r\n                    return <SwiperSlide key={utils.makeId()}>\r\n                        <TripPreview trip={i}  key={i._id} addClass={'slider'} img={utils.getRandomPic()}/> \r\n                    </SwiperSlide>;\r\n                })\r\n            }\r\n        </Swiper >\r\n    );\r\n};","import React from 'react'\r\n\r\nexport function UserFlow() {\r\n    return (\r\n        <div className=\"flex column align-center user-flow\" id=\"userFlow\" >\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Choose a trip</p>\r\n                    <p className=\"flow-content\">Choose from one of our amazing planned trips</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869772/undraw_traveling_t8y2_xnd0ne.svg\" alt=\"choose-travel\" />\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869761/undraw_travel_plans_li01_k6igg6.svg\" alt=\"\" />\r\n                <div className=\"flow-text\">\r\n                    <p className=\"flow-headline\">Personalize it</p>\r\n                    <p className=\"flow-content\">Personalize <span style={{fontWeight:'bold'}}>destinations </span>on Route and <span style={{fontWeight:'bold'}}>activities </span>on Assembly </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Add your friends</p>\r\n                    <p className=\"flow-content\">invite friends to plan together on the same document</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600870015/undraw_social_friends_nsbv_c9ovrw.svg\" alt=\"\" />\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AddTrip } from '../cmps/Home/AddTrip';\r\nimport { TripSlider } from '../cmps/Home/TripSlider';\r\nimport { UserFlow } from '../cmps/Home/UserFlow';\r\nimport { loadTrips } from '../store/actions/tripActions'\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\n\r\n\r\n\r\nclass _HomePage extends Component {\r\n    state = {\r\n        trips: ''\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadTrips()\r\n    }\r\n\r\n    // getTripsForDisplay = () => {\r\n    //     this.props.trips.filter(trip=> trip)\r\n    // }\r\n\r\n\r\n    render() {\r\n        if (!this.props.trips[0]) return <p> </p>\r\n        return (\r\n\r\n            <div className=\"home-page  main-container \">\r\n                <div className=\"home-page-hero full\" >\r\n                    <div className=\"description-section\">\r\n                        <h3>Explore planned trips of professional travelers\r\n                            </h3>\r\n                        <h3>and personalize them</h3>\r\n                        <Link smooth to=\"#userFlow\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block:  'center'  })}>\r\n                            <button className=\"styled-button\"> Get Started</button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"main-home-page full\">\r\n                    <div className=\"flow-container\">\r\n                        <UserFlow id=\"userFlow\" />\r\n                        <Link smooth to=\"#top-rated-trips\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'nearest'})}>\r\n                            <button className=\"styled-button\"> Let's Trolly!</button>\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"slideShow-area\" id=\"top-rated-trips\">\r\n                        <div id=\"top-rated-trips\"></div>\r\n                        <h2 className=\"\" >Top rated planned trips</h2>\r\n                        <section className=\"slideShow\" >\r\n                            <TripSlider trips={this.props.trips.slice(0, 4)} />\r\n                            <Link to=\"/trip\"><button className=\"styled-button to-trip-list\"> Show me more</button></Link>\r\n                        </section>\r\n                    </div>\r\n                    <AddTrip />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(_HomePage);","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport class TripFilter extends Component {\r\n\r\n\r\n    render() {\r\n        const {  mostOccDests } = this.props\r\n        return (        \r\n            <div className=\"trip-filter flex\" style={this.props.style}>\r\n                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601236322/search_ejr7qx.png\" alt=\"\"/>\r\n                <input autoComplete=\"off\" placeholder=\"Search destination\" className=\"styled-input\" name=\"name\" onChange={this.props.handleInput} list=\"dest-filter\" />\r\n                <datalist onChange={this.props.handleInput} id=\"dest-filter\">\r\n                    {mostOccDests.map(dest => {\r\n                       return <option key={utils.makeId()} value={`${dest}`}></option>\r\n                    })}\r\n                </datalist>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { TripPreview } from './TripPreview'\r\nimport { connect } from 'react-redux';\r\nimport { loadTrips } from '../../store/actions/tripActions';\r\n\r\n\r\nclass _TripList extends Component {\r\n\r\n    async componentDidMount() {\r\n        if (!this.props.trips.length) {\r\n            await this.props.loadTrips()\r\n        }\r\n    }\r\n    render() {\r\n        const { trips, addClass, showModal } = this.props\r\n        if (!trips.length) return <p>Loading Trips . . . </p>\r\n        return (\r\n            <div className={'trip-list trips-container ' + (addClass ? addClass : '')}>\r\n\r\n                {trips.length ? trips.map((trip, idx) =>\r\n                    <TripPreview key={trip._id} trip={trip} showModal={showModal} addClass={addClass} img={utils.getRandomPic()} />\r\n                ) :\r\n                    <TripPreview key={trips._id} trip={trips} addClass={addClass} img={utils.getRandomPic()} />\r\n                }\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const TripList = connect(mapStateToProps, mapDispatchToProps)(_TripList);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { TripFilter } from '../cmps/Home/TripFilter';\r\nimport { TripList } from '../cmps/Home/TripList';\r\nimport { showModal } from '../store/actions/modalActions';\r\nimport { loadTrips } from '../store/actions/tripActions';\r\n\r\n\r\nclass _TripStock extends Component {\r\n    state = {\r\n        filterBy: {\r\n            name: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadTrips(this.state.filterBy)\r\n    }\r\n\r\n    getMostOccDests = () => {\r\n        const { trips } = this.props\r\n        let destinations = [];\r\n        trips.forEach(trip => {\r\n            destinations = destinations.concat(trip.destinations)\r\n        })\r\n\r\n        const numOfOccMap = destinations.reduce((acc, dest) => {\r\n            acc[dest.name] = (acc[dest.name]) ? acc[dest.name] + 1 : 1\r\n            return acc\r\n        }, {})\r\n        \r\n        let numOfOccArr = Object.entries(numOfOccMap)\r\n        numOfOccArr.sort((dest1, dest2) => {\r\n            return dest2[1] - dest1[1]\r\n        })\r\n\r\n        return numOfOccArr.slice(0, 5).map(destOcc => {\r\n            let destName = destOcc[0][0].toLocaleUpperCase() + destOcc[0].substring(1)\r\n            return destName\r\n        })\r\n    }\r\n\r\n    // renderSrcOpt = () => {\r\n\r\n    // }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        const value = target.value;\r\n        this.setState({ filterBy: { ...this.state.filterBy, [field]: value } }, () => {\r\n            this.props.loadTrips(this.state.filterBy)\r\n        });\r\n    }\r\n\r\n    getTripsForDisplay = () => {\r\n        const tripList = this.props.trips.filter(trip => {\r\n            return trip.destinations[0].name.includes(this.state.name)\r\n        })\r\n        return tripList\r\n    }\r\n\r\n    render() {\r\n        const trips = this.props.trips\r\n        const mostOccDests = this.getMostOccDests()\r\n        this.getMostOccDests()\r\n        return (\r\n            <div className=\"trip-stock\">\r\n                <h2>All Trips plans</h2>\r\n                <TripFilter mostOccDests={mostOccDests} handleInput={this.handleInput} onsetFilter={this.onsetFilter} />\r\n                <TripList showModal={this.props.showModal} trips={trips} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips,\r\n    showModal\r\n}\r\n\r\nexport const TripStock = connect(mapStateToProps, mapDispatchToProps)(_TripStock);","import React from 'react'\r\n\r\n\r\nexport class Login extends React.Component {\r\n    state = {\r\n        msg: ''\r\n\r\n    }\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const { email, password } = ev.target\r\n        const userCreds = { email: email.value, password: password.value }\r\n        const user = await this.props.handleForm(userCreds)\r\n        if (!user) this.setState({ msg: 'wrong username or password' })\r\n        else{\r\n            this.props.closeModal()\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"login-form flex align-center justify-center column\" onSubmit={this.onSubmit} >\r\n                <input className=\"styled-input\" type=\"email\" placeholder=\"email\" name=\"email\"></input>\r\n                <input className=\"styled-input\" type=\"password\" placeholder=\"password\" name=\"password\"></input>\r\n                <button className=\"styled-button\">Login</button>\r\n                <p>not a user? please <span  onClick={()=>this.props.handleClick('signup')}>sign up</span></p>\r\n                {this.state.msg && <p>{this.state.msg}</p>}\r\n            </form>\r\n        )\r\n    }\r\n}","import React from 'react'\r\n\r\n\r\nexport class Signup extends React.Component {\r\n    state = {\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        imgUrl: 'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    }\r\n    handleChange=(ev)=>{\r\n        const {value,name}=ev.target;\r\n        this.setState({...this.state,[name]:value})\r\n    }\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()\r\n        this.props.handleForm(this.state,'signup',this.props.tripToRed)\r\n        this.props.closeModal()\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.onSubmit} className=\"flex column align-center\">\r\n                <input\r\n                    type='text'\r\n                    name='username'\r\n                    value={this.state.username}\r\n                    placeholder='Username'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='email'\r\n                    name='email'\r\n                    value={this.state.email}\r\n                    placeholder='email'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='password'\r\n                    name='password'\r\n                    value={this.state.password}\r\n                    placeholder='password'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <button className=\"styled-button\">Sign Up</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService();\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    }\r\n  }\r\n  return socketService;\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Login } from './Login';\r\nimport { Signup } from './Signup';\r\nimport { signup, login } from '../store/actions/userActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\nimport { loadTrip, addTrip } from '../store/actions/tripActions'\r\nimport { socketService } from '../services/socketService'\r\n\r\nclass _LoginSignupPage extends Component {\r\n    state = {\r\n        login: true\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    handleForm = async (props, action, tripIdToRed) => {\r\n        if (action === 'signup') {\r\n            if (tripIdToRed) {\r\n                const [tripToRed, user] = await Promise.all([this.props.loadTrip(tripIdToRed), this.props.signup(props)])\r\n                tripToRed.members.push({ username: user.username, imgUrl: user.imgUrl, id: user._id })\r\n                await this.props.addTrip(tripToRed)\r\n                socketService.emit('tripToUpdate', tripToRed._id);\r\n\r\n                this.props.closeModal()\r\n                return user\r\n            }\r\n            return await this.props.signup(props)\r\n        } else {\r\n            var user = await this.props.login(props)\r\n            if (!user) return\r\n            return user\r\n        }\r\n    }\r\n    closeModal=()=> {\r\n        this.props.closeModal()\r\n    }\r\n    render() {\r\n        const tripToRed = this.props.tripId\r\n        return (\r\n            this.state.login ? <Login handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                closeModal={this.closeModal} /> :\r\n                <Signup handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                    closeModal={this.closeModal} tripId={this.props.tripId} tripToRed={tripToRed} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    login,\r\n    closeModal,\r\n    showModal,\r\n    loadTrip,\r\n    addTrip\r\n\r\n}\r\n\r\nexport const LoginSignupPage = connect(mapStateToProps, mapDispatchToProps)(_LoginSignupPage);\r\n","function on(eventName, listener) {\r\n    const callListener = ({ detail }) => {\r\n        listener(detail)\r\n    }\r\n    window.addEventListener(eventName, callListener)\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener)\r\n    }\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\n\r\nexport const eventBus = { on, emit }","export const ItemTypes = {\r\n    ACTIVITIE: 'activitie',\r\n    DESTINATION:'destination'\r\n}","\r\nimport React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\n\r\nexport function ActivitiePreview({ act, onRemoveAct, onEdit, destinations, onOpenDetails }) {\r\n\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.ACTIVITIE,\r\n            id: act.id\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n\r\n    \r\n\r\n    \r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const isDrag = (isDragging) ? 'is-drag' : ''\r\n    const isLenOne = (act.duration === 1) ? 'len-one' : ''\r\n    const dest= destinations.findIndex(dest => act.destination === dest.name)\r\n\r\n    return (\r\n        <div ref={drag} className={`activity-prev-assembly activity-assembly ${isLenOne} ${isDayHeadClass} ${isFirstCol} ${isDrag}`} style={{ gridRow: `${act.row + 1 || 'auto'}/span ${act.duration}` }} key={utils.makeId()}>\r\n            <div className={'dest-color dest-'+dest}></div>\r\n            <div className=\"activity-name-container\">\r\n            <h5>{act.name}</h5>\r\n            </div>\r\n            <div className=\"activity-assembly-details column\">\r\n              \r\n                <div className=\"activity-assembly-controls flex\">\r\n                    <button onClick={() => { onOpenDetails(act) }}><i className=\"fas fa-info\"></i></button>\r\n                    <button onClick={() => { onRemoveAct(act.id) }} className=\"delete-activity \"><i className=\"fas fa-trash\"></i></button>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n","\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems'\r\nexport function OpenDaySlot({ act, getRowIdx, onDragMove }) {\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.ACTIVITIE,\r\n        drop: (item, monitor) => {\r\n            onDragMove(act, item.id)\r\n        },\r\n\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n\r\n    const rowIdx = null\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const _isOver = (isOver) ? 'is-over' : ''\r\n \r\n   \r\n    return (\r\n        <React.Fragment>\r\n            {act.literalDay && <div  className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n            {!act.literalDay && <div ref={drop} className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { ActivitiePreview } from './ActivitiePreview'\r\nimport { OpenDaySlot } from './OpenDaySlot'\r\n\r\nexport function DayActivities({ day, getRowIdx, onRemoveAct, onEdit, destinations, onDragMove, onOpenDetails }) {\r\n\r\n    function reCalcPos(day) {\r\n        let newDay = []\r\n        let i = 0;\r\n        while (i < 35) {\r\n            if (!day[i].id) {\r\n                newDay.push(day[i])\r\n                i++\r\n\r\n            } else {\r\n                newDay.push(day[i])\r\n                i += day[i].duration\r\n            }\r\n        }\r\n        return newDay\r\n    }\r\n    let newDay = reCalcPos(day)\r\n\r\n   \r\n    return (\r\n        <div className=\"day-list-assembly\">\r\n            {newDay.map((act) => {\r\n                if (act.id) {\r\n                    return <ActivitiePreview\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onOpenDetails={onOpenDetails} />\r\n\r\n                } else {\r\n                    return <OpenDaySlot\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onDragMove={onDragMove} />\r\n                }\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function DayTimeLine() {\r\n\r\n\r\n    return (\r\n        <div className=\"time-line-assembly\">\r\n\r\n            {(function () {\r\n                let times = []\r\n                for (let i = 0; i < 35; i++) {\r\n                    let time = <div key={utils.makeId()} className=\"time-assembly\">\r\n                        {(i % 2 === 0) && <span>{`${7 + i / 2}:00`}</span>}\r\n                    </div>\r\n                    times.push(time)\r\n                }\r\n                return times\r\n\r\n            })()}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n// var gFreeDays = 14\r\nexport function DestNamePrev({ dest, updateFreeDays, freeDays, destinations }) {\r\n    \r\n    const idx = destinations.findIndex(_dest => _dest.name === dest.name)\r\n    const display = (dest.duration) ? '' : 'none'\r\n    return (\r\n\r\n        <div className={`dest-name-preview dest-head-${idx} `} style={{ gridColumn: `span ${dest.duration}`, display: display }}>\r\n            {dest.name}\r\n        </div>\r\n    )\r\n}\r\n","import { utils } from '../../services/utils'\r\nimport { DestNamePrev } from './DestNamePrev'\r\nimport React from 'react'\r\n\r\n\r\nexport function DestinationsHeader({ destinations, allDestinations, daysCount }) {\r\n    destinations.sort((dest1, dest2) => dest1.time.startDate - dest2.time.startDate)\r\n    return (\r\n        <div className=\"destinations-header\" style={{gridTemplateColumns: `repeat(${daysCount*2}, minmax(25px, 1fr))`}}>\r\n            {destinations.map((dest, idx) => {\r\n                return <DestNamePrev destinations={allDestinations} idx={idx}  key={utils.makeId()} dest={dest} />\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nimport { eventBus } from '../../services/eventBusService';\r\nimport { utils } from '../../services/utils';\r\nimport { DayActivities } from './DayActivities'\r\nimport { DayTimeLine } from './DayTimeLine';\r\nimport { DestinationsHeader } from './DestinationsHeader';\r\n\r\nexport class TripAssembly extends Component {\r\n\r\n    state = {\r\n        activities: null,\r\n        weekMat: null,\r\n        page: 0,\r\n        startDate: null,\r\n        endDate: null,\r\n        tripLength: '',\r\n        actsToDisplay: null,\r\n        minDestinations: null,\r\n        daysCount: 7\r\n    }\r\n    removeBus;\r\n    async componentDidMount() {\r\n\r\n        const _removeBus = eventBus.on('markDay', (day) => {\r\n            this.setChosenDay(day)\r\n            return\r\n        })\r\n        this.removeBus = _removeBus\r\n\r\n        this.initiateAssembly()\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.trip === this.props.trip) return\r\n        this.initiateAssembly(this.state.daysCount, this.state.page)\r\n    }\r\n\r\n    setChosenDay = async (day) => {\r\n        const linearDaysDates = this.getLinearTripDays().map(timeStamp => {\r\n            const date = new Date(timeStamp)\r\n            return date.toLocaleDateString()\r\n        })\r\n        const currDayDate = day.day.toLocaleDateString()\r\n        const page = linearDaysDates.findIndex(date => {\r\n            return date === currDayDate\r\n        })\r\n        this.props.openSideBar()\r\n        this.initiateAssembly(1, page)\r\n\r\n    }\r\n\r\n    initiateAssembly = async (daysCount = 7, page = 0) => {\r\n        const { destinations, activities } = this.props.trip\r\n        const windowWidth = window.window.innerWidth\r\n        if (daysCount === 7) {\r\n            if (windowWidth <= 900) {\r\n                daysCount = 5\r\n            }\r\n            if (windowWidth <= 650) {\r\n                daysCount = 3\r\n            }\r\n            if (windowWidth <= 530) {\r\n                daysCount = 2\r\n            }\r\n        }\r\n\r\n        let startDate, endDate\r\n        [startDate, endDate] = [destinations[0].startDate, destinations[destinations.length - 1].endDate]\r\n        const tripLength = utils.calculateDays(startDate, endDate)\r\n        await this.setState({ ...this.state, tripLength, startDate, endDate, activities, daysCount, page }, () => this.loadWeekMat())\r\n\r\n        await this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n\r\n    omponentWillUnmount() {\r\n        this.removeBus()\r\n    }\r\n\r\n\r\n    loadWeekMat = () => {\r\n        const { activities } = this.props.trip;\r\n        const actsDaysMap = this.mapActsToDays(activities);\r\n        const WeeklyActsToDisplay = actsDaysMap.slice(this.state.page * this.state.daysCount, this.state.page * this.state.daysCount + this.state.daysCount)\r\n        const destTimeStamp = WeeklyActsToDisplay[0][1][0].at\r\n        const startDate = utils.getDateDay(destTimeStamp)\r\n        let weekMat = utils.createMat(this.state.daysCount, 35);\r\n        let col = 0\r\n\r\n        let prevDate = WeeklyActsToDisplay[0][0]\r\n        for (let i = 0; i < WeeklyActsToDisplay.length; i++) {\r\n            let currDate, currDayActs\r\n            [currDate, currDayActs] = [WeeklyActsToDisplay[i][0], WeeklyActsToDisplay[i][1]];\r\n            if (prevDate > currDate) {\r\n                currDate += this.getDaysInMonth(destTimeStamp)\r\n            }\r\n            prevDate = currDate\r\n            col = currDate - startDate\r\n            currDayActs.forEach(act => {\r\n                if (!act.freeDay) {\r\n                    let row = this.getRowIdx(act.at)\r\n                    act = { ...act, col, row }\r\n                    weekMat[row][col] = act\r\n                }\r\n            })\r\n        }\r\n        weekMat = this.showDaysName(destTimeStamp, weekMat)\r\n        this.setState({ weekMat, actsToDisplay: WeeklyActsToDisplay })\r\n    }\r\n\r\n    onRemoveAct = (actId) => {\r\n        this.props.showModal('removeActivity', { removeAct: this.removeAct, actId, })\r\n    }\r\n\r\n    removeAct = async (actId) => {\r\n        let { activities } = this.state;\r\n        activities = await activities.filter((_act => _act.id !== actId))\r\n        await this.props.updateTripAct(activities)\r\n        await this.setState({ activities })\r\n        await this.props.closeModal()\r\n    }\r\n\r\n    showDaysName(startTime, mat) {\r\n        for (let j = 0; j < this.state.daysCount; j++) {\r\n            const _time = startTime + j * 24 * 60 ** 2 * 1000\r\n            const time = new Date(_time)\r\n            mat[0][j] = { duration: 1, literalDay: utils.getWeekDay(_time), date: time.toLocaleDateString(), time }\r\n        }\r\n        return mat\r\n    }\r\n\r\n\r\n\r\n\r\n    isOccTimeSlot = (activity) => {\r\n        const { activities } = this.state\r\n        const currStartTime = activity.at\r\n\r\n        const currEndTime = currStartTime + activity.duration * 30 * 60 * 1000\r\n        for (let i = 0; i < activities.length; i++) {\r\n            const act = activities[i]\r\n            const checkedStartTime = act.at\r\n            const checkedEndTime = act.at + act.duration * 30 * 60 * 1000\r\n            if (activity.id && activity.id === act.id) continue\r\n\r\n            if (\r\n                (((currStartTime > checkedStartTime) && (currStartTime < checkedEndTime)) ||\r\n                    ((currEndTime > checkedStartTime) && (currEndTime < checkedEndTime))) ||\r\n\r\n                ((checkedStartTime > currStartTime) && (checkedStartTime < currEndTime)) ||\r\n                ((checkedEndTime > currStartTime) && (checkedEndTime < currEndTime))\r\n\r\n            ) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    mapActsToDays = () => {\r\n        const { activities } = this.props.trip;\r\n        activities.sort((act1, act2) => act1.at - act2.at)\r\n        let map = activities.reduce((acc, activity) => {\r\n\r\n            let day = utils.getDateDay(activity.at)\r\n            if (!acc[day]) acc[day] = []\r\n            acc[day].push(activity)\r\n            return acc\r\n\r\n        }, {})\r\n        map = this.sortDateMap(map)\r\n        return map\r\n    }\r\n\r\n\r\n\r\n    getCol = (mat, col) => {\r\n        const MatColumn = (_mat, n) => _mat.map(x => x[n]);\r\n        return MatColumn(mat, col);\r\n    }\r\n\r\n    sortDateMap(map) {\r\n        let arrSorted = [];\r\n        for (let day in map) {\r\n\r\n            arrSorted.push([+day, map[day]]);\r\n        }\r\n        const linearDays = this.getLinearTripDays();\r\n        for (let i = 0; i < linearDays.length; i++) {\r\n            let currDay = utils.getDateDay(linearDays[i])\r\n            let isInclude = arrSorted.find((day) => day[0] === currDay)\r\n            if (!isInclude) {\r\n                arrSorted.push([currDay, [{ at: linearDays[i], freeDay: true }]])\r\n            }\r\n\r\n        }\r\n        arrSorted.sort(function (day1, day2) {\r\n            return day1[1][0].at - day2[1][0].at;\r\n        });\r\n\r\n        return arrSorted\r\n\r\n    }\r\n    onEdit = (act) => {\r\n        this.props.showModal('editActivity', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n    }\r\n\r\n    onOpenDetails = (act) => {\r\n        this.props.showModal('activityDetails', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n\r\n    }\r\n\r\n    onDragMove = ({ pos }, id) => {\r\n\r\n        const activity = this.state.activities.find(act => act.id === id)\r\n        const dest = this.props.trip.destinations.find(_dest => _dest.name === activity.destination)\r\n\r\n        let newTime = this.getTimeFromIdx(pos)\r\n    \r\n        let destStart = utils.setToHourMinuets(dest.startDate, 6, 0)\r\n        let desEnd = utils.setToHourMinuets(dest.endDate, 23, 59)\r\n        if (newTime < destStart || newTime > desEnd) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'Cannot move activities to another destination!' })\r\n            return\r\n        }\r\n        if (!newTime) return\r\n        const actCopy = { ...activity, at: newTime }\r\n\r\n        if (this.isOccTimeSlot(actCopy)) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n\r\n        activity.at = newTime\r\n        this.saveAct(activity)\r\n    }\r\n\r\n    getTimeFromIdx = ({ i, j }) => {\r\n        const { page } = this.state\r\n        const currWeekDates = this.getLinearTripDays()\r\n        if (j + page * this.state.daysCount >= currWeekDates.length) {\r\n            return false\r\n        }\r\n\r\n        const currDayDate = new Date(currWeekDates[j + page * this.state.daysCount])\r\n        if (i % 2 !== 0) {\r\n            currDayDate.setHours(7 + (i - 1) / 2, 0)\r\n        } else {\r\n            currDayDate.setHours(6 + i / 2, 30)\r\n\r\n        }\r\n\r\n        return currDayDate.getTime()\r\n    }\r\n\r\n    saveAct = (act) => {\r\n        let { activities } = this.state;\r\n        if (act.id) {\r\n            activities = activities.map(_act => {\r\n                return (_act.id === act.id) ? act : _act\r\n            })\r\n        } else {\r\n            act.id = utils.makeId()\r\n            activities.push(act)\r\n        }\r\n        this.props.closeModal()\r\n\r\n        this.props.updateTripAct(activities)\r\n        this.setState({ activities })\r\n        this.loadWeekMat()\r\n    }\r\n\r\n\r\n    getDaysInMonth(timeStamp) {\r\n        let time = new Date(timeStamp)\r\n        let year, month;\r\n        [month, year] = [time.getMonth(), time.getFullYear()]\r\n\r\n        return new Date(year, month + 1, 0).getDate();\r\n    }\r\n\r\n\r\n    getWeekDests = () => {\r\n        const { page, daysCount } = this.state\r\n        var { destinations } = this.props.trip\r\n        const linearDays = this.getLinearTripDays()\r\n        let minDay = linearDays[page * (daysCount)]\r\n        let idxMaxDay = page * daysCount\r\n        if (idxMaxDay + daysCount - 1 >= linearDays.length) {\r\n            idxMaxDay = linearDays.length - 1\r\n        } else {\r\n            idxMaxDay += daysCount - 1\r\n        }\r\n        let maxDay = linearDays[idxMaxDay]\r\n        minDay = new Date(minDay)\r\n        maxDay = new Date(maxDay)\r\n        minDay = utils.setToHourMinuets(minDay, 7, 0)\r\n        maxDay = utils.setToHourMinuets(maxDay, 23, 59)\r\n        return destinations.filter(dest => {\r\n            let destStart = new Date(dest.startDate)\r\n            let destEnd = new Date(dest.endDate)\r\n            destStart = utils.setToHourMinuets(destStart, 10, 0)\r\n            destEnd = utils.setToHourMinuets(destEnd, 10, 0)\r\n\r\n            return ((destStart >= minDay && destStart <= maxDay) ||\r\n                (destEnd >= minDay && destEnd <= maxDay)\r\n            )\r\n\r\n        })\r\n    }\r\n\r\n    getMinDestinations = () => {\r\n\r\n        const destinations = this.getWeekDests()\r\n        const minDestinations = []\r\n        const destsHeadLength = this.mapDestsToHeaderLength()\r\n        const destsNames = Object.keys(destsHeadLength)\r\n        const destsLength = Object.values(destsHeadLength)\r\n        for (let i = 0; i < destsNames.length; i++) {\r\n\r\n            const time = destinations.find(dest => {\r\n                return dest.name === destsNames[i]\r\n            })\r\n\r\n            minDestinations.push({ name: destsNames[i], duration: destsLength[i], time })\r\n        }\r\n        return minDestinations\r\n\r\n\r\n    }\r\n\r\n\r\n    mapDestsToHeaderLength = () => {\r\n        const { trip } = this.props\r\n        const { page } = this.state\r\n        const { destinations } = this.props.trip\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination, idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate), idx }\r\n        })\r\n        const currWeekDests = utils.calculateDates(tripStart, tripEnd, destinationsTimes).slice(page * this.state.daysCount, page * this.state.daysCount + this.state.daysCount)\r\n        let currDestName;\r\n        let currDest;\r\n        return currWeekDests.reduce((acc, { td }, idx) => {\r\n\r\n            if (td.full || td.full === 0) {\r\n                currDest = destinations[td.full]\r\n                currDestName = currDest.name\r\n                acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n            } else {\r\n                if (((td.start || td.start === 0) && (!td.end && td.end !== 0))) {\r\n                    currDest = destinations[td.start]\r\n                    currDestName = currDest.name\r\n                    acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n                } else {\r\n\r\n                    if (td.start || td.start === 0) {\r\n                        currDest = destinations[td.start]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n                    if (td.end || td.end === 0) {\r\n                        currDest = destinations[td.end]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n            return acc\r\n        }, {})\r\n\r\n    }\r\n\r\n    getLinearTripDays = () => {\r\n        const linearDays = []\r\n        let { startDate, tripLength } = this.state\r\n        for (let i = 0; i < tripLength; i++) {\r\n            linearDays.push(startDate + i * 24 * 60 * 60 * 1000)\r\n        }\r\n        return linearDays\r\n    }\r\n\r\n    getDestsWithActs = (destinations, allActs) => {\r\n        destinations = destinations.filter((dest) => {\r\n            return this.isActInDests(dest, allActs)\r\n        })\r\n        return destinations\r\n\r\n    }\r\n\r\n    isActInDests(dest, allActs) {\r\n        for (let acts of allActs) {\r\n            let currActs = acts[1]\r\n            for (let act of currActs) {\r\n                if (act.destination === dest.name) return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    getRowIdx = (timeStamp) => {\r\n        const time = new Date(timeStamp)\r\n        const hour = time.getHours()\r\n        const minuets = time.getMinutes()\r\n        let slot;\r\n        if (minuets === 0) {\r\n            slot = (hour - 6) * 2 - 1\r\n\r\n        } else {\r\n            slot = (hour - 6) * 2\r\n        }\r\n        return slot\r\n    }\r\n\r\n\r\n    onTogglePage = async (direction) => {\r\n        const { tripLength, page } = this.state\r\n        let pageCount = Math.ceil(tripLength / this.state.daysCount)\r\n        let newPage;\r\n        if (direction === 'next') {\r\n            newPage = (page + 1) % pageCount\r\n\r\n        } else {\r\n            newPage = (page - 1 < 0) ? pageCount - 1 : page - 1\r\n        }\r\n        await this.setState({ page: newPage })\r\n        await this.loadWeekMat()\r\n        this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n    getDayNumOfAct = (day) => {\r\n        return day.reduce((acc, act) => {\r\n            acc += (act.id) ? 1 : 0\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    getTwoDig = (num) => {\r\n        let numStr = num + ''\r\n        return (numStr.length === 1) ? '0' + numStr : numStr\r\n    }\r\n\r\n    renderDayActivities(mat) {\r\n        const actPreviews = []\r\n\r\n        for (let i = 0; i < mat[0].length; i++) {\r\n\r\n            var col = this.getCol(mat, i)\r\n            actPreviews.push(<DayActivities onDragMove={this.onDragMove} getTimeFromIdx={this.getTimeFromIdx} destinations={this.props.trip.destinations} onEdit={this.onEdit} onOpenDetails={this.onOpenDetails} onRemoveAct={this.onRemoveAct} getRowIdx={this.getRowIdx} key={utils.makeId()} day={col} />\r\n            )\r\n        }\r\n\r\n        return actPreviews\r\n    }\r\n\r\n    setFullAssembly = () => {\r\n        this.initiateAssembly(7, 0)\r\n        this.props.setDestsMarkers()\r\n    }\r\n\r\n    render() {\r\n        const { weekMat, minDestinations, daysCount } = this.state\r\n        const { destinations } = this.props.trip\r\n        if (!weekMat || !minDestinations) return <div>Loading...</div>\r\n        const dayActs = this.renderDayActivities(weekMat)\r\n        this.mapDestsToHeaderLength()\r\n        return (\r\n            <div className=\"assembly-container\">\r\n\r\n\r\n                {/* <section className=\"paging-assembly\"> */}\r\n                {/* <span>{this.state.page + 1}</span> */}\r\n                {/* </section> */}\r\n                {daysCount !== 1 && <div className=\"destinations-header-wraper\">\r\n                    <div className=\"toggle-page prev\" onClick={() => this.onTogglePage('prev')}><i className=\"fas fa-chevron-circle-left\"></i></div>\r\n\r\n                    <div className=\"toggle-page next\" onClick={() => this.onTogglePage('next')}><i className=\"fas fa-chevron-circle-right\"></i></div>\r\n                </div>}\r\n                {daysCount === 1 && <section className=\"full-assembly \">\r\n                    <button className=\"styled-button\" onClick={this.setFullAssembly}>Back</button>\r\n                </section>}\r\n                <DestinationsHeader daysCount={daysCount} allDestinations={destinations} destinations={minDestinations} />\r\n                <div className={'trip-assembly-main full'} style={{ gridTemplateColumns: `repeat(${daysCount}, minmax(70px, 1fr))` }}>\r\n                    <DayTimeLine />\r\n                    {dayActs}\r\n                </div >\r\n                <button className='editActivity styled-button' onClick={() => this.props.showModal('editActivity', { saveAct: this.saveAct, isOccTimeSlot: this.isOccTimeSlot, act: null, destinations: this.props.trip.destinations })}>add activity</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react'\r\nexport function MembersPreview({ member }) {\r\n    const url=member.imgUrl||'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    return (\r\n        <div className=\"member-preview\" >\r\n            <img className=\"image-preview\" src={url} alt=\"img Preview\"></img>\r\n            <div className=\"is-active-circle\"></div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { GooglePlaces } from '../MainCmps/GooglePlaces'\r\nimport {\r\n    geocodeByAddress,\r\n    // geocodeByPlaceId,\r\n    getLatLng,\r\n} from 'react-places-autocomplete';\r\n\r\nexport class AddDestination extends React.Component {\r\n    state = {\r\n        addDestOpen: false,\r\n        destination: {\r\n            name: '',\r\n            days: '',\r\n            location: null\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.setState({\r\n            destination: {\r\n                name: '',\r\n                days: '',\r\n                location: null\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    handleAddress = (name) => {\r\n        this.setState({ destination: { ...this.state.destination, name } })\r\n    }\r\n\r\n    handleSelect = async (value) => {\r\n        try {\r\n            const results = await geocodeByAddress(value);\r\n            const latlng = await getLatLng(results[0])\r\n            this.setState({ destination: { ...this.state.destination, location: latlng, name: value }})\r\n\r\n        }\r\n        catch (err) {\r\n            console.log(err, 'err');\r\n        }\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const { name, value } = ev.target;\r\n        this.setState({ destination: { ...this.state.destination, [name]: value } })\r\n\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        this.toggleAddDestination()\r\n        this.props.addDestination(this.state.destination)\r\n        this.setState({\r\n            destination:{\r\n                name: '',\r\n                days: '',\r\n                location: null\r\n            }\r\n        })\r\n\r\n    }\r\n    toggleAddDestination = () => {\r\n        this.setState({ addDestOpen: !this.state.addDestOpen })\r\n    }\r\n\r\n    render() {\r\n        const addDestOpen = this.state.addDestOpen ? 'form-open' : ''\r\n        return (\r\n            <React.Fragment>\r\n                <i className=\"fas fa-plus add-destination-button\" onClick={this.toggleAddDestination}></i>\r\n                <div className={`add-destination column ${addDestOpen}`}>\r\n                    <div className=\"styled-header\">Add destination</div>\r\n                    <form onSubmit={this.onSubmit} className={`add-destination-form  `}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Enter destination\"\r\n                            // className=\"styled-input\"\r\n                            name=\"name\"\r\n                            value={this.state.destination.name}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        {/* <GooglePlaces\r\n                            handleSelect={this.handleSelect}\r\n                            handleAddress={this.handleAddress}\r\n                            address={this.state.destination.name}\r\n                            location={this.state.destination.location}\r\n                        /> */}\r\n\r\n\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Number of days\"\r\n                            // className=\"styled-input\"\r\n                            name=\"days\"\r\n                            value={this.state.destination.days}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        <button className=\"styled-button\">Add!</button>\r\n                    </form>\r\n                    <div className=\"add-destination-footer\"></div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n\r\n\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function WeekPreview({ dates,showDay }) {\r\n    function hotDog(date) {\r\n        if (!date.td) return\r\n        const keys = Object.keys(date.td)\r\n        return keys.map(key => {\r\n            const className = `dest-${date.td[key]} ${key}`\r\n            return <div key={utils.makeId()} className={className}></div>\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <tr key={utils.makeId()}>\r\n            {dates.map((date, idx) => <td onClick={()=>showDay(date)} className={`${!date.td?'faded':''}`} key={idx}>{new Date(date.day).getDate()}{hotDog(date)}</td>)}\r\n        </tr>\r\n    )\r\n\r\n}\r\n","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { WeekPreview } from './WeekPreview'\r\n\r\n\r\nexport function RouteCalendar({ trip,showDay }) {\r\n\r\n    function generateCalendar() {\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination,idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate) , idx }\r\n        })\r\n        const calendarData = calculateDates(tripStart, tripEnd, destinationsTimes)\r\n        const fullCalendarData = getDaysAround(calendarData, tripStart, tripEnd)\r\n        return fullCalendarData\r\n    }\r\n    function getDaysAround(data, start, end) {\r\n        let fullCalendarData = getFirstSunday(start, data)\r\n        fullCalendarData = getLastSaturday(end, data)\r\n        return fullCalendarData\r\n\r\n    }\r\n\r\n    function getFirstSunday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() > 0) {\r\n            currDay = new Date(currDay.getTime() - (1000 * 60 * 60 * 24))\r\n            calendarData.unshift({ day: currDay })\r\n        }\r\n        return calendarData\r\n\r\n    }\r\n    function getLastSaturday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() < 6) {\r\n            currDay = new Date(currDay.getTime() + (1000 * 60 * 60 * 24))\r\n            calendarData.push({ day:currDay })\r\n        }\r\n        return calendarData\r\n    }\r\n\r\n\r\n\r\n    function renderTable(data) {\r\n        const weekCmps = []\r\n        if (data.length % 7 !== 0) return null\r\n        let weeksCount = data.length / 7;\r\n        while (weeksCount) {\r\n            weekCmps.push(<WeekPreview showDay={showDay} key={utils.makeId()} dates={data.splice(0, 7)}  />)\r\n            weeksCount--\r\n        }\r\n        return weekCmps\r\n\r\n    }\r\n\r\n    function calculateDates(start, end, destinations) {\r\n        let nextDay = new Date(start)\r\n        let dates = [{ day: nextDay, td:{'start':0} }]\r\n        while (nextDay.getDate() !== new Date(end).getDate()) {\r\n            nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n            dates.push({ day: nextDay, td:''})\r\n            destinations.forEach(dest=>{\r\n                if(dest.start.getDate()===nextDay.getDate()&& dest.start.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'start':dest.idx}\r\n                }else if(dest.start<nextDay && nextDay.setHours(12)<dest.end.setHours(11) ){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'full':dest.idx}\r\n                }else if(dest.end.getDate()===nextDay.getDate()&& dest.end.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'end':dest.idx}\r\n                }\r\n            })\r\n        }\r\n        return dates\r\n    }\r\n\r\n\r\n    const calendarData = generateCalendar()\r\n    return (\r\n        <table className=\"route-calendar\">\r\n            <thead className=\"table-header\">\r\n                <tr >\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                    <th>\r\n                        M\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        W\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        F\r\n                    </th>\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                </tr>\r\n\r\n            </thead>\r\n            <tbody>\r\n                {renderTable(calendarData) || 'w'}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\n\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function RouteTimeLinePreview({ destination, idx, isLast, updateDestinations}) {\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.DESTINATION,\r\n            id: idx\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            if(item.id===idx)return\r\n            updateDestinations(item.id, idx)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    if(isDragging===true){\r\n    }\r\n\r\n    const _isOver = (isOver)?'is-dragging':''\r\n    const letFire = isDragging? 'on':'';\r\n    return (\r\n        <React.Fragment>\r\n            { <div className={`fire-ring ${letFire}`}></div>}\r\n            <div ref={drop} className=\"time-line-area flex align-center\">\r\n                <div className=\"route-time-line-context flex align-center \">\r\n                    <div ref={drag} className={`index-ball dest-${idx} flex align-center justify-center  ${_isOver} `} ><p>{idx + 1}</p></div>\r\n                    <div className=\"time-line-text\">\r\n                        <p>{destination.name}</p>\r\n                        <p>{utils.calculateDays(destination.startDate, destination.endDate) - 1} Nights</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            { !isLast && <div className=\"line\"></div>}\r\n        </React.Fragment>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { RouteTimeLinePreview } from './RouteTimeLinePreview'\r\n\r\nexport function RouteTimeLine({ trip, updateDestinations }) {\r\n    // export class RouteTimeLine extends React.Component {\r\n  \r\n    return (\r\n        <div  className=\"route-time-line\">\r\n            {trip.destinations.map((destination, idx) => {\r\n                return (\r\n                    <RouteTimeLinePreview\r\n                        key={utils.makeId()}\r\n                        destination={destination}\r\n                        idx={idx}\r\n                        isLast={(idx + 1) === trip.destinations.length ? true : false}\r\n                        updateDestinations={updateDestinations}\r\n                    />)\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","// import { GoogleApiWrapper } from 'google-maps-react';\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { MembersPreview } from '../TripApp/MemberPreview';\r\nimport { AddDestination } from './AddDestiantion';\r\nimport { RouteCalendar } from './RouteCalendar'\r\nimport { RouteTimeLine } from './RouteTimeLine'\r\n\r\nexport function TripRoute({ trip, updateDestinations, showModal, addDestination, toggleChat, showDay }) {\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            updateDestinations(item.id, -1)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    return (\r\n        <div className=\"trip-route flex column\">\r\n            <div className=\"members-preview flex justify-between align-center\">\r\n                <div className=\"flex\">\r\n                    {trip.members.map((member, idx) => <MembersPreview key={idx} member={member} />)}\r\n                </div>\r\n                <button className=\"ustyled-button add-user-btn\" onClick={() => showModal('add-member', trip._id)}><i className=\"fas fa-user-plus \"></i></button>\r\n            </div>\r\n            <RouteCalendar trip={trip} showDay={showDay} />\r\n            <div className=\"all-destinations-area\">\r\n                <div className=\"trip-bar-icons trip-bar-destinations-icons flex justify-between\">\r\n                    <AddDestination addDestination={addDestination} />\r\n                    <i ref={drop} className={`fas fa-trash `}></i>\r\n\r\n                </div>\r\n                <RouteTimeLine trip={trip} updateDestinations={updateDestinations} />\r\n            </div>\r\n            <div className=\"trip-bar-icons flex justify-between flex1 align-end\">\r\n                <img onClick={() => showModal('trip-reviews')} className=\"reviews-btn\" src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601286406/6719970451595452853_wdwgqc.svg\" alt=\"\" />\r\n                <i className=\"fas fa-comments\" onClick={toggleChat} ></i>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { socketService } from '../../services/socketService';\r\n\r\nclass _Chat extends Component {\r\n    state = {\r\n        msg: {\r\n            from: this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler',\r\n            txt: ''\r\n        },\r\n        msgs: [],\r\n        isTyping: ''\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        socketService.on('chat addMsg', this.addMsg);\r\n        socketService.on('isTyping', this.userTyping);\r\n        socketService.on('notTyping', this.userTyping);\r\n\r\n        // socketService.emit('chat history');\r\n        // socketService.on('load history', this.loadHistory)\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('chat addMsg', this.addMsg);\r\n        socketService.off('isTyping', this.userTyping);\r\n        socketService.off('notTyping', this.userTyping);\r\n\r\n\r\n        // socketService.off('chat history', this.loadHistory)\r\n        socketService.terminate();\r\n    }\r\n    loadHistory = history => {\r\n        this.setState({ msgs: history || [] });\r\n    }\r\n    addMsg = newMsg => {\r\n        this.setState(prevState => ({ msgs: [...prevState.msgs, newMsg] }));\r\n    }\r\n    sendMsg = ev => {\r\n        ev.preventDefault();\r\n        socketService.emit('chat newMsg', this.state.msg);\r\n        socketService.emit(\"stopTyping\", \"\");\r\n        // this.addMsg(this.state.msg)//remove\r\n        const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n        this.setState({ msg: { from: user, txt: '' } });\r\n    }\r\n    userTyping = isTyping => {\r\n        this.setState({ isTyping });\r\n    }\r\n\r\n    msgHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        if ((value.trim()).length > 0) {\r\n            const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n            socketService.emit('user typing', user);\r\n\r\n        }\r\n        else {\r\n            socketService.emit(\"stopTyping\", \"\");\r\n        }\r\n        this.setState(prevState => {\r\n            return {\r\n                msg: {\r\n                    ...prevState.msg,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        \r\n        \r\n        return (\r\n            <div className={`chat-container flex column  ${this.props.chatOpen ? 'open' : ''}`}>\r\n                <div className=\"chat-header styled-header\">\r\n                    {this.props.trip.destinations[0].name} Chat\r\n                </div>\r\n\r\n                <ul className=\"chat-history\">\r\n                    {this.state.msgs.map((msg, idx) => (\r\n                        <li key={idx}>\r\n                            <div className=\"message-data\">{this.props.loggedInUser ? ((this.props.loggedInUser.username === msg.from) ? 'Me' : msg.from) : ((msg.from === 'Traveler') ? 'Traveler' : msg.from)}</div>\r\n\r\n\r\n\r\n                            <div className=\"message\">{msg.txt}</div>\r\n\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                {this.props.loggedInUser ? \r\n                ((this.state.isTyping && this.state.isTyping !== this.props.loggedInUser.username) ? <p>{this.state.isTyping} is Typing</p> : '') \r\n                : ((this.state.isTyping && !this.state.msg.txt.trim().length) ? <p>{this.state.isTyping} is Typing</p> : '')}\r\n\r\n\r\n                <form className=\"chat-send flex align-center\" onSubmit={this.sendMsg}>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={this.state.msg.txt}\r\n                        onChange={this.msgHandleChange}\r\n                        name=\"txt\"\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"New message\"\r\n\r\n                    />\r\n                    <button><i className=\"far fa-paper-plane\"></i></button>\r\n                </form>\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat);","import React from 'react'\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\n// const API_KEY = 'AIzaSyBXIyfwpDtmz9fLAQI-MUqWuhQtc-GQYoo';\r\nconst API_KEY = ''\r\n\r\nclass _MapContainer extends React.Component {\r\n    state = {\r\n        bounds: '',\r\n        markers: [],\r\n        selectedPlace: '',\r\n        activeMarker: {},\r\n        showingInfoWindow: false\r\n    }\r\n\r\n    initiateMarkerABounds() {\r\n        const markers = [];\r\n        const bounds = new this.props.google.maps.LatLngBounds();\r\n        for (var i = 0; i < this.props.markers.length; i++) {\r\n            if (!this.props.markers[i].location || !this.props.markers[i].location.lng) continue\r\n            bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\r\n            markers.push(this.props.markers[i])\r\n        }\r\n        return { markers, bounds }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { markers, bounds } = this.initiateMarkerABounds()\r\n        const BASE_IMG_URL = 'https://res.cloudinary.com/roidinary/image/upload/c_scale,w_40/v1601311538/'\r\n        const imgs = [\r\n            `${BASE_IMG_URL}location1_xebwou.png`,\r\n            `${BASE_IMG_URL}location2_lxtqsq.png`,\r\n            `${BASE_IMG_URL}location3_zly9ql.png`,\r\n            `${BASE_IMG_URL}location4_venppr.png`,\r\n            `${BASE_IMG_URL}location5_xervod.png`,\r\n            `${BASE_IMG_URL}location6_fql1xk.png`\r\n        ]\r\n        this.setState({ bounds, markers, imgs })\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.markers !== prevProps.markers) {\r\n            const { markers, bounds } = this.initiateMarkerABounds()\r\n            if (markers.length > 1 && this.state.map) {\r\n                this.state.map.fitBounds(bounds)\r\n            }\r\n            else {\r\n                if (this.state.map && markers[0] && markers[0].location && markers[0].location.lat) {\r\n                    this.state.map.panTo(this.props.markers[0].location)\r\n                    this.state.map.setZoom(10)\r\n\r\n                }\r\n            }\r\n            this.setState({ markers })\r\n        }\r\n    }\r\n    onMarkerClick = (props, marker, e) =>\r\n        this.setState({\r\n            selectedPlace: props,\r\n            activeMarker: marker,\r\n            showingInfoWindow: true\r\n        });\r\n    onMapClicked = (props) => {\r\n        if (this.state.showingInfoWindow) {\r\n            this.setState({\r\n                showingInfoWindow: false,\r\n                activeMarker: null\r\n            })\r\n        }\r\n    };\r\n\r\n    getMarkers() {\r\n        return this.state.markers.map((marker, idx) => {\r\n            return (<Marker key={utils.makeId()}\r\n                onClick={this.onMarkerClick}\r\n                title={marker.name}\r\n                name={marker.at || ''}\r\n                position={marker.location}\r\n                icon={this.state.imgs[idx]}\r\n            >\r\n\r\n            </Marker>)\r\n        })\r\n    }\r\n\r\n    containerStyle = {\r\n        width: '100%',\r\n        height: '300px',\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Map\r\n                google={this.props.google}\r\n                containerStyle={this.containerStyle}\r\n                zoom={10}\r\n                onClick={this.onMapClicked}\r\n                onReady={(mapProps, map) => {\r\n                    if (this.state.markers.length > 1) map.fitBounds(this.state.bounds)\r\n\r\n                    else {\r\n                        if (this.state.markers[0]) map.panTo(this.state.markers[0].location)\r\n                    }\r\n                    this.setState({ map })\r\n                }}\r\n                styles={\r\n\r\n                    [{\r\n                        featureType: \"all\",\r\n                        elementType: \"labels.text.fill\",\r\n                        stylers: [\r\n                            {\r\n                                saturation: 36\r\n                            },\r\n                            {\r\n                                color: \"#333333\"\r\n                            },\r\n                            {\r\n                                lightness: 40\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"all\",\r\n                        elementType: \"labels.text.stroke\",\r\n                        stylers: [\r\n                            {\r\n                                visibility: \"on\"\r\n                            },\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 16\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"all\",\r\n                        elementType: \"labels.icon\",\r\n                        stylers: [\r\n                            {\r\n                                visibility: \"off\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"administrative\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#fefefe\"\r\n                            },\r\n                            {\r\n                                lightness: 20\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"administrative\",\r\n                        elementType: \"geometry.stroke\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#fefefe\"\r\n                            },\r\n                            {\r\n                                lightness: 17\r\n                            },\r\n                            {\r\n                                weight: 1.2\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"landscape\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#f5f5f5\"\r\n                            },\r\n                            {\r\n                                lightness: 20\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"landscape\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#d5d5d5\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"landscape.man_made\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                saturation: \"-37\"\r\n                            },\r\n                            {\r\n                                lightness: \"75\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#f5f5f5\"\r\n                            },\r\n                            {\r\n                                lightness: 21\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi.business\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                saturation: \"-2\"\r\n                            },\r\n                            {\r\n                                lightness: \"53\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi.park\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#dedede\"\r\n                            },\r\n                            {\r\n                                lightness: 21\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi.park\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                lightness: \"69\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.highway\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                lightness: \"25\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.highway\",\r\n                        elementType: \"geometry.stroke\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 29\r\n                            },\r\n                            {\r\n                                weight: 0.2\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.highway\",\r\n                        elementType: \"labels.text.fill\",\r\n                        stylers: [\r\n                            {\r\n                                lightness: \"38\"\r\n                            },\r\n                            {\r\n                                color: \"#000000\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.arterial\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 18\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.local\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 16\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"transit\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#f2f2f2\"\r\n                            },\r\n                            {\r\n                                lightness: 19\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"water\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#e9e9e9\"\r\n                            },\r\n                            {\r\n                                lightness: 17\r\n                            }\r\n                        ]\r\n                    }\r\n                    ]\r\n                }\r\n            >\r\n\r\n\r\n                {this.state.markers[0] && this.getMarkers()}\r\n                <InfoWindow\r\n                    marker={this.state.activeMarker}\r\n                    visible={this.state.showingInfoWindow}>\r\n                    <div>\r\n                        <h1>{this.state.selectedPlace.title}</h1>\r\n                        {this.state.selectedPlace.name && <p>{\r\n                            new Date(this.state.selectedPlace.name).getHours() + ':' + new Date(this.state.selectedPlace.name).getMinutes()\r\n                        }</p>}\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport const MapContainer = GoogleApiWrapper({\r\n    apiKey: (API_KEY)\r\n})(_MapContainer)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { loadTrip, addTrip, setTrip, removeTrip } from '../store/actions/tripActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\nimport { TripAssembly } from '../cmps/TripAssembly/TripAssembly'\r\nimport { TripRoute } from '../cmps/TripRoute/TripRoute'\r\nimport { utils } from '../services/utils'\r\nimport { Chat } from '../cmps/TripApp/Chat'\r\nimport { socketService } from '../services/socketService'\r\nimport { MapContainer } from '../cmps/MainCmps/Map';\r\nimport { closeMsg, showMsg } from '../store/actions/msgActions'\r\nimport { ErrorMsg } from '../cmps/MainCmps/ErrorMsg'\r\nimport { eventBus } from '../services/eventBusService'\r\n// import locationCevtorRed from 'https://res.cloudinary.com/roidinary/image/upload/v1600377967/locationVectorRed_vzufx4.png'\r\n\r\nclass _TripApp extends Component {\r\n\r\n    state = {\r\n        chatOpen: false,\r\n        settingsOpen: false,\r\n        isSocketSetup: false,\r\n        markers: [],\r\n        sideBar: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { setTrip, loadTrip, addTrip } = this.props\r\n        socketService.setup();\r\n\r\n\r\n        const { id } = this.props.match.params\r\n        socketService.emit('enter trip', id);\r\n        try {\r\n            await loadTrip(id, true)\r\n            if (this.props.trip.originId) {\r\n                this.props.showModal('alert-user', this.props.trip)\r\n            }\r\n            if (this.props.match.params.openSignup === 'true') {\r\n                this.props.showModal('signup', id)\r\n            }\r\n            const markers = this.getMarkersOfDests()\r\n            this.setState({ isSocketSetup: true, markers })\r\n\r\n        }\r\n        catch (err) {\r\n        }\r\n        // socketService.emit('tripToUpdate', newTrip);\r\n\r\n        socketService.on('tripUpdated', setTrip);\r\n\r\n    }\r\n\r\n    getMarkersOfDests = () => {\r\n        return this.props.trip.destinations.map(dest => {\r\n            return { location: dest.location, name: dest.name }\r\n        })\r\n    }\r\n    setDestsMarkers = () => {\r\n        const markers = this.getMarkersOfDests()\r\n        this.setState({ markers })\r\n    }\r\n    async componentWillUnmount() {\r\n        socketService.off('tripUpdated', this.props.setTrip);\r\n        if (!this.props.loggedInUser && this.props.trip.createdBy.id === 'guest') {\r\n            await this.props.removeTrip(this.props.trip._id)\r\n        }\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState) {\r\n\r\n        if (prevProps.trip === this.props.trip) return\r\n        const markers = this.getMarkersOfDests()\r\n        this.setState({ markers })\r\n\r\n\r\n        // socketService.emit('tripUpdated', this.props.trip);\r\n    }\r\n\r\n    updateDestinations = async (destIdxToMove, moveToIdx) => {\r\n        let destinations = [...this.props.trip.destinations]\r\n        let activities = [...this.props.trip.activities]\r\n        const moveDifference = utils.calculateDays(destinations[destIdxToMove].startDate, destinations[destIdxToMove].endDate)\r\n        const destTomove = destinations.splice(destIdxToMove, 1)[0]\r\n        const constant = (1000 * 60 * 60 * 24 * (moveDifference - 1))\r\n        if (moveToIdx === -1) {\r\n            activities = activities.reduce((acc, act, idx) => {\r\n                if (act.destination === destTomove.name) return acc\r\n                acc.push(act)\r\n                return acc\r\n            }, [])\r\n            destinations.forEach((dest, idx) => {\r\n                if (idx >= destIdxToMove) {\r\n                    dest.startDate = dest.startDate - constant\r\n                    dest.endDate = dest.endDate - constant\r\n                    activities.forEach(act => {\r\n                        if (act.destination === dest.name) act.at -= constant\r\n                    })\r\n                }\r\n            })\r\n\r\n        } else {\r\n            if (destIdxToMove > moveToIdx) {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[moveToIdx].startDate, this.props.trip.destinations[destIdxToMove - 1].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate - constant2;\r\n                destTomove.endDate = destTomove.endDate - constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at -= constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx > moveToIdx && idx <= destIdxToMove) {\r\n                        dest.startDate = dest.startDate + constant\r\n                        dest.endDate = dest.endDate + constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at += constant\r\n                        })\r\n                    }\r\n                })\r\n            } else {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[destIdxToMove + 1].startDate, this.props.trip.destinations[moveToIdx].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate + constant2;\r\n                destTomove.endDate = destTomove.endDate + constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at += constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx < moveToIdx && idx >= destIdxToMove) {\r\n                        dest.startDate = dest.startDate - constant\r\n                        dest.endDate = dest.endDate - constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at -= constant\r\n                        })\r\n                    }\r\n                })\r\n\r\n            }\r\n        }\r\n        const _newTrip = { ...this.props.trip, activities, destinations }\r\n        const newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n    }\r\n\r\n    updateTripAct = async (activities) => {\r\n        let _newTrip = { ...this.props.trip, activities }\r\n        let newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n    }\r\n\r\n    toggleChat = () => {\r\n        this.setState({ chatOpen: !this.state.chatOpen })\r\n    }\r\n    toggleSettings = () => {\r\n        this.setState({ settingsOpen: !this.state.settingsOpen })\r\n    }\r\n\r\n    addDestination = async (newDest) => {\r\n        const { destinations } = { ...this.props.trip }\r\n        newDest.startDate = destinations[destinations.length - 1].endDate\r\n        newDest.endDate = newDest.startDate + 1000 * 60 * 60 * 24 * (+newDest.days - 1)\r\n        newDest.id = utils.makeId()\r\n        destinations.push(newDest)\r\n        const _newTrip = { ...this.props.trip, destinations }\r\n        const newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n    }\r\n\r\n    showDay = (day) => {\r\n        if (!day.td) return\r\n        const actToRender = this.props.trip.activities.reduce((acc, act) => {\r\n            if (new Date(act.at).getDate() === day.day.getDate()) {\r\n                acc.push({ name: act.name, location: act.location, at: act.at })\r\n            }\r\n            return acc\r\n        }, [])\r\n        eventBus.emit('markDay', day)\r\n        this.setState({ markers: actToRender })\r\n    }\r\n    openSideBar = () => {\r\n        this.setState({ sideBar: !this.state.sideBar })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        const sideBarClass = this.state.sideBar ? 'open-side-bar' : ''\r\n        if (!trip || !trip.destinations) return <div>Loading....</div>\r\n        return (\r\n            <div className=\"trip-app  \">\r\n                <ErrorMsg />\r\n                <div className=\"trip-app-area flex \">\r\n                    <button onClick={this.openSideBar} className={`side-bar-bars ${sideBarClass}`}><i className=\"fas fa-bars \" ></i></button>\r\n                    <div className={`trip-side-bar flex column ${sideBarClass} `}>\r\n                        <TripRoute\r\n                            trip={trip}\r\n                            addDestination={this.addDestination}\r\n                            updateDestinations={this.updateDestinations}\r\n                            showModal={this.props.showModal}\r\n                            toggleChat={this.toggleChat}\r\n                            showDay={this.showDay}\r\n                            openSideBar={this.openSideBar}\r\n                            setDestsMarkers={this.setDestsMarkers}\r\n                        />\r\n                    </div>\r\n                    <div className=\"trip-app-main full\">\r\n                        {this.state.markers[0] && <MapContainer markers={this.state.markers} />}\r\n                        <TripAssembly\r\n                            showMsg={this.props.showMsg}\r\n                            closeMsg={this.props.closeMsg}\r\n                            trip={trip} updateTripAct={this.updateTripAct}\r\n                            showModal={this.props.showModal}\r\n                            closeModal={this.props.closeModal}\r\n                            setTrip={this.props.setTrip}\r\n                            openSideBar={this.openSideBar}\r\n                            setDestsMarkers = {this.setDestsMarkers}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {this.state.isSocketSetup && <Chat chatOpen={this.state.chatOpen} trip={trip} />}\r\n            </div >\r\n        )\r\n        \r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trip: state.tripReducer.currTrip,\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadTrip,\r\n    removeTrip,\r\n    showModal,\r\n    closeModal,\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg,\r\n    setTrip\r\n\r\n\r\n\r\n}\r\nexport const TripApp = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripApp))\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass _UserTrips extends Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const UserTrips = connect(mapStateToProps, mapDispatchToProps)(_UserTrips);","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class EditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: ['relax'],\r\n            duration: 1,\r\n            notes: '',\r\n            price: '',\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        if (act) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n            minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({\r\n\r\n                activitie: {\r\n                    ...act, name: act.name, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                    destination: act.destination\r\n                }, minTime, maxTime\r\n            })\r\n        } else {\r\n            minTime = utils.getIsoTime(destinations[0].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destinations.length - 1].endDate)\r\n            this.setState({ activitie: { ...this.state.activitie, destination: destinations[0].name }, minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { destinations } = this.props.props\r\n        const { destination } = this.state.activitie\r\n        if (prevState.activitie.destination === destination) return\r\n        if (destination && !this.state.activitie.id) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === destination)\r\n            const minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            const maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({ minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        const field = target.name;\r\n        let value = target.value;\r\n        if (target.type === 'checkbox') this.setState({ [field]: target.checked });\r\n        else if (target.type === 'number') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        if (!activitie.at) return\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n    render() {\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        const { destinations } = this.props.props\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let minTemp = minT.setHours(7, 0)\r\n        let currDate;\r\n        if (activitie.at) {\r\n            currDate = new Date(activitie.at)\r\n        } else {\r\n            currDate = new Date(minTemp)\r\n        }\r\n\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n        return (\r\n\r\n            <form className=\"edit-activity-form flex column\" onSubmit={this.onSaveAct}>\r\n                <input className=\"styled-input\" placeholder=\"Enter activity Name\" name=\"name\" id=\"name\" value={this.state.activitie.name} onChange={this.handleChange}></input>\r\n                {!activitie.id && <div><i className=\"fas fa-map-marker\"></i><select value={this.state.activitie.destination} placeholder=\"destination\" name=\"destination\" id=\"dest-input\" onChange={this.handleChange}>\r\n                    {destinations.map((dest, idx) => {\r\n                        return <option key={utils.makeId()} value={dest.name}>{dest.name}</option>\r\n\r\n                    })}\r\n                </select></div>}\r\n                <div className=\"flex\">\r\n                <i className=\"far fa-clock\"></i>\r\n                    <div className=\"flex column\">\r\n                        <label htmlFor=\"start-time-activity-input\">Time</label>\r\n                        <DatePicker\r\n                            minDate={minT}\r\n                            maxDate={maxT}\r\n                            selected={this.getValidTime().getTime() || minTemp}\r\n                            value={this.getValidTime().getTime() || minTemp}\r\n                            minTime={min}\r\n                            maxTime={max}\r\n                            autoComplete=\"off\"\r\n                            className=\"styled-input\"\r\n                            showTimeSelect\r\n                            required\r\n                            showFullMonthYearPicker\r\n                            dateFormat=\"Pp\"\r\n                            onChange={time => this.handleTime(time)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex column justify-evenly align-baseline\">\r\n                        <label htmlFor=\"duration\">Duration (Half hours)</label>\r\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                    </div>\r\n                </div>\r\n                <textarea placeholder=\"Add some notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                {/* <label htmlFor=\"price\" id=\"price\">Price</label> */}\r\n                <div className=\"flex\">\r\n                    <i className=\"fas fa-dollar-sign\"></i>\r\n                    <input className=\"styled-input\" type=\"number\" placeholder=\"price\" name=\"price\" id=\"price\" onChange={this.handleChange} placeholder=\"price\" value={this.state.activitie.price}></input>\r\n                </div>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class PrevEditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: '',\r\n            duration: '',\r\n            notes: '',\r\n            price: '',\r\n            currency: '',\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: '',\r\n        isInputOpen: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n        minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n        maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n        this.setState({\r\n\r\n            activitie: {\r\n                ...act, name: act.name, currency: act.price.currency, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                destination: act.destination, duration: act.duration\r\n            }, minTime, maxTime\r\n        })\r\n    }\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const field = ev.target.name;\r\n        let value = ev.target.value;\r\n\r\n        if (field === 'at') {\r\n            // let time = value.substring(value.length - 5)\r\n            // let hours = +time.split(':')[0]\r\n            // let minuets = +time.split(':')[1]\r\n            // if (minuets <= 15) {\r\n            //     minuets = 0\r\n            // } else if (minuets >= 45) {\r\n            //     minuets = 0\r\n            //     hours += 1\r\n            // } else {\r\n            //     minuets = 30\r\n            // }\r\n            // if (hours >= 0 && hours < 7) {\r\n            //     this.props.showMsg({ type: 'input', msg: 'Please choose events between 7:00 AM and 11:30 PM' })\r\n            //     return\r\n            // }\r\n            // minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\r\n            // hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\r\n            // value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\r\n            this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n        }\r\n\r\n        else if (field === 'duration') this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    handleContentEditable = (ev) => {\r\n        const field = ev.currentTarget.dataset.name\r\n        let value = ev.target.innerText\r\n        if (field === 'price') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (!activitie.duration) activitie.duration = 1\r\n        else if (+activitie.duration) activitie.duration = +activitie.duration\r\n        if (isOccTimeSlot(activitie)) {\r\n            this.props.showMsg({ type: 'input', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        const startTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime())\r\n        const endTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime() + (this.state.activitie.duration / 2) * 60 * 60 * 1000)\r\n\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let minTemp = minT.setHours(7, 0)\r\n        let currDate;\r\n        if (activitie.at) {\r\n            currDate = new Date(activitie.at)\r\n        } else {\r\n            currDate = new Date(minTemp)\r\n        }\r\n\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n\r\n        return (\r\n            <form className=\"preview-activity-form flex column\" >\r\n                <h2 contentEditable={true} suppressContentEditableWarning={true} data-placeholder=\"Enter activity name\" \r\n                spellCheck=\"false\" style={{direction:'ltr'}} data-name=\"name\" onBlur={this.handleContentEditable}>{this.state.activitie.name}</h2>\r\n                <div className=\"flex\">\r\n                    <small><i className=\"fas fa-map-marker\"></i> {this.state.activitie.destination}</small>\r\n                    <small><i className=\"far fa-clock\"></i>{`${startTime}-${endTime}`} <i onClick={() => { this.setState({ isInputOpen: !this.state.isInputOpen }) }} className=\"fas fa-edit\"></i></small>\r\n                </div>\r\n\r\n                <ErrorMsg />\r\n\r\n                <div className={`flex time-container ${this.state.isInputOpen ? 'openHeight' : ''} `}>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Beginning time:</h4>\r\n                        <DatePicker\r\n                    minDate={minT}\r\n                    maxDate={maxT}\r\n                    selected={this.getValidTime().getTime()}\r\n                    value={this.getValidTime().getTime() || minTemp}\r\n                    minTime={min}\r\n                    maxTime={max}\r\n                    autoComplete=\"off\"\r\n                    className=\"styled-input prev-date-picker date\"\r\n                    showTimeSelect\r\n                    required\r\n                    dateFormat=\"Pp\"\r\n                    onChange={time => this.handleTime(time)}\r\n                />\r\n                    </div>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Duration (Half hours)</h4>\r\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                    </div>\r\n\r\n                </div>\r\n                {<img src={this.props.props.act.imgUrl} alt=\"https://teddytennis.com/cyprus/wp-content/uploads/sites/76/2017/11/placeholder.png\"/>}\r\n\r\n             \r\n                <textarea placeholder=\"Add some notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                <div className=\"flex\">\r\n                    <h4>Price:</h4>\r\n                    <p>{this.state.activitie.currency}</p>\r\n                    <p contentEditable={true} suppressContentEditableWarning={true} data-name=\"price\" onBlur={this.handleContentEditable}>{this.state.activitie.price}</p>\r\n                </div>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form >\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg'\r\n\r\nexport class AddReview extends React.Component {\r\n\r\n    state = {\r\n        reviewToAdd: {\r\n            content: '',\r\n            name: '',\r\n            rating: null,\r\n        }\r\n    }\r\n    elInput = React.createRef()\r\n\r\n    componentDidMount() {\r\n        this.elInput.current.focus()\r\n    }\r\n\r\n\r\n    onInputChange = (value, inputType) => {\r\n        this.setState({\r\n            reviewToAdd: { ...this.state.reviewToAdd, [inputType]: value }\r\n        })\r\n    }\r\n\r\n    onAddReview = (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.reviewToAdd.rating) {\r\n            this.props.showMsg({ msg: 'You must rate this trip first', type: 'input' })\r\n            return\r\n        }\r\n        this.props.addReview(this.state.reviewToAdd)\r\n        this.setState({\r\n            reviewToAdd: {\r\n                content: '',\r\n                name: '',\r\n                rating: null,\r\n            }\r\n        })\r\n    }\r\n    setRating = (val) => {\r\n        this.setState({ reviewToAdd: { ...this.state.reviewToAdd, rating: val } })\r\n    }\r\n\r\n    render() {\r\n        const classToAdd = this.props.isReviewOpen ? 'open' : '';\r\n        const currRate = this.state.reviewToAdd.rating\r\n        return (\r\n            <div className={`review-modal flex ${classToAdd}`}>\r\n                <form className=\"flex column \" onSubmit={this.onAddReview}>\r\n                    <ErrorMsg />\r\n\r\n                    <div className=\"flex\">\r\n                        <input className=\"styled-input\" placeholder=\"Enter your name\" type=\"text\" name=\"name\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} />\r\n                        {/* <select name=\"rating\" defaultValue=\"-1\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} >\r\n                            <option disabled value=\"-1\">Rate the trip</option>\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option>\r\n                            <option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </select> */}\r\n\r\n                        <div className=\"stars-rate flex\">\r\n                            <i className={`fas fa-star star-5 ${currRate === 5 ? 'active' : ''}`} onClick={() => { this.setRating(5) }}></i>\r\n                            <i className={`fas fa-star star-4 ${currRate >= 4 ? 'active' : ''}`} onClick={() => { this.setRating(4) }}></i>\r\n                            <i className={`fas fa-star star-3 ${currRate >= 3 ? 'active' : ''}`} onClick={() => { this.setRating(3) }}></i>\r\n                            <i className={`fas fa-star star-2 ${currRate >= 2 ? 'active' : ''}`} onClick={() => { this.setRating(2) }}></i>\r\n                            <i className={`fas fa-star star-1 ${currRate >= 1 ? 'active' : ''}`} onClick={() => { this.setRating(1) }}></i>\r\n                        </div>\r\n                    </div>\r\n                    <ErrorMsg />\r\n                    <textarea id=\"content\" required name=\"content\" placeholder=\"Enter your review here\" ref={this.elInput} onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }}>\r\n                    </textarea>\r\n                    <button className=\"styled-button\">Save</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\n\r\nexport class LongTxt extends React.Component {\r\n\r\n    state = {\r\n        text: this.props.text,\r\n        isLongTxtShown: false\r\n    }\r\n\r\n    onReadMore = () => {\r\n        this.setState({ isLongTxtShown: !this.state.isLongTxtShown })\r\n    }\r\n\r\n    render() {\r\n        const  text  = this.state.text\r\n        var isLongTxtShown = this.state.isLongTxtShown\r\n        return (\r\n            <p>\r\n                {(text.length < 100 || (isLongTxtShown && text.length > 100)) ? text : text.substring(0, 100) + ' . . .'}\r\n                {text.length > 100 && <button className=\" styled-button expend-description\" onClick={this.onReadMore}>{this.state.isLongTxtShown ? 'Less' : 'More'}</button>}\r\n            </p >\r\n        )\r\n    }\r\n}\r\n","\r\nimport React from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { LongTxt } from '../MainCmps/LongText';\r\n\r\n\r\nexport function ReviewPreview({ review }) {\r\n\r\n\r\n    function getStars() {\r\n        let stars = [];\r\n        for (let i = 0; i < review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />)\r\n        }\r\n        for (let i = 0; i < 5 - review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600690459/450716_preview1_pvoieq.png\" alt=\"\" />)\r\n        }\r\n        return stars\r\n    }\r\n\r\n\r\n    const time = `${new Date(review.createdAt).getDate()}/${new Date(review.createdAt).getMonth() + 1}/${new Date(review.createdAt).getFullYear()}`\r\n    return (\r\n        < React.Fragment >\r\n            <div className=\"review-details flex justify-between \">\r\n                <h3>{review.name || 'Traveler'}</h3>\r\n                <div className=\"flex column\">\r\n                    <div>{getStars()} </div>\r\n                    <p>{time}</p>\r\n                </div>\r\n            </div>\r\n            {review.content && <LongTxt text={review.content} />}\r\n\r\n        </React.Fragment >\r\n    )\r\n}\r\n","import { ReviewPreview } from './ReviewPreview.jsx'\r\nimport React from 'react'\r\n\r\n\r\nexport function ReviewList({ reviews }) {\r\n    return (\r\n        <ul className=\"review-list flex column container\">\r\n            {(!reviews || !reviews.length)? 'No reviews have been written for this trip yet' : reviews.map((review,idx) =>\r\n                <li className=\"review flex column\" key={idx}>\r\n                    <ReviewPreview key={review._id} review={review} />\r\n                </li>\r\n\r\n            )}\r\n        </ul>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nimport {  withRouter } from 'react-router-dom'\r\nimport { ReviewList } from './ReviewList'\r\nimport { AddReview } from './AddReview'\r\nimport { reviewActions } from '../../store/actions/reviewActions'\r\n\r\nclass _TripReviews extends Component {\r\n\r\n    state = {\r\n        isReviewOpen: false,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const id =this.props.trip.originId?this.props.trip.originId:this.props.trip._id\r\n        try {\r\n            await this.props.loadReviews({ tripId: id })\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    onToggleExpend = () => {\r\n        this.setState({ isReviewOpen: !this.state.isReviewOpen})\r\n    }\r\n\r\n\r\n    addReview = async (review) => {\r\n        const id =this.props.trip.originId?this.props.trip.originId:this.props.trip._id\r\n        review.trip = id\r\n        await reviewActions.addReview(review)\r\n        await this.props.loadReviews({ tripId: id})\r\n        this.onToggleExpend()\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        if (!trip) return <p> Loading . . .</p>\r\n\r\n        return (\r\n            <div className=\"reviews-page\">\r\n                <ReviewList reviews={this.props.reviews} />\r\n                <div className=\"flex reviews-btns-container\">\r\n                    <button className=\"review-btns styled-button\" onClick={this.onToggleExpend}>{this.state.isReviewOpen ? 'Close' : ' Add Review'}</button>\r\n                </div>\r\n                    <AddReview addReview={this.addReview} msg={this.props.msg} showMsg={this.props.showMsg} closeMsg={this.props.closeMsg}  isReviewOpen={this.state.isReviewOpen}/>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        trip: state.tripReducer.currTrip\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addReview: reviewActions.addReview,\r\n    loadReviews: reviewActions.loadReviews\r\n}\r\n\r\nexport const TripReviews = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripReviews))\r\n","import React, { Component } from 'react'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\nexport class AddMember extends Component {\r\n\r\n    state = {\r\n        value: '',\r\n        copied: false,\r\n        // emailToSend: {\r\n        //     subject: '',\r\n        //     body: '',\r\n        //     email: ''\r\n\r\n        // }\r\n    }\r\n\r\n    componentDidMount() {\r\n    this.setState({value:`https://trolly-app.herokuapp.com/#/trip/${this.props.props}/triproute/true`})\r\n    }\r\n    \r\n\r\n    handleInput = (value, name) => {\r\n        this.setState({ emailToSend: { ...this.state.emailToSend, [name]: value } })\r\n    }\r\n\r\n    onAddMember(ev, mail) {\r\n        ev.preventDefault()\r\n        this.props.closeModal()\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n            return (\r\n            <div className=\"flex column share-trip\">\r\n                <h3>Share this link with your trip partners and start planning together!</h3>\r\n                <img src=\"https://thumbs.dreamstime.com/b/group-young-people-friends-celebrating-successful-hiking-expedition-group-young-people-friends-celebrating-successful-hiking-123552345.jpg\" alt=\"\"/>\r\n                <input disabled className=\"styled-input\" value={this.state.value}\r\n                    onChange={({ target: { value } }) => this.setState({ value, copied: false })} />\r\n\r\n                {/* <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <span>Copy to clipboard with span</span>\r\n                </CopyToClipboard> */}\r\n\r\n                <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <button className=\"styled-button\">Copy and share</button>\r\n                </CopyToClipboard>\r\n\r\n                {this.state.copied ? <span style={{ color: 'orange' }}>Copied!</span> : null}\r\n            </div>\r\n\r\n            // <div className={'add-member'}>\r\n            //     <form className=\"flex column\" onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>\r\n            //         <div className=\"headline\">\r\n            //             <h2>Add Member</h2>\r\n            //         </div>\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter your friend Email\"\r\n            //             type=\"email\"\r\n            //             name=\"email\"\r\n            //             required\r\n            //             value={this.state.emailToSend.email}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter subject\"\r\n            //             type=\"text\"\r\n            //             name=\"subject\"\r\n            //             required\r\n            //             value={this.state.emailToSend.subject}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <textarea\r\n            //             required\r\n            //             name=\"body\"\r\n            //             placeholder=\"Enter your review here\"\r\n            //             value={this.state.emailToSend.body}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }}>\r\n            //         </textarea>\r\n            //         {/* <ErrorMsg /> */}\r\n            //         <button onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>Save</button>\r\n            //     </form>\r\n            // </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst appRoot = document.createElement('div');\r\ndocument.body.appendChild(appRoot);\r\n// ReactDOM.render(<App />, appRoot);","import React from 'react';\r\nexport function AlertUser({props}) {\r\n    const msg= props.modal.props.createdBy.id==='guest'?\r\n    'Be aware your Changes would not be saved, in case you would like  to save the changes and even add friends to the plan, go back to the home page, sign up and choose a template trip again!':\r\n    'your trip will be saved in Trips under the name: '+props.modal.props.tripName\r\n    return (\r\n        <p style={{padding:'15px'}}>\r\n            {msg}\r\n        </p>\r\n    )\r\n}","import React, { Component } from 'react'\r\n\r\n\r\nexport class NotificationMsg extends Component {\r\n    state = {\r\n        isShown: false,\r\n        msg: '',\r\n        type: ''\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <p>Are you sure you want to delete?</p>\r\n                <div className=\"flex notification-btns\">\r\n                    <button className=\"styled-button\" onClick={() => this.props.props.removeAct(this.props.props.actId)}>Delete</button>\r\n                    <button className=\"styled-button\" onClick={() => this.props.closeModal()}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        )\r\n        // const { isShown, msg, type } = this.state\r\n        // const _hidden = (isShown)?'':'hidden-msg'\r\n        // return (\r\n        //     <div className={ `notification-box ${type} ${_hidden}` }  >\r\n        //         { isShown && <span onClick={ () => this.setState({ isShown: false }) }>X</span> }\r\n        //         { isShown && <h2> { msg }</h2> }\r\n        //     </div>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { LoginSignupPage } from '../../pages/LoginSignupPage';\r\nimport { closeModal, showModal } from '../../store/actions/modalActions'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions';\r\nimport { EditActivity } from '../TripAssembly/EditActivity';\r\nimport { PrevEditActivity } from '../TripAssembly/PrevEditActivity';\r\nimport { AddReview } from '../tripReviews/AddReview';\r\nimport { TripReviews } from '../tripReviews/TripReviews';\r\nimport { AddMember } from './AddMember';\r\nimport { AlertUser } from './AlertUser';\r\nimport { NotificationMsg } from './NotificationMsg';\r\n\r\nclass _Modal extends React.Component {\r\n    state = {\r\n        dynamicCmp: '',\r\n        nameToDisplay: ''\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const curCmp = this.props.modal.cmp\r\n        if (prevProps.modal.cmp === curCmp) return\r\n        let dynamicCmp = '';\r\n        let nameToDisplay = '';\r\n        switch (curCmp) {\r\n            case 'login':\r\n                dynamicCmp = <LoginSignupPage page={true} handleClick={this.handleClick} />\r\n                nameToDisplay = 'Please Login'\r\n                break\r\n            case 'signup':\r\n                const tripId = this.props.modal.props\r\n                dynamicCmp = <LoginSignupPage page={false} handleClick={this.handleClick} tripId={tripId} />\r\n                nameToDisplay = 'Please Sign Up'\r\n                break\r\n            case 'editActivity':\r\n                dynamicCmp = <EditActivity props={this.props.modal.props} />\r\n                nameToDisplay = 'Edit activity'\r\n                break\r\n            case 'activityDetails':\r\n                dynamicCmp = <PrevEditActivity props={this.props.modal.props} showMsg={this.props.showMsg}\r\n                    closeMsg={this.props.closeMsg} />\r\n                nameToDisplay = 'Activity Details'\r\n                break\r\n            case 'removeActivity':\r\n                dynamicCmp = <NotificationMsg props={this.props.modal.props} closeModal={this.props.closeModal} />\r\n                nameToDisplay = 'Delete Activity'\r\n                break\r\n            case 'add-review':\r\n                dynamicCmp = <AddReview props={this.props.modal.props.addReview} showMsg={this.props.showMsg}\r\n                    closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Review'\r\n                break\r\n            case 'add-member':\r\n                dynamicCmp = <AddMember props={this.props.modal.props}\r\n                    closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Member'\r\n                break\r\n            case 'trip-reviews':\r\n                dynamicCmp = <TripReviews showMsg={this.props.showMsg} msg={this.props.msg} closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\r\n                nameToDisplay = 'Reviews'\r\n                break\r\n            case 'alert-user':\r\n                dynamicCmp = <AlertUser props={this.props}  closeModal={this.closeModal} />\r\n                nameToDisplay = 'Welcome!'\r\n                break\r\n            default:\r\n                dynamicCmp = <div>proplem loading modal</div>\r\n        }\r\n        this.setState({ dynamicCmp, nameToDisplay })\r\n\r\n    }\r\n    handleClick = (cmp) => {\r\n        this.props.showModal(cmp)\r\n    }\r\n\r\n\r\n    checkKey = (ev) => {\r\n        if (ev.key === \"Escape\") this.closeModal()\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.props.closeModal()\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className={`modal-screen flex align-center justify-center ${this.props.modal.isShown ? '' : 'hide'}`} onKeyDown={this.checkKey} onMouseDown={this.closeModal}>\r\n                <div className={`modal-container `} onMouseDown={(ev) => ev.stopPropagation()} >\r\n                    <div className=\"modal-header flex align-center justify-center styled-header\" ><p>{this.state.nameToDisplay}</p><button onClick={this.closeModal}>X</button></div>\r\n                    <div className=\"modal-content\"  >\r\n                        {this.state.dynamicCmp}\r\n                        {/* {this.props.msg? <p>{this.props.msg}</p>:''} */}\r\n                    </div>\r\n                </div >\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.modalReducer,\r\n        msg: state.msgReducer.msg\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    closeModal,\r\n    showModal,\r\n    showMsg,\r\n    closeMsg\r\n}\r\nexport const Modal = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Modal))\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nclass _Loader extends React.Component {\r\n    render() {\r\n        if(!this.props.loader)  return <React.Fragment/>\r\n\r\n        return (\r\n            <div className=\"positioning-container\">\r\n                <div className=\"spinning-container\">\r\n                <span>LOADING</span>\r\n                    <div className=\"airplane-container\">\r\n                        {/* <span className=\"fa fa-plane\"></span> */}\r\n                        <img className=\"plane\" src=\"https://res.cloudinary.com/roidinary/image/upload/v1600624566/Asset_dwekpj.png\" alt=\"Loading\"></img>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loader: state.modalReducer.loaderOn\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    \r\n}\r\nexport const Loader = connect(mapStateToProps, mapDispatchToProps)(_Loader)","import React from 'react';\r\nexport function Footer() {\r\n    return (\r\n        <div className=\"footer flex align-center justify-center\">\r\n            TrollyRights 2022 \r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { MainNavBar } from './cmps/MainCmps/MainNavBar';\r\nimport { About } from './pages/About';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { TripStock } from './pages/TripStock';\r\nimport { LoginSignupPage } from './pages/LoginSignupPage';\r\nimport { TripApp } from './pages/TripApp.jsx'\r\nimport { UserTrips } from './pages/UserTrips';\r\nimport { Modal } from './cmps/MainCmps/Modal';\r\n\r\nimport '../src/scss/main.scss'\r\n\r\nimport { Loader } from './cmps/MainCmps/Loader';\r\nimport { Footer } from './cmps/MainCmps/Footer';\r\n\r\n\r\nexport function App() {\r\n\r\n  return (\r\n\r\n    <div style={{position:\"relative\"}} className=\"App \">\r\n      <MainNavBar />\r\n      <main>\r\n        <Modal />\r\n        <Loader />\r\n        <Switch>\r\n          <Route component={LoginSignupPage} path='/lognsignup' />\r\n          <Route component={TripApp} path='/trip/:id/:triproute/:openSignup?' />\r\n          {/* <Route component={TripApp} path='/trip/:id/:triproute' /> */}\r\n          <Route component={UserTrips} path='/user/:id' />\r\n          <Route component={TripStock} path='/trip' />\r\n          <Route component={About} path='/about' />\r\n          <Route exact component={HomePage} path='/' />\r\n        </Switch>\r\n      </main>\r\n        <Footer/>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const initialState = {\r\n    isShown: false,\r\n    props: null,\r\n    cmp: null,\r\n    msg:null,\r\n    loaderOn: false\r\n}\r\n\r\nexport function modalReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MODAL':\r\n            return {\r\n                isShown: true,\r\n                props: action.props,\r\n                cmp: action.cmp\r\n            }\r\n        case 'CLOSE_MODAL':\r\n            return {\r\n                isShown: false,\r\n                props: null,\r\n                cmp: null\r\n            }\r\n        case 'LOGIN_PROBLEML':\r\n            return {\r\n                ...state,\r\n                msg:'wrong email or password'\r\n            }\r\n        case 'SET_LOADER':\r\n            return {\r\n                loaderOn: true,\r\n            }\r\n        case 'CLOSE_LOADER':\r\n            return {\r\n                loaderOn: false,\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    isShown: false,\r\n    type: '',\r\n    msg: ''\r\n}\r\n\r\nexport function msgReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MSG':\r\n            return {\r\n                isShown: true,\r\n                msg: action.msg.msg,\r\n                type: action.msg.type\r\n            }\r\n        case 'CLOSE_MSG':\r\n            return {\r\n                isShown: false,\r\n                type: '',\r\n                msg: ''\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    reviews: [],\r\n    selectedReview: null\r\n  };\r\n  \r\n  export function reviewReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n      case 'SET_REVIEWS':\r\n        return { ...state, reviews: action.reviews };\r\n      case 'REVIEW_ADD':\r\n        return { ...state, reviews: [...state.reviews, action.review] };\r\n      case 'REVIEW_UPDATE':\r\n        return {\r\n          ...state,\r\n          reviews: state.reviews.map(review =>\r\n            review._id === action.review._id ? action.review : review\r\n          )};\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  ","const initialState = {\r\n    trips: [],\r\n    currTrip: null\r\n\r\n}\r\n\r\n\r\nexport function tripReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_TRIPS':\r\n            return {\r\n                ...state,\r\n                trips: action.trips\r\n            }\r\n        case 'EDIT_TRIP':\r\n            return {\r\n                ...state, currTrip: { ...action.trip }, trips: state.trips.map(trip => {\r\n                    if (action.trip._id === trip._id) return action.trip\r\n                    return trip;\r\n                })\r\n            }\r\n        case 'REMOVE_TRIP':\r\n            return {\r\n                ...state, currTrip: null, trips: state.trips.map(trip => {\r\n                    if (action.trip._id === !trip._id) return action.trip\r\n                    return trip;\r\n                })\r\n            }\r\n        case 'SET_TRIP':\r\n            return {\r\n                ...state,\r\n                currTrip: { ...action.trip }\r\n            }\r\n\r\n\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","\r\nlet localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n    users: [],\r\n    loggedInUser: localLoggedinUser\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            return {\r\n                users:[...state.users],\r\n                loggedInUser: action.user\r\n            }\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { modalReducer } from './reducers/modalReducer';\r\nimport { msgReducer } from './reducers/msgReducer';\r\nimport { reviewReducer } from './reducers/reviewReducer';\r\nimport {tripReducer } from './reducers/tripReducer';\r\nimport { userReducer } from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    tripReducer,\r\n    userReducer,\r\n    modalReducer,\r\n    reviewReducer,\r\n    msgReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { DndProvider } from 'react-dnd'\r\nimport {HTML5Backend} from 'react-dnd-html5-backend'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <DndProvider backend={HTML5Backend}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </DndProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}