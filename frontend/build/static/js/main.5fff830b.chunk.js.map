{"version":3,"sources":["cmps/MainCmps/UserPreview.jsx","services/httpService.js","services/tripService.js","services/socketService.js","store/actions/tripActions.js","store/actions/modalActions.js","services/userService.js","cmps/MainCmps/MainNavBar.jsx","store/actions/userActions.js","pages/About.jsx","services/utils.js","store/actions/msgActions.js","cmps/MainCmps/ErrorMsg.jsx","cmps/Home/AddTrip.jsx","cmps/MainCmps/GooglePlaces.jsx","services/reviewService.js","store/actions/reviewActions.js","cmps/Home/TripPreview.jsx","cmps/Home/TripList.jsx","cmps/Home/TripSlider.jsx","cmps/Home/UserFlow.jsx","pages/HomePage.jsx","cmps/Home/TripFilter.jsx","pages/TripStock.jsx","pages/Login.jsx","pages/Signup.jsx","pages/LoginSignupPage.jsx","services/eventBusService.js","services/dndItems.js","cmps/TripAssembly/ActivitiePreview.jsx","cmps/TripAssembly/OpenDaySlot.jsx","cmps/TripAssembly/DayActivities.jsx","cmps/TripAssembly/DayTimeLine.jsx","cmps/TripAssembly/DestNamePrev.jsx","cmps/TripAssembly/DestinationsHeader.jsx","cmps/TripAssembly/TripAssembly.jsx","cmps/TripApp/MemberPreview.jsx","cmps/TripApp/TripNavBar.jsx","cmps/TripRoute/AddDestiantion.jsx","cmps/TripRoute/WeekPreview.jsx","cmps/TripRoute/RouteCalendar.jsx","cmps/TripRoute/RouteTimeLinePreview.jsx","cmps/TripRoute/RouteTimeLine.jsx","cmps/TripRoute/TripRoute.jsx","cmps/TripApp/Chat.jsx","cmps/MainCmps/Map.jsx","pages/TripApp.jsx","pages/UserTrips.jsx","cmps/TripAssembly/EditActivity.jsx","cmps/TripAssembly/PrevEditActivity.jsx","cmps/tripReviews/AddReview.jsx","cmps/MainCmps/AddMember.jsx","cmps/MainCmps/NotificationMsg.jsx","cmps/MainCmps/Modal.jsx","cmps/MainCmps/LongText.jsx","cmps/tripReviews/ReviewPreview.jsx","cmps/tripReviews/ReviewList.jsx","pages/TripDetails.jsx","cmps/MainCmps/Loader.jsx","cmps/MainCmps/Footer.jsx","App.jsx","serviceWorker.js","store/reducers/modalReducer.js","store/reducers/msgReducer.js","store/reducers/reviewReducer.js","store/reducers/tripReducer.js","store/reducers/userReducer.js","store/store.js","index.js"],"names":["UserPreview","state","expand","toggleExpand","setState","Fragment","className","src","this","props","user","imgUrl","alt","username","onClick","to","_id","logout","Component","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","tripService","query","getById","remove","tripId","httpService","save","trip","filterBy","name","queryStr","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","loadTrip","flag","dispatch","type","Promise","resolve","reject","setTimeout","tripLoad","loadTrips","trips","addTrip","newTrip","showModal","cmp","closeModal","userService","login","signup","getUsers","userId","update","userCred","_handleLogin","sessionStorage","clear","setItem","JSON","stringify","window","_MainNavBar","navBar","backgroundChanged","path","location","pathname","match","pageYOffset","addEventListener","prevProps","prevState","resetTrip","removeEventListener","usersData","loggedInUser","mapDispatchToProps","MainNavBar","connect","userReducer","withRouter","About","utils","makeId","length","txt","possible","i","charAt","Math","floor","random","calculateDays","start","end","Date","difference","getTime","ceil","createMat","cols","rows","mat","j","pos","col","getDateDay","timeStamp","getDate","getWeekDay","time","getDay","getTimeDayStr","hours","_get2DigTime","getHours","minuets","getMinutes","getRandomPic","imgIdx","getRandomInt","imgs","getIsoTime","setMinutes","getTimezoneOffset","toISOString","slice","calculateDates","destinations","nextDay","dates","day","td","push","forEach","dest","getMonth","idx","setHours","getRandomLatLng","locations","lat","lng","setToHourMinuets","hour","min","num","max","showMsg","msg","closeMsg","_ErrorMsg","isShown","ErrorMsg","msgReducer","_AddTrip","tripName","currTrip","startDate","endDate","onSetDestinations","ev","preventDefault","newtrip","toLowerCase","now","id","onSaveDestination","activities","members","history","handleAddress","handleSelect","value","geocodeByAddress","results","getLatLng","latlng","handleInput","targetName","target","formatDate","date","getFullYear","onSubmit","htmlFor","placeholder","required","onChange","minDate","selected","map","key","AddTrip","reviewService","add","reviewId","review","createdAt","addedReview","reviewActions","loadReviews","reviews","addReview","_TripPreview","handleClick","getTripPrice","reduce","acc","currValue","price","amount","getReviewsAvg","rating","currRev","toFixed","err","addClass","days","style","pointerEvents","createdBy","TripPreview","reviewReducer","_TripList","img","TripList","tripReducer","SwiperCore","use","EffectCoverflow","Autoplay","EffectFade","Navigation","Pagination","Scrollbar","A11y","TripSlider","effect","slidesPerView","navigation","centeredSlides","delay","coverflowEffect","rotate","depth","pagination","clickable","el","UserFlow","fontWeight","_HomePage","smooth","scroll","scrollIntoView","behavior","block","height","HomePage","TripFilter","mostOccDests","onsetFilter","autoComplete","list","_TripStock","getMostOccDests","concat","numOfOccMap","numOfOccArr","Object","entries","sort","dest1","dest2","destOcc","toLocaleUpperCase","substring","field","getTripsForDisplay","filter","includes","TripStock","Login","email","password","userCreds","handleForm","React","Signup","handleChange","tripToRed","_LoginSignupPage","action","tripIdToRed","all","page","LoginSignupPage","eventBus","listener","callListener","detail","dispatchEvent","CustomEvent","ItemTypes","ActivitiePreview","act","onRemoveAct","onEdit","onOpenDetails","useDrag","item","collect","monitor","isDragging","drag","isFirstCol","isDayHeadClass","literalDay","isDrag","isLenOne","duration","findIndex","destination","ref","gridRow","row","OpenDaySlot","onDragMove","getRowIdx","useDrop","accept","drop","isOver","_isOver","DayActivities","newDay","reCalcPos","DayTimeLine","times","DestNamePrev","updateFreeDays","freeDays","_dest","display","gridColumn","DestinationsHeader","allDestinations","daysCount","gridTemplateColumns","TripAssembly","weekMat","tripLength","actsToDisplay","minDestinations","initiateAssembly","windowWidth","innerWidth","loadWeekMat","getMinDestinations","WeeklyActsToDisplay","mapActsToDays","destTimeStamp","at","prevDate","currDate","currDayActs","getDaysInMonth","freeDay","showDaysName","actId","removeAct","_act","updateTripAct","isOccTimeSlot","activity","currStartTime","currEndTime","checkedStartTime","checkedEndTime","act1","act2","sortDateMap","getCol","n","x","saveAct","find","newTime","getTimeFromIdx","destStart","desEnd","actCopy","currWeekDates","getLinearTripDays","currDayDate","getWeekDests","linearDays","minDay","maxDay","destsHeadLength","mapDestsToHeaderLength","destsNames","keys","destsLength","values","currDestName","currDest","tripStart","tripEnd","destinationsTimes","full","getDestsWithActs","allActs","isActInDests","onTogglePage","direction","pageCount","newPage","getDayNumOfAct","getTwoDig","numStr","startTime","_time","toLocaleDateString","arrSorted","currDay","day1","day2","currActs","actPreviews","dayActs","renderDayActivities","MembersPreview","member","AddDestination","addDestOpen","toggleAddDestination","addDestination","WeekPreview","showDay","hotDog","RouteCalendar","calendarData","unshift","getFirstSunday","getLastSaturday","getDaysAround","generateCalendar","weekCmps","weeksCount","splice","renderTable","RouteTimeLinePreview","isLast","updateDestinations","letFire","RouteTimeLine","TripRoute","toggleChat","_Chat","from","msgs","isTyping","loadHistory","addMsg","newMsg","sendMsg","userTyping","msgHandleChange","trim","chatOpen","Chat","_MapContainer","bounds","markers","selectedPlace","activeMarker","showingInfoWindow","onMarkerClick","marker","e","onMapClicked","containerStyle","width","zIndex","google","maps","LatLngBounds","extend","LatLng","BASE_IMG_URL","fitBounds","panTo","setZoom","title","position","icon","zoom","onReady","mapProps","getMarkers","visible","MapContainer","GoogleApiWrapper","_TripApp","settingsOpen","isSocketSetup","sideBar","destIdxToMove","moveToIdx","moveDifference","destTomove","constant","passDifference","constant2","_newTrip","toggleSettings","newDest","openSideBar","setTrip","params","openSignup","getMarkersOfDests","sideBarClass","TripApp","_UserTrips","UserTrips","EditActivity","activitie","labels","notes","minTime","maxTime","handleTime","tzoffset","localISOTime","checked","onSaveAct","datetime","currency","getValidTime","destIdx","minT","maxT","_min","_max","disabled","maxDate","showTimeSelect","showFullMonthYearPicker","dateFormat","PrevEditActivity","isInputOpen","split","handleContentEditable","currentTarget","dataset","innerText","endTime","contentEditable","suppressContentEditableWarning","autoCorrect","data-name","onInput","onBlur","AddReview","reviewToAdd","content","elInput","createRef","onInputChange","inputType","onAddReview","current","focus","defaultValue","AddMember","copied","emailToSend","mail","text","onCopy","color","appRoot","document","createElement","body","appendChild","NotificationMsg","_Modal","dynamicCmp","nameToDisplay","checkKey","curCmp","modal","onKeyDown","onMouseDown","stopPropagation","Modal","modalReducer","LongTxt","isLongTxtShown","onReadMore","ReviewPreview","repeat","stars","getStars","ReviewList","_TripDetails","isReviewOpen","onToggleExpend","aboutTrip","TripDetails","_Loader","loader","Loader","loaderOn","Footer","App","component","exact","Boolean","hostname","initialState","selectedReview","localLoggedinUser","parse","users","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","DndProvider","backend","HTML5Backend","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.5fff830b.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport class UserPreview extends Component {\r\n    state = {\r\n        expand: false\r\n    }\r\n    toggleExpand = () => {\r\n        this.setState({ expand: !this.state.expand })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n\r\n\r\n                <div >\r\n                    <img className=\"user-preview\" src={this.props.user.imgUrl} alt={this.props.user.username + 'img'} onClick={this.toggleExpand}/>\r\n                    { <div className={`user-preview-expand flex column justify-around ${this.state.expand?'open':''}`} >\r\n                        <Link to={`/user/${this.props.user._id}`} >My Trips</Link>\r\n                        <button onClick={this.props.logout}>Logout</button>\r\n                    </div>}\r\n                </div>\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n}","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        // if (err.response && err.response.status === 401) {\r\n        //     window.location.assign('/#/login');\r\n        // }\r\n        throw err;\r\n    }\r\n}","\r\nimport httpService from './httpService'\r\n\r\nexport const tripService = {\r\n    query,\r\n    getById,\r\n    remove,\r\n    save\r\n}\r\n\r\n\r\nconst user = {\r\n    _id: 'u101',\r\n    fullName: 'Orly Amdadi',\r\n    userName: 'orly@amdadi.com',\r\n    password: 'tinkerbell',\r\n    imgUrl: 'http://some-img',\r\n}\r\n\r\nasync function query(filterBy={name:''}) {\r\n    const queryStr = `?search=${filterBy.name}`;\r\n    return httpService.get(`trip${queryStr}`);\r\n    \r\n}\r\n\r\n\r\nasync function getById(tripId) {\r\n    return httpService.get(`trip/${tripId}`,tripId)\r\n\r\n}\r\n\r\nfunction remove(tripId) {\r\n    return httpService.delete(`trip/${tripId}`)\r\n}\r\n\r\nfunction save(trip) {\r\n    if (trip._id) {\r\n        return httpService.put(`trip/${trip._id}`, trip)\r\n\r\n    } else {\r\n        return httpService.post('trip', trip)\r\n    }\r\n}","import io from 'socket.io-client';\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService();\r\n// export const socketService = createDummySocketService();\r\n\r\n// window.socketService = socketService;\r\n// export socketService;\r\n\r\nfunction createSocketService() {\r\n  var socket;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    }\r\n  }\r\n  return socketService;\r\n}\r\n\r\n// function createDummySocketService() {\r\n//   var listenersMap = {}\r\n//   const socketService = {\r\n//     setup() {\r\n//       listenersMap = {}\r\n//       window.listenersMap = listenersMap;\r\n//     },\r\n//     terminate() {\r\n//       listenersMap = {}\r\n//     },\r\n//     on(eventName, cb) {\r\n//       listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n//     },\r\n//     off(eventName, cb) {\r\n//       listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n//     },\r\n//     emit(eventName, data) {\r\n//       if (!listenersMap[eventName]) return;\r\n//       listenersMap[eventName].forEach(listener => {\r\n//         listener(data)\r\n//       });\r\n//     },\r\n//     debugMsg() {\r\n//       this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n//     },\r\n//   }\r\n//   return socketService;\r\n// }\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import { tripService } from \"../../services/tripService\"\r\nimport { socketService } from '../../services/socketService'\r\n\r\n\r\n\r\n\r\nexport function loadTrip(tripId, flag) {\r\n    return async dispatch => {\r\n        try {\r\n            let trip = {}\r\n            if (flag) {\r\n                dispatch({ type: 'SET_LOADER' })\r\n                trip = await new Promise((resolve, reject) => {\r\n                    setTimeout(async () => {\r\n                        var tripLoad = await tripService.getById(tripId)\r\n                        resolve(tripLoad)\r\n                    }, 3500)\r\n                })\r\n                dispatch({ type: 'SET_TRIP', trip })\r\n            }\r\n            else {\r\n                trip = await tripService.getById(tripId)\r\n                dispatch({ type: 'SET_TRIP', trip })\r\n            }\r\n            return trip\r\n        } catch (err) {\r\n            console.log(err);\r\n        } finally {\r\n            dispatch({ type: 'CLOSE_LOADER' })\r\n\r\n        }\r\n\r\n    }\r\n}\r\nexport function setTrip(trip) {\r\n    console.log(\"setTrip -> trip\", trip)\r\n    return async dispatch => {\r\n        dispatch({ type: 'SET_LOADER' })\r\n        dispatch({ type: 'SET_TRIP', trip })\r\n        dispatch({ type: 'CLOSE_LOADER' })\r\n        return trip\r\n\r\n    }\r\n}\r\n\r\nexport function resetTrip() {\r\n    const trip = null\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_TRIP', trip })\r\n    }\r\n}\r\n\r\nexport function loadTrips(filterBy) {\r\n    // console.log(\"loadTrips -> filterBy\", filterBy)\r\n    return async dispatch => {\r\n        const trips = await tripService.query(filterBy)\r\n        dispatch({ type: 'SET_TRIPS', trips })\r\n    }\r\n}\r\n\r\n\r\nexport function addTripFast(trip) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            await tripService.save(trip)\r\n        }\r\n\r\n        catch (err) {\r\n        }\r\n    }\r\n}\r\n\r\nexport function addTrip(newTrip) {\r\n    return async dispatch => {\r\n        try {\r\n            // socketService.emit('tripToUpdate', newTrip);\r\n\r\n            const trip = await tripService.save(newTrip)\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            return trip\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n}","\r\n\r\nexport function showModal(cmp,props) {\r\n    return dispatch => {\r\n        dispatch({type:'SET_MODAL',cmp,props})\r\n    }\r\n}\r\n\r\nexport function closeModal() {\r\n    return  dispatch => {\r\n        dispatch({ type: 'CLOSE_MODAL' })\r\n    }\r\n}","import {storageService} from './asyncStorageService'\r\nimport httpService from './httpService'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update\r\n}\r\n\r\nwindow.userService = userService;\r\n\r\nfunction getUsers() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`user/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _handleLogin(user)\r\n    return Promise.reject('user not found'+userCred)\r\n}\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, Link, withRouter } from 'react-router-dom'\r\n\r\nimport { UserPreview } from '../MainCmps/UserPreview'\r\n\r\nimport { resetTrip } from '../../store/actions/tripActions'\r\nimport { showModal } from '../../store/actions/modalActions'\r\nimport { logout } from '../../store/actions/userActions'\r\n\r\nclass _MainNavBar extends Component {\r\n    state = {\r\n        navBar: '',\r\n    }\r\n\r\n    componentDidMount() {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (!match) this.backgroundChanged()\r\n        window.addEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.location.pathname !== prevProps.location.pathname){\r\n            this.backgroundChanged()\r\n            if(this.props.location.pathname==='/'){\r\n                this.props.resetTrip()\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n\r\n    backgroundChanged = () => {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (window.pageYOffset >= 80 || !match) {\r\n            this.setState({ navBar: true })\r\n        } else { this.setState({ navBar: false }) }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'main-navbar flex justify-between align-center full  ' + (this.state.navBar ? 'navBar-background' : '')}>\r\n                <Link to=\"/\" > <h1 className=\"logo\">Trolly</h1></Link>\r\n                <div className=\"flex justify-between main-navbar-links\">\r\n                    <Link to=\"/trip\">Trips</Link>\r\n                    <NavLink to=\"/about\" >About</NavLink>\r\n                    {this.props.usersData.loggedInUser ? <UserPreview logout={this.props.logout} user={this.props.usersData.loggedInUser} /> : <div onClick={() => this.props.showModal('login')}>Login</div>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        usersData: state.userReducer\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    showModal,\r\n    logout,\r\n    resetTrip\r\n}\r\n\r\nexport const MainNavBar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_MainNavBar));","import { userService } from '../../services/userService';\r\n// import { loading, doneLoading } from './systemActions';\r\n\r\n// THUNK\r\n// export function loadUsers() {\r\n//   return async dispatch => {\r\n//     try {\r\n//       // example for loading\r\n//       dispatch(loading);\r\n//       const users = await userService.getUsers();\r\n//       dispatch({ type: 'SET_USERS', users });\r\n//     } catch (err) {\r\n//       console.log('UserActions: err in loadUsers', err);\r\n//       // example for routing - after changing the store\r\n//       // history.push('/some/path');\r\n//     } finally {\r\n//       dispatch(doneLoading);\r\n//     }\r\n//   };\r\n// }\r\n// THUNK\r\n// export function removeUser(userId) {\r\n//   return async dispatch => {\r\n//     try {\r\n//       await userService.remove(userId);\r\n//       dispatch({ type: 'USER_REMOVE', userId });\r\n//     } catch (err) {\r\n//       console.log('UserActions: err in removeUser', err);\r\n//     }\r\n//   };\r\n// }\r\n// THUNK\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    try{\r\n      const user = await userService.login(userCreds);\r\n      dispatch({ type: 'SET_USER', user });\r\n      return user\r\n    }catch(err){\r\n      console.log(err,'actionsuser');\r\n      dispatch({type:'LOGIN_PROBLEM'})\r\n    }\r\n  };\r\n}\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.signup(userCreds);\r\n    dispatch({ type: 'SET_USER', user });\r\n    return user\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await userService.logout();\r\n    dispatch({ type: 'SET_USER', user: null });\r\n  };\r\n}\r\n","import React from 'react'\r\n\r\nexport function About() {\r\n    return (\r\n        <div>\r\n            About\r\n        </div>\r\n    )\r\n}\r\n","\r\n\r\n\r\nexport const utils = {\r\n    makeId,\r\n    calculateDays,\r\n    createMat,\r\n    getDateDay,\r\n    getWeekDay,\r\n    getTimeDayStr,\r\n    getRandomPic,\r\n    getRandomInt,\r\n    getIsoTime,\r\n    calculateDates,\r\n    getRandomLatLng,\r\n    setToHourMinuets\r\n}\r\n\r\nfunction makeId(length = 5) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction calculateDays(start, end) {\r\n    end = new Date(end)\r\n    start = new Date(start)\r\n    var difference = end.getTime() - start.getTime();\r\n    var daysDifference = Math.ceil(difference / 999 / 60 / 60 / 24);\r\n    return daysDifference\r\n}\r\n\r\n\r\n\r\nfunction calculateDates(start, end, destinations) {\r\n    let nextDay = new Date(start)\r\n    let dates = [{ day: nextDay, td: { 'start': 0 } }]\r\n    while (nextDay.getDate() !== new Date(end).getDate()) {\r\n        nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n        dates.push({ day: nextDay, td: '' })\r\n        destinations.forEach(dest => {\r\n            if (dest.start.getDate() === nextDay.getDate() && dest.start.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'start': dest.idx }\r\n            } else if (dest.start < nextDay && nextDay.setHours(12) < dest.end.setHours(11)) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'full': dest.idx }\r\n            } else if (dest.end.getDate() === nextDay.getDate() && dest.end.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'end': dest.idx }\r\n            }\r\n        })\r\n    }\r\n    return dates\r\n}\r\n\r\n\r\nfunction createMat(cols, rows) {\r\n    const mat = []\r\n    for (let i = 0; i < rows; i++) {\r\n        mat[i] = []\r\n        for (let j = 0; j < cols; j++) {\r\n            mat[i][j] = { pos: { i, j } }\r\n\r\n            if (j === 0) {\r\n                mat[i][j] = { ...mat[i][j], col: 0 }\r\n            }\r\n        }\r\n    }\r\n\r\n    return mat\r\n}\r\n\r\nfunction getDateDay(timeStamp) {\r\n    const time = new Date(timeStamp);\r\n    return time.getDate()\r\n}\r\n\r\nfunction setToHourMinuets(timeStamp,hour, min) {\r\n    let time = new Date(timeStamp)\r\n    time.setHours(hour, min)\r\n    return time.getTime()\r\n    \r\n}\r\n\r\n\r\nfunction getWeekDay(timeStamp) {\r\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const time = new Date(timeStamp);\r\n    return days[time.getDay()]\r\n}\r\n\r\nfunction getTimeDayStr(timeStamp) {\r\n    let time = new Date(timeStamp)\r\n    let hours = _get2DigTime(time.getHours());\r\n    let minuets = _get2DigTime(time.getMinutes());\r\n    return `${hours}:${minuets}`\r\n}\r\n\r\nfunction _get2DigTime(num) {\r\n    if ((num + '').length === 1) return '0' + num\r\n    return num\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\nfunction getRandomPic() {\r\n    const imgIdx = getRandomInt(0, imgs.length - 1)\r\n    return imgs[imgIdx]\r\n}\r\n\r\nfunction getIsoTime(timeStamp) {\r\n    let time = new Date(timeStamp);\r\n    time.setMinutes(time.getMinutes() - time.getTimezoneOffset());\r\n    return time.toISOString().slice(0, 16)\r\n}\r\nfunction getRandomLatLng() {\r\n    let locations = [\r\n        { lat: -23.5475, lng: -46.6361 }, //sau paolo\r\n        { lat: 13.751330328, lng: 100.489664708 }, //bangkok\r\n        { lat: 25.105497, lng: 121.597366 }, //taipei\r\n        { lat: 21.028511, lng: 105.804817 }, //hanoi\r\n        { lat: 39.916668, lng: 116.383331 }, //beijin\r\n        { lat: -16.5000000, lng: -68.1500000 }, //la paz\r\n        { lat: 27.700769, lng: 85.300140 }, // //Kathmandu, nepal\r\n        { lat: 14.599512, lng: 120.984222 }, //manila\r\n        { lat: 1.290270, lng: 103.851959 }, //singapor city\r\n        { lat: 6.927079, lng: 79.861244 }, //colombo sri lanka\r\n        { lat: 28.644800, lng: 77.216721 }, //new delhi\r\n    ]\r\n    return locations[getRandomInt(0, locations.length - 1)]\r\n}\r\n\r\n\r\nconst imgs = [\r\n    'https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1', //clear water with sup\r\n    'https://images.unsplash.com/photo-1550399504-8953e1a6ac87?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //reading book at the beach\r\n    'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //sunglass on sand\r\n    'https://images.unsplash.com/photo-1527004013197-933c4bb611b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1', //norway\r\n    'https://images.unsplash.com/photo-1475066392170-59d55d96fe51?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-1.2.1', //manhaten\r\n    'https://images.unsplash.com/photo-1507272931001-fc06c17e4f43?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailnad\r\n    'https://images.unsplash.com/photo-1545579133-99bb5ab189bd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //maldivas\r\n    'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1524492412937-b28074a5d7da?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //india\r\n    'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0',  //italy/capri\r\n    'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //itlay/venice\r\n    'https://images.unsplash.com/photo-1517792844039-e52afb564132?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1499678329028-101435549a4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy',\r\n    'https://images.unsplash.com/photo-1535063406830-27dfae54262a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1554357475-accb8a88a330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //jordan\r\n    'https://images.unsplash.com/photo-1559628233-100c798642d4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //indonesia\r\n    'https://images.unsplash.com/photo-1527095655060-4026c4af2b25?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1583702993462-43615c05ceee?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1505662695181-d4b60363d2a3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //singapore\r\n    'https://images.unsplash.com/photo-1455459182396-ae46100617cb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //?\r\n    'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717865-a99cac1c95d8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717201-fbb671ff56b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n]","export function showMsg(msg) {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            this.closeMsg()\r\n        }, 3000)\r\n        dispatch({ type: 'SET_MSG', msg })\r\n        \r\n    }\r\n    \r\n}\r\n\r\nexport function closeMsg() {\r\n    return dispatch => {\r\n        dispatch({ type: 'CLOSE_MSG' })\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions'\r\n\r\n\r\n\r\nclass _ErrorMsg extends Component {\r\n    render() {\r\n        const { msg, type } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                {(type === 'input') && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <small className=\"error-msg\"><i className=\"fas fa-exclamation-circle\"></i>{msg}</small>\r\n                </div>}\r\n                {type === 'invalid-move' && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <p className=\"invalid-move\"><i className=\"fas fa-exclamation-triangle\"></i>{msg}</p>\r\n                </div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        msg: state.msgReducer.msg,\r\n        isShown: state.msgReducer.isShown,\r\n        type: state.msgReducer.type\r\n\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const ErrorMsg = connect(mapStateToProps, mapDispatchToProps)(_ErrorMsg)\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux';\r\nimport { addTrip } from '../../store/actions/tripActions'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { showMsg, closeMsg } from '../../store/actions/msgActions';\r\nimport { GooglePlaces } from '../MainCmps/GooglePlaces';\r\nimport {\r\n    geocodeByAddress,\r\n    // geocodeByPlaceId,\r\n    getLatLng,\r\n} from 'react-places-autocomplete';\r\n\r\n\r\nclass _AddTrip extends Component {\r\n\r\n\r\n    state = {\r\n        tripName: '',\r\n        currTrip: {\r\n            name: '',\r\n            location: { lat: null, lng: null },\r\n            startDate: '',\r\n            endDate: '',\r\n\r\n        },\r\n        destinations: '',\r\n    }\r\n\r\n    onSetDestinations = (ev) => {\r\n        ev.preventDefault()\r\n        const newtrip = this.state.currTrip\r\n        newtrip.name = newtrip.name.toLowerCase()\r\n        if (!this.state.currTrip.startDate && !this.state.currTrip.endDate) {\r\n            newtrip.startDate = Date.now()\r\n            newtrip.endDate = Date.now() + 1 * 1000 * 60 * 60 * 24\r\n        }\r\n\r\n        newtrip.id = utils.makeId()\r\n        this.setState({\r\n            destinations: [...this.state.destinations, newtrip],\r\n            currTrip: {\r\n                name: '',\r\n                location: { lat: null, lng: null },\r\n                startDate: '',\r\n                endDate: '',\r\n            }\r\n        })\r\n    }\r\n\r\n    onSaveDestination = async (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.destinations.length) {\r\n            this.props.showMsg({ type: 'input', msg: 'At least one destination must be added' })\r\n            return\r\n        }\r\n        const trip = {\r\n            tripName: this.state.tripName,\r\n            imgUrl: utils.getRandomPic(),\r\n            activities: [],\r\n            destinations: this.state.destinations\r\n        }\r\n\r\n        if (this.props.loggedInUser) {\r\n            trip.members = [\r\n                {\r\n                    id: this.props.loggedInUser._id,\r\n                    username: this.props.loggedInUser.username,\r\n                    imgUrl: this.props.loggedInUser.imgUrl,\r\n                }\r\n            ]\r\n        }\r\n\r\n        else trip.members = []\r\n        const newTrip = await this.props.addTrip(trip)\r\n        this.props.history.push(`/trip/${newTrip._id}/tripRoute`)\r\n    }\r\n\r\n    // getRandomLatLng() {\r\n    //     const LL = utils.getRandomLatLng()\r\n    //     return LL\r\n    // }\r\n\r\n\r\n    handleAddress = (name) => {\r\n        this.setState({ currTrip: { ...this.state.currTrip, name } }, console.log(this.state))\r\n    }\r\n\r\n    handleSelect = async (value) => {\r\n        const results = await geocodeByAddress(value);\r\n        const latlng = await getLatLng(results[0])\r\n        this.setState({ currTrip: { ...this.state.currTrip,location: latlng, name: value }}, () => { console.log(this.state) })\r\n    }\r\n\r\n    handleInput = (ev, name) => {\r\n        let value;\r\n        let targetName;\r\n        if (ev.target && ev.target.name === 'tripName') {\r\n            this.setState({ ...this.state, tripName: ev.target.value })\r\n            return\r\n        }\r\n        if (ev.target) {\r\n            value = ev.target.value;\r\n            targetName = ev.target.name\r\n        }\r\n        else {\r\n            value = new Date(ev).getTime();\r\n            targetName = name\r\n        }\r\n\r\n        this.setState({ ...this.state, currTrip: { ...this.state.currTrip, [targetName]: value } })\r\n    }\r\n\r\n\r\n    formatDate = (date) => {\r\n        return `${new Date(date).getDate()}/${new Date(date).getMonth() + 1}/${new Date(date).getFullYear()}`\r\n    }\r\n    render() {\r\n        const startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) ||\r\n            Date.now()\r\n        return (\r\n            <div className=\"flex add-destination-form-wraper\">\r\n                <form className=\"flex column add-destination-form\" onSubmit={this.onSetDestinations}>\r\n                    <div className=\"flex column\">\r\n                        <label htmlFor=\"add-dest-name\">Add name to your trip:</label>\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"tripName\"\r\n                            placeholder=\"Enter Trip Name\"\r\n                            id=\"add-dest-name\"\r\n                            value={this.state.tripName}\r\n                            required\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    {/* <GooglePlaces\r\n                        handleSelect={this.handleSelect}\r\n                        handleAddress={this.handleAddress}\r\n                        address={this.state.currTrip.name}\r\n                        location={this.state.currTrip.location}\r\n                    /> */}\r\n                    <div className=\"flex column\">\r\n                        <label htmlFor=\"add-dest-city\">Add Destination:</label>\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"name\"\r\n                            placeholder=\"Enter City Name\"\r\n                            id=\"add-dest-city\"\r\n                            value={this.state.currTrip.name}\r\n                            required\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"startdate-dest-input\">Start At</label>\r\n\r\n                            <DatePicker\r\n                                minDate={startDate}\r\n                                id=\"startdate-dest-input\"\r\n                                name=\"startDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                // selected={this.state.currTrip.startDate || Date.now()}\r\n                                selected={this.state.destinations.length ? startDate : Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'startDate') }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"enddate-dest-input\">End At</label>\r\n                            <DatePicker\r\n                                minDate={this.state.currTrip.startDate || Date.now()}\r\n                                id=\"enddate-dest-input\"\r\n                                name=\"endDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                selected={this.state.currTrip.endDate || Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'endDate') }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ErrorMsg />\r\n                    <button className=\"styled-button\" onSubmit={this.onSetDestinations}>Add destination</button>\r\n                    {this.state.destinations.length ? <ol className=\"trip-list-add-form flex column\">\r\n                        {this.state.destinations.map(dest => <li key={utils.makeId()} className=\"flex justify-between\">\r\n                            <p>{dest.name}</p>\r\n                            <div className=\"flex\">\r\n                                <p>{this.formatDate(dest.startDate)}</p> -\r\n                                <p>{this.formatDate(dest.endDate)}</p>\r\n                            </div>\r\n                        </li>)}\r\n                    </ol> : ''}\r\n                    <button className=\"styled-button\" onClick={this.onSaveDestination}>Ready To Plan!</button>\r\n                </form>\r\n                <div className=\"add-dest-img-wraper\">\r\n                    <img src=\"https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1\" alt=\"\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const AddTrip = connect(mapStateToProps, mapDispatchToProps)(withRouter(_AddTrip));","import React, { Component } from 'react'\r\n\r\nimport PlacesAutocomplete from 'react-places-autocomplete';\r\n\r\n\r\nexport class GooglePlaces extends Component {\r\n\r\n    state = {\r\n        address: '',\r\n        coordinates: { lat: null, lng: null },\r\n\r\n    }\r\n    componentDidMount() {\r\n        console.log(this.props);\r\n    }\r\n    \r\n\r\n    // handleSelect = async (value) => {\r\n    //     const results = await geocodeByAddress(value);\r\n    //     const latlng = await getLatLng(results[0])\r\n    //     this.setState({coordinates:latlng, address:value}, ()=>{console.log(this.state)})\r\n    // }\r\n\r\n    // handleInput = (name) => {\r\n    //     this.setState({ address: name })\r\n    // }\r\n\r\n\r\n    render() {\r\n        console.log(this.props);\r\n        return (\r\n            <div>\r\n                <PlacesAutocomplete value={this.props.address} onChange={this.props.handleAddress} onSelect={this.props.handleSelect}>\r\n                    {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => {\r\n                        return <div> <input\r\n                            {...getInputProps({\r\n                                placeholder: 'Enter destination (city)...',\r\n                                className: 'styled-input',\r\n                            })}\r\n                        />\r\n                            <div className=\"places-list\">\r\n                                {loading ? <p>Loading . . .</p> : null}\r\n                                {suggestions.map((suggestion) => {\r\n\r\n                                    const style = {\r\n                                        backgroundColor: suggestion.active ? '#f097ee' : '#fff',\r\n                                        display: suggestion ? 'inherit' : 'none',\r\n                                        padding: suggestion ? '5px 10px' : 'none',\r\n                                        borderRadius: '3px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '0.8rem',\r\n                                        width:'100%',\r\n                                    }\r\n                                    return (<div {...getSuggestionItemProps(suggestion, { style })}>\r\n                                        {suggestion.description}\r\n                                    </div>)\r\n\r\n                                })}\r\n                            </div>\r\n\r\n                        </div>\r\n                    }}\r\n                </PlacesAutocomplete>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n","import httpService from './httpService';\r\nimport { utils } from './utils';\r\nimport { storageService } from './asyncStorageService'\r\n\r\n\r\nexport const reviewService = {\r\n    add,\r\n    query,\r\n    remove\r\n};\r\n\r\n\r\nasync function query(filterBy) {\r\n\r\n    if (filterBy) var queryStr = `?tripId=${filterBy.tripId}`;\r\n    // const reviews = await storageService.query(`review`);\r\n    // return reviews.filter(review => review.aboutTrip === filterBy.tripId)\r\n    return httpService.get(`review${queryStr}`);\r\n\r\n}\r\n\r\nfunction remove(reviewId) {\r\n    return httpService.delete(`review/${reviewId}`);\r\n}\r\nasync function add(review) {\r\n    review.createdAt = Date.now();\r\n    const addedReview = await httpService.post(`review`, review);\r\n    return addedReview\r\n}\r\n","import { reviewService } from '../../services/reviewService';\r\n\r\n\r\nexport const reviewActions = {\r\n    loadReviews,\r\n    addReview\r\n}\r\n\r\nfunction loadReviews(tripId) {\r\n    return async dispatch => {\r\n        try {\r\n            const reviews = await reviewService.query(tripId);\r\n            dispatch({ type: 'SET_REVIEWS', reviews });\r\n            return reviews\r\n\r\n        } catch (err) {\r\n            console.log('ReviewActions: err in loadReviews', err);\r\n        }\r\n    };\r\n}\r\n\r\nasync function addReview(review) {\r\n    await reviewService.add(review)\r\n    return async dispatch => {\r\n        try {\r\n            const addedReview = await reviewService.add(review);\r\n            dispatch({ type: 'REVIEW_ADD', review: addedReview });\r\n        }\r\n        catch (err) {\r\n            console.log('ReviewActions: err in addReview', err);\r\n        }\r\n    }\r\n}\r\n","import { withRouter } from 'react-router-dom'\r\nimport { utils } from '../../services/utils'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { reviewActions } from '../../store/actions/reviewActions'\r\n\r\nimport React, { Component } from 'react'\r\n\r\nclass _TripPreview extends Component {\r\n\r\n    async componentDidMount() {\r\n        const reviews = await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        if (!reviews) reviews = []\r\n        this.setState({ reviews })\r\n\r\n    }\r\n\r\n\r\n    handleClick = () => {\r\n        this.props.history.push(`/trip/${this.props.trip._id}/triproute`)\r\n    }\r\n\r\n    getTripPrice = (activities) => {\r\n        let price = activities.reduce((acc, currValue) => {\r\n            acc = acc + currValue.price.amount\r\n            return acc\r\n        }, 0)\r\n        return price\r\n    }\r\n\r\n    getReviewsAvg = () => {\r\n        try {\r\n            const rating = this.state.reviews.reduce((acc, currRev) => {\r\n                if (this.state.reviews.length) acc = acc + (+currRev.rating)\r\n                else acc = 0\r\n                return acc\r\n            }, 0)\r\n            return rating ? (rating / this.state.reviews.length).toFixed(1) : 0\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { trip, addClass } = this.props\r\n        if (!trip) return <p>Loading Trip . . .</p>\r\n        const price = this.getTripPrice(trip.activities)\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n        const style = (this.props.style ? this.props.style : '')\r\n        const reviews = this.getReviewsAvg()\r\n\r\n        return (\r\n            <div style={{ pointerEvents: (style.pointerEvents ? style.pointerEvents : 'inherit') }} onClick={this.handleClick} className={'trip-preview flex column ' + (addClass ? addClass : '')} >\r\n                < div className=\"img-wraper\" >\r\n                    <img src={trip.imgUrl} alt=\"\" />\r\n                </div>\r\n                <div className=\"trip-preview-details\">\r\n                    <h3>{trip.tripName}</h3>\r\n                    <div className=\"flex details-container\">\r\n                        {trip.createdBy && < div className=\"flex align-center column\">\r\n                            <img className=\"user-img\" src={trip.createdBy.imgUrl} alt=\"user-img\" />\r\n                            <p>By: {trip.createdBy.username}</p>\r\n                        </div>}\r\n                        <div className=\"flex justify-between column\">\r\n                            <p><i className=\"fas fa-hourglass-half\"></i>{days} days</p>\r\n                            <p>Est Price: <i className=\"fas fa-dollar-sign\"></i>{price}</p>\r\n                            <div className=\"flex rating-star\">\r\n                                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />\r\n                                <div className=\"flex justify-between\">\r\n                                    {reviews ? <span>{reviews} <span>({this.state.reviews.length} reviews) </span></span> : '(0)'}\r\n                                </div>\r\n\r\n                            </div>\r\n                            <p>{`Trollied by Roi and ${utils.getRandomInt(50, 220)} others`}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadReviews: reviewActions.loadReviews\r\n}\r\n\r\nexport const TripPreview = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripPreview))\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { TripPreview } from './TripPreview'\r\nimport { connect } from 'react-redux';\r\nimport { loadTrips } from '../../store/actions/tripActions';\r\n\r\n\r\nclass _TripList extends Component {\r\n\r\n    async componentDidMount() {\r\n        if (!this.props.trips.length) {\r\n            await this.props.loadTrips()\r\n        }\r\n    }\r\n    render() {\r\n        const { trips, addClass, showModal } = this.props\r\n        if (!trips.length) return <p>Loading Trips . . . </p>\r\n        return (\r\n            <div className={'trip-list trips-container ' + (addClass ? addClass : '')}>\r\n\r\n                {trips.length ? trips.map((trip, idx) =>\r\n                    <TripPreview key={trip._id} trip={trip} showModal={showModal} addClass={addClass} img={utils.getRandomPic()} />\r\n                ) :\r\n                    <TripPreview key={trips._id} trip={trips} addClass={addClass} img={utils.getRandomPic()} />\r\n                }\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const TripList = connect(mapStateToProps, mapDispatchToProps)(_TripList);","import React from 'react';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\n\r\nimport 'swiper/swiper-bundle.css';\r\nimport 'swiper/components/effect-fade/effect-fade.scss';\r\nimport { TripList } from './TripList';\r\nimport { TripPreview } from './TripPreview';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\n\r\nSwiperCore.use([EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y]);\r\n\r\n\r\n\r\nconst coverflow = {\r\n    rotate: 50,\r\n    stretch: 0,\r\n    depth: 100,\r\n    modifier: 2,\r\n    // slideShadows: true,\r\n}\r\n\r\nexport function TripSlider({ trips }) {\r\n\r\n\r\n    return (\r\n        <Swiper\r\n            effect=\"coverflow\"\r\n            slidesPerView={\"auto\"}\r\n            // effectCoverflow={true}\r\n            navigation\r\n            centeredSlides={ true}\r\n            // autoplay={true}\r\n            delay={2500}\r\n            coverflowEffect= {{\r\n                rotate: 30,\r\n                depth: 200\r\n              }}\r\n\r\n        pagination={{ clickable: true }}\r\n        >\r\n\r\n\r\n            {\r\n                trips.map((i, el) => {\r\n                    return <SwiperSlide key={utils.makeId()}>\r\n                        <TripPreview trip={i}  key={i._id} addClass={'slider'} img={utils.getRandomPic()}/> \r\n                    </SwiperSlide>;\r\n                })\r\n            }\r\n        </Swiper >\r\n    );\r\n};","import React from 'react'\r\n\r\nexport function UserFlow() {\r\n    return (\r\n        <div className=\"flex column align-center user-flow\" id=\"userFlow\" >\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Choose a trip</p>\r\n                    <p className=\"flow-content\">Choose from one of our amazing planned trips</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869772/undraw_traveling_t8y2_xnd0ne.svg\" alt=\"choose-travel\" />\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869761/undraw_travel_plans_li01_k6igg6.svg\" alt=\"\" />\r\n                <div className=\"flow-text\">\r\n                    <p className=\"flow-headline\">Personalize it</p>\r\n                    <p className=\"flow-content\">Personalize <span style={{fontWeight:'bold'}}>destinations </span>on Route and <span style={{fontWeight:'bold'}}>activities </span>on Assembly </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Add your friends</p>\r\n                    <p className=\"flow-content\">invite friends to plan together on the same document</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600870015/undraw_social_friends_nsbv_c9ovrw.svg\" alt=\"\" />\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AddTrip } from '../cmps/Home/AddTrip';\r\nimport { TripSlider } from '../cmps/Home/TripSlider';\r\nimport { UserFlow } from '../cmps/Home/UserFlow';\r\nimport { loadTrips } from '../store/actions/tripActions'\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\n\r\n\r\n\r\nclass _HomePage extends Component {\r\n    state = {\r\n        trips: ''\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadTrips()\r\n    }\r\n\r\n    // getTripsForDisplay = () => {\r\n    //     this.props.trips.filter(trip=> trip)\r\n    // }\r\n\r\n\r\n    render() {\r\n        if (!this.props.trips[0]) return <p> </p>\r\n        return (\r\n\r\n            <div className=\"home-page  main-container \">\r\n                <div className=\"home-page-hero full\" >\r\n                    <div className=\"description-section\">\r\n                        <h3>Explore planned trips of professional travelers\r\n                            </h3>\r\n                        <h3>and personalize them</h3>\r\n                        <Link smooth to=\"#userFlow\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'center' })}>\r\n                            <button className=\"styled-button\"> Get Started</button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"main-home-page full\">\r\n                    <div className=\"flow-container\">\r\n                        <div style={{height:'100px'}} ></div>\r\n                        <UserFlow id=\"userFlow\" />\r\n                        <Link smooth to=\"#top-rated-trips\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'start' })}>\r\n                            <button className=\"styled-button\"> Let's Trolly!</button>\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"slideShow-area\" id=\"top-rated-trips\">\r\n                        <div id=\"top-rated-trips\"></div>\r\n                        <h2 className=\"\" >Top rated planned trips</h2>\r\n                        <section className=\"slideShow\" >\r\n                            <TripSlider trips={this.props.trips.slice(0, 4)} />\r\n                        <Link to=\"/trip\"><button className=\"styled-button to-trip-list\"> Show me more</button></Link>\r\n                        </section>\r\n                    </div>\r\n                    <AddTrip />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(_HomePage);","import React, { Component } from 'react'\r\n\r\nexport class TripFilter extends Component {\r\n\r\n\r\n    render() {\r\n        const { onsetFilter, mostOccDests } = this.props\r\n        return (        \r\n            <div className=\"trip-filter flex\" style={this.props.style}>\r\n                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601236322/search_ejr7qx.png\" alt=\"\"/>\r\n                <input autoComplete=\"off\" placeholder=\"Search destination\" className=\"styled-input\" name=\"name\" onChange={this.props.handleInput} list=\"dest-filter\" />\r\n                <datalist onChange={this.props.handleInput} id=\"dest-filter\">\r\n                    {mostOccDests.map(dest => {\r\n                       return <option value={`${dest}`}></option>\r\n                    })}\r\n                </datalist>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { TripFilter } from '../cmps/Home/TripFilter';\r\nimport { TripList } from '../cmps/Home/TripList';\r\nimport { showModal } from '../store/actions/modalActions';\r\nimport { loadTrips } from '../store/actions/tripActions';\r\n\r\n\r\nclass _TripStock extends Component {\r\n    state = {\r\n        filterBy: {\r\n            name: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadTrips(this.state.filterBy)\r\n    }\r\n\r\n    getMostOccDests = () => {\r\n        const { trips } = this.props\r\n        let destinations = [];\r\n        trips.forEach(trip => {\r\n            destinations = destinations.concat(trip.destinations)\r\n        })\r\n\r\n        const numOfOccMap = destinations.reduce((acc, dest) => {\r\n            acc[dest.name] = (acc[dest.name]) ? acc[dest.name] + 1 : 1\r\n            return acc\r\n        }, {})\r\n        \r\n        let numOfOccArr = Object.entries(numOfOccMap)\r\n        numOfOccArr.sort((dest1, dest2) => {\r\n            return dest2[1] - dest1[1]\r\n        })\r\n\r\n        return numOfOccArr.slice(0, 5).map(destOcc => {\r\n            let destName = destOcc[0][0].toLocaleUpperCase() + destOcc[0].substring(1)\r\n            return destName\r\n        })\r\n    }\r\n\r\n    // renderSrcOpt = () => {\r\n\r\n    // }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        const value = target.value;\r\n        this.setState({ filterBy: { ...this.state.filterBy, [field]: value } }, () => {\r\n            this.props.loadTrips(this.state.filterBy)\r\n        });\r\n    }\r\n\r\n    getTripsForDisplay = () => {\r\n        const tripList = this.props.trips.filter(trip => {\r\n            return trip.destinations[0].name.includes(this.state.name)\r\n        })\r\n        return tripList\r\n    }\r\n\r\n    render() {\r\n        const trips = this.props.trips\r\n        const mostOccDests = this.getMostOccDests()\r\n        this.getMostOccDests()\r\n        return (\r\n            <div>\r\n                <h2>All Trips plans</h2>\r\n                <TripFilter mostOccDests={mostOccDests} handleInput={this.handleInput} onsetFilter={this.onsetFilter} />\r\n                <TripList showModal={this.props.showModal} trips={trips} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips,\r\n    showModal\r\n}\r\n\r\nexport const TripStock = connect(mapStateToProps, mapDispatchToProps)(_TripStock);","import React from 'react'\r\nimport { Formik } from 'formik';\r\n\r\n\r\nexport class Login extends React.Component {\r\n    state = {\r\n        msg: ''\r\n\r\n    }\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const { email, password } = ev.target\r\n        const userCreds = { email: email.value, password: password.value }\r\n        const user = await this.props.handleForm(userCreds)\r\n        if (!user) this.setState({ msg: 'wrong username or password' })\r\n        else{\r\n            this.props.closeModal()\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"login-form flex align-center justify-center column\" onSubmit={this.onSubmit} >\r\n                <input className=\"styled-input\" type=\"email\" placeholder=\"email\" name=\"email\"></input>\r\n                <input className=\"styled-input\" type=\"password\" placeholder=\"password\" name=\"password\"></input>\r\n                <button className=\"styled-button\">Login</button>\r\n                <p>not a user? please <span onClick={()=>this.props.handleClick('signup')}>sign up</span></p>\r\n                {this.state.msg && <p>{this.state.msg}</p>}\r\n            </form>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { Formik } from 'formik';\r\n\r\n\r\nexport class Signup extends React.Component {\r\n    state = {\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        imgUrl: 'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    }\r\n    handleChange=(ev)=>{\r\n        const {value,name}=ev.target;\r\n        this.setState({...this.state,[name]:value})\r\n    }\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()\r\n        this.props.handleForm(this.state,'signup',this.props.tripToRed)\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.onSubmit}>\r\n                <input\r\n                    type='text'\r\n                    name='username'\r\n                    value={this.state.username}\r\n                    placeholder='Enter Username'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='email'\r\n                    name='email'\r\n                    value={this.state.email}\r\n                    placeholder='Enter email'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='password'\r\n                    name='password'\r\n                    value={this.state.password}\r\n                    placeholder='Enter password'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <button>Sign Up</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Login } from './Login';\r\nimport { Signup } from './Signup';\r\nimport { signup, login } from '../store/actions/userActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\nimport { loadTrip, addTrip } from '../store/actions/tripActions'\r\nimport { socketService } from '../services/socketService'\r\n\r\nclass _LoginSignupPage extends Component {\r\n    state = {\r\n        login: true\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    handleForm = async (props, action, tripIdToRed) => {\r\n        if (action === 'signup') {\r\n            if (tripIdToRed) {\r\n                const [tripToRed, user] = await Promise.all([this.props.loadTrip(tripIdToRed), this.props.signup(props)])\r\n                tripToRed.members.push({ username: user.username, imgUrl: user.imgUrl, id: user._id })\r\n                await this.props.addTrip(tripToRed)\r\n                socketService.emit('tripToUpdate', tripToRed._id);\r\n\r\n                this.props.closeModal()\r\n                return user\r\n            }\r\n            return await this.props.signup(props)\r\n        } else {\r\n            var user = await this.props.login(props)\r\n            if (!user) return\r\n            return user\r\n        }\r\n    }\r\n    closeModal() {\r\n        this.props.closeModal()\r\n    }\r\n    render() {\r\n        const tripToRed = this.props.tripId\r\n        return (\r\n            this.state.login ? <Login handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                closeModal={() => this.closeModal()} /> :\r\n                <Signup handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                    closeModal={() => this.closeModal()} tripId={this.props.tripId} tripToRed={tripToRed} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    login,\r\n    closeModal,\r\n    showModal,\r\n    loadTrip,\r\n    addTrip\r\n\r\n}\r\n\r\nexport const LoginSignupPage = connect(mapStateToProps, mapDispatchToProps)(_LoginSignupPage);\r\n","function on(eventName, listener) {\r\n    const callListener = ({ detail }) => {\r\n        listener(detail)\r\n    }\r\n    window.addEventListener(eventName, callListener)\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener)\r\n    }\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\n\r\nexport const eventBus = { on, emit }","export const ItemTypes = {\r\n    ACTIVITIE: 'activitie',\r\n    DESTINATION:'destination'\r\n}","\r\nimport React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\n\r\nexport function ActivitiePreview({ act, onRemoveAct, onEdit, destinations, onOpenDetails }) {\r\n\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.ACTIVITIE,\r\n            id: act.id\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n\r\n    \r\n\r\n    // const startTime = utils.getTimeDayStr(act.at)\r\n    // const endTime = utils.getTimeDayStr(act.at + (+act.duration / 2) * 60 * 60 * 1000)\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const isDrag = (isDragging) ? 'is-drag' : ''\r\n    const isLenOne = (act.duration === 1) ? 'len-one' : ''\r\n    const dest= destinations.findIndex(dest => act.destination === dest.name)\r\n\r\n    return (\r\n        <div ref={drag} className={`activity-prev-assembly activity-assembly ${isLenOne} ${isDayHeadClass} ${isFirstCol} ${isDrag}`} style={{ gridRow: `${act.row + 1 || 'auto'}/span ${act.duration}` }} key={utils.makeId()}>\r\n            <div className={'dest-color dest-'+dest}></div>\r\n            <div className=\"activity-name-container\">\r\n            <h5>{act.name}</h5>\r\n            </div>\r\n            <div className=\"activity-assembly-details column\">\r\n                {/* <p>{act.at && `${startTime}-${endTime}`}</p> */}\r\n                {/* <p>{act.destination}</p> */}\r\n                {/* {act.price.amount ? <p>{act.price.currency}{act.price.amount}</p> : ''} */}\r\n                <div className=\"activity-assembly-controls flex\">\r\n                    <button onClick={() => { onEdit(act) }} className=\"edit-activity \"><i className=\"fas fa-edit\"></i></button>\r\n                    <button onClick={() => { onOpenDetails(act) }}><i className=\"fas fa-info\"></i></button>\r\n                    <button onClick={() => { onRemoveAct(act.id) }} className=\"delete-activity \"><i className=\"fas fa-trash\"></i></button>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n","\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems'\r\nexport function OpenDaySlot({ act, getRowIdx, onDragMove }) {\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.ACTIVITIE,\r\n        drop: (item, monitor) => {\r\n            onDragMove(act, item.id)\r\n        },\r\n\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n\r\n    const rowIdx = null\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const _isOver = (isOver) ? 'is-over' : ''\r\n    // if (isOver) {\r\n    //     console.log(act);\r\n    // }\r\n   \r\n    return (\r\n        <React.Fragment>\r\n            {act.literalDay && <div  className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n            {!act.literalDay && <div ref={drop} className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { ActivitiePreview } from './ActivitiePreview'\r\nimport { OpenDaySlot } from './OpenDaySlot'\r\n\r\nexport function DayActivities({ day, getRowIdx, onRemoveAct, onEdit, destinations, onDragMove, onOpenDetails }) {\r\n\r\n    function reCalcPos(day) {\r\n        let newDay = []\r\n        let i = 0;\r\n        while (i < 35) {\r\n            if (!day[i].id) {\r\n                newDay.push(day[i])\r\n                i++\r\n\r\n            } else {\r\n                newDay.push(day[i])\r\n                i += day[i].duration\r\n            }\r\n        }\r\n        return newDay\r\n    }\r\n    let newDay = reCalcPos(day)\r\n\r\n    var isAfterActs = false;\r\n    var currActsLength = 0\r\n    return (\r\n        <div className=\"day-list-assembly\">\r\n            {newDay.map((act, idx, day) => {\r\n                if (act.id) {\r\n                    isAfterActs = true\r\n                    currActsLength += act.duration\r\n                    return <ActivitiePreview\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onOpenDetails={onOpenDetails} />\r\n\r\n                } else {\r\n                    return <OpenDaySlot\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onDragMove={onDragMove} />\r\n                }\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function DayTimeLine() {\r\n\r\n\r\n    return (\r\n        <div className=\"time-line-assembly\">\r\n\r\n            {(function () {\r\n                let times = []\r\n                for (let i = 0; i < 35; i++) {\r\n                    let time = <div key={utils.makeId()} className=\"time-assembly\">\r\n                        {(i % 2 === 0) && <span>{`${7 + i / 2}:00`}</span>}\r\n                    </div>\r\n                    times.push(time)\r\n                }\r\n                return times\r\n\r\n            })()}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n// var gFreeDays = 14\r\nexport function DestNamePrev({ dest, updateFreeDays, freeDays, destinations }) {\r\n    \r\n    const idx = destinations.findIndex(_dest => _dest.name === dest.name)\r\n    const display = (dest.duration) ? '' : 'none'\r\n    return (\r\n\r\n        <div className={`dest-name-preview dest-${idx} `} style={{ gridColumn: `span ${dest.duration}`, display: display }}>\r\n            {dest.name}\r\n        </div>\r\n    )\r\n}\r\n","import { utils } from '../../services/utils'\r\nimport { DestNamePrev } from './DestNamePrev'\r\nimport React from 'react'\r\n\r\n\r\nexport function DestinationsHeader({ destinations, allDestinations, daysCount }) {\r\n    // destinations.sort((dest1, dest2) => dest1.time.startDate - dest2.time.startDate)\r\n    return (\r\n        <div className=\"destinations-header\" style={{gridTemplateColumns: `repeat(${daysCount*2}, minmax(25px, 1fr))`}}>\r\n            {destinations.map((dest, idx) => {\r\n                return <DestNamePrev destinations={allDestinations} idx={idx}  key={utils.makeId()} dest={dest} />\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nimport { eventBus } from '../../services/eventBusService';\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { DayActivities } from './DayActivities'\r\nimport { DayTimeLine } from './DayTimeLine';\r\nimport { DestinationsHeader } from './DestinationsHeader';\r\n\r\nexport class TripAssembly extends Component {\r\n\r\n    state = {\r\n        activities: null,\r\n        weekMat: null,\r\n        page: 0,\r\n        startDate: null,\r\n        endDate: null,\r\n        tripLength: '',\r\n        actsToDisplay: null,\r\n        minDestinations: null,\r\n        daysCount: 7\r\n    }\r\n\r\n    async componentDidMount() {\r\n        eventBus.on('markDay', (day) => {\r\n            return\r\n        })\r\n        this.initiateAssembly()\r\n    }\r\n\r\n    initiateAssembly = async () => {\r\n        const { destinations, activities } = this.props.trip\r\n        const windowWidth = window.window.innerWidth\r\n        let { daysCount } = this.state\r\n        if (windowWidth <= 900) {\r\n            daysCount = 5\r\n        }\r\n        if (windowWidth <= 650) {\r\n            daysCount = 3\r\n        }\r\n        if (windowWidth <= 530) {\r\n            daysCount = 2\r\n        }\r\n\r\n        let startDate, endDate\r\n        [startDate, endDate] = [destinations[0].startDate, destinations[destinations.length - 1].endDate]\r\n        const tripLength = utils.calculateDays(startDate, endDate)\r\n        await this.setState({ tripLength, startDate, endDate, activities, daysCount })\r\n        await this.loadWeekMat()\r\n        await this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n\r\n    loadWeekMat = () => {\r\n        const { activities } = this.props.trip;\r\n        const actsDaysMap = this.mapActsToDays(activities);\r\n        const WeeklyActsToDisplay = actsDaysMap.slice(this.state.page * this.state.daysCount, this.state.page * this.state.daysCount + this.state.daysCount)\r\n        const destTimeStamp = WeeklyActsToDisplay[0][1][0].at\r\n        const startDate = utils.getDateDay(destTimeStamp)\r\n        let weekMat = utils.createMat(this.state.daysCount, 35);\r\n        let col = 0\r\n\r\n        let prevDate = WeeklyActsToDisplay[0][0]\r\n        for (let i = 0; i < WeeklyActsToDisplay.length; i++) {\r\n            let currDate, currDayActs\r\n            [currDate, currDayActs] = [WeeklyActsToDisplay[i][0], WeeklyActsToDisplay[i][1]];\r\n            if (prevDate > currDate) {\r\n                currDate += this.getDaysInMonth(destTimeStamp)\r\n            }\r\n            prevDate = currDate\r\n            col = currDate - startDate\r\n            currDayActs.forEach(act => {\r\n                if (!act.freeDay) {\r\n                    let row = this.getRowIdx(act.at)\r\n                    act = { ...act, col, row }\r\n                    weekMat[row][col] = act\r\n                }\r\n            })\r\n        }\r\n        weekMat = this.showDaysName(destTimeStamp, weekMat)\r\n        this.setState({ weekMat, actsToDisplay: WeeklyActsToDisplay })\r\n    }\r\n\r\n    onRemoveAct = (actId) => {\r\n        this.props.showModal('removeActivity', { removeAct: this.removeAct, actId, })\r\n    }\r\n\r\n    removeAct = async (actId) => {\r\n        let { activities } = this.state;\r\n        activities = await activities.filter((_act => _act.id !== actId))\r\n        await this.props.updateTripAct(activities)\r\n        await this.setState({ activities })\r\n        await this.props.closeModal()\r\n    }\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.trip === this.props.trip) return\r\n        this.initiateAssembly()\r\n\r\n    }\r\n\r\n\r\n\r\n    showDaysName(startTime, mat) {\r\n        for (let j = 0; j < this.state.daysCount; j++) {\r\n            const _time = startTime + j * 24 * 60 ** 2 * 1000\r\n            const time = new Date(_time)\r\n            mat[0][j] = { duration: 1, literalDay: utils.getWeekDay(_time), date: time.toLocaleDateString(), time }\r\n        }\r\n        return mat\r\n    }\r\n\r\n\r\n\r\n\r\n    isOccTimeSlot = (activity) => {\r\n        const { activities } = this.state\r\n        const currStartTime = activity.at\r\n\r\n        const currEndTime = currStartTime + activity.duration * 30 * 60 * 1000\r\n        for (let i = 0; i < activities.length; i++) {\r\n            const act = activities[i]\r\n            const checkedStartTime = act.at\r\n            const checkedEndTime = act.at + act.duration * 30 * 60 * 1000\r\n            if (activity.id && activity.id === act.id) continue\r\n\r\n            if (\r\n                (((currStartTime > checkedStartTime) && (currStartTime < checkedEndTime)) ||\r\n                    ((currEndTime > checkedStartTime) && (currEndTime < checkedEndTime))) ||\r\n\r\n                ((checkedStartTime > currStartTime) && (checkedStartTime < currEndTime)) ||\r\n                ((checkedEndTime > currStartTime) && (checkedEndTime < currEndTime))\r\n\r\n            ) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    mapActsToDays = () => {\r\n        const { activities, destinations } = this.props.trip;\r\n        activities.sort((act1, act2) => act1.at - act2.at)\r\n        let map = activities.reduce((acc, activity) => {\r\n\r\n            let day = utils.getDateDay(activity.at)\r\n            if (!acc[day]) acc[day] = []\r\n            acc[day].push(activity)\r\n            return acc\r\n\r\n        }, {})\r\n        map = this.sortDateMap(map)\r\n        return map\r\n    }\r\n\r\n\r\n\r\n    getCol = (mat, col) => {\r\n        const MatColumn = (_mat, n) => _mat.map(x => x[n]);\r\n        return MatColumn(mat, col);\r\n    }\r\n\r\n    sortDateMap(map) {\r\n        let arrSorted = [];\r\n        for (let day in map) {\r\n\r\n            arrSorted.push([+day, map[day]]);\r\n        }\r\n        const linearDays = this.getLinearTripDays();\r\n        for (let i = 0; i < linearDays.length; i++) {\r\n            let currDay = utils.getDateDay(linearDays[i])\r\n            let isInclude = arrSorted.find((day) => day[0] === currDay)\r\n            if (!isInclude) {\r\n                arrSorted.push([currDay, [{ at: linearDays[i], freeDay: true }]])\r\n            }\r\n\r\n        }\r\n        arrSorted.sort(function (day1, day2) {\r\n            return day1[1][0].at - day2[1][0].at;\r\n        });\r\n\r\n        return arrSorted\r\n\r\n    }\r\n    onEdit = (act) => {\r\n        this.props.showModal('editActivity', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n    }\r\n\r\n    onOpenDetails = (act) => {\r\n        this.props.showModal('activityDetails', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n\r\n    }\r\n\r\n    onDragMove = ({ pos }, id) => {\r\n\r\n        const activity = this.state.activities.find(act => act.id === id)\r\n        const dest = this.props.trip.destinations.find(_dest => _dest.name === activity.destination)\r\n\r\n        let newTime = this.getTimeFromIdx(pos)\r\n        // let check = new Date(newTime)\r\n        // let endD = new Date(dest.startDate)\r\n        // let startD = new Date(dest.endDate)\r\n        let destStart = utils.setToHourMinuets(dest.startDate, 6, 0)\r\n        let desEnd = utils.setToHourMinuets(dest.endDate, 23, 59)\r\n        if (newTime < destStart || newTime > desEnd) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'Cannot move activities to another destination!' })\r\n            return\r\n        }\r\n        if (!newTime) return\r\n        const actCopy = { ...activity, at: newTime }\r\n\r\n        if (this.isOccTimeSlot(actCopy)) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n\r\n        activity.at = newTime\r\n        this.saveAct(activity)\r\n    }\r\n\r\n    getTimeFromIdx = ({ i, j }) => {\r\n        const { page } = this.state\r\n        const currWeekDates = this.getLinearTripDays()\r\n        if (j + page * this.state.daysCount >= currWeekDates.length) {\r\n\r\n            return false\r\n        }\r\n\r\n\r\n        const currDayDate = new Date(currWeekDates[j + page * this.state.daysCount])\r\n        if (i % 2 !== 0) {\r\n            currDayDate.setHours(7 + (i - 1) / 2, 0)\r\n        } else {\r\n            currDayDate.setHours(6 + i / 2, 30)\r\n\r\n        }\r\n\r\n        return currDayDate.getTime()\r\n    }\r\n\r\n    saveAct = (act) => {\r\n        let { activities } = this.state;\r\n        if (act.id) {\r\n            activities = activities.map(_act => {\r\n                return (_act.id === act.id) ? act : _act\r\n            })\r\n        } else {\r\n            act.id = utils.makeId()\r\n            activities.push(act)\r\n        }\r\n        this.props.closeModal()\r\n\r\n        this.props.updateTripAct(activities)\r\n        this.setState({ activities })\r\n        this.loadWeekMat()\r\n    }\r\n\r\n\r\n    getDaysInMonth(timeStamp) {\r\n        let time = new Date(timeStamp)\r\n        let year, month;\r\n        [month, year] = [time.getMonth(), time.getFullYear()]\r\n\r\n        return new Date(year, month + 1, 0).getDate();\r\n    }\r\n\r\n\r\n    getWeekDests = () => {\r\n        const { page } = this.state\r\n        var { destinations } = this.props.trip\r\n        const linearDays = this.getLinearTripDays()\r\n        let minDay = linearDays[page * (this.state.daysCount)]\r\n        let maxDay = linearDays[(page * (this.state.daysCount)) + ((this.state.daysCount - 1) >= linearDays.length) ? (linearDays.length - 1) : (this.state.daysCount - 1)]\r\n        minDay = utils.setToHourMinuets(minDay, 7, 0)\r\n        maxDay = utils.setToHourMinuets(maxDay, 23, 59)\r\n        return destinations.filter(dest => {\r\n            return ((dest.startDate >= minDay && dest.startDate <= maxDay) ||\r\n                (dest.endDate >= minDay && dest.endDate <= maxDay)\r\n            )\r\n\r\n        })\r\n    }\r\n\r\n    getMinDestinations = () => {\r\n\r\n        const destinations = this.getWeekDests()\r\n        const { page } = this.state\r\n        const minDestinations = []\r\n        const destsHeadLength = this.mapDestsToHeaderLength()\r\n        const destsNames = Object.keys(destsHeadLength)\r\n        const destsLength = Object.values(destsHeadLength)\r\n        for (let i = 0; i < destsNames.length; i++) {\r\n\r\n            const time = destinations.find(dest => {\r\n                return dest.name === destsNames[i]\r\n            })\r\n\r\n            minDestinations.push({ name: destsNames[i], duration: destsLength[i], time })\r\n        }\r\n        minDestinations.sort((dest1, dest2) => dest1.time.startDate - dest2.time.startDate)\r\n        return minDestinations\r\n\r\n\r\n    }\r\n\r\n\r\n    mapDestsToHeaderLength = () => {\r\n        const { trip } = this.props\r\n        const { page } = this.state\r\n        const { destinations } = this.props.trip\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination, idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate), idx }\r\n        })\r\n        const currWeekDests = utils.calculateDates(tripStart, tripEnd, destinationsTimes).slice(page * this.state.daysCount, page * this.state.daysCount + this.state.daysCount)\r\n        let currDestName;\r\n        let currDest;\r\n        return currWeekDests.reduce((acc, { td }, idx) => {\r\n\r\n            if (td.full || td.full === 0) {\r\n                currDest = destinations[td.full]\r\n                currDestName = currDest.name\r\n                acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n            } else {\r\n                if (((td.start || td.start === 0) && (!td.end && td.end !== 0))) {\r\n                    currDest = destinations[td.start]\r\n                    currDestName = currDest.name\r\n                    acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n                } else {\r\n\r\n                    if (td.start || td.start === 0) {\r\n                        currDest = destinations[td.start]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n                    if (td.end || td.end === 0) {\r\n                        currDest = destinations[td.end]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n            return acc\r\n        }, {})\r\n\r\n    }\r\n\r\n    getLinearTripDays = () => {\r\n        const linearDays = []\r\n        let { startDate, tripLength } = this.state\r\n        for (let i = 0; i < tripLength; i++) {\r\n            linearDays.push(startDate + i * 24 * 60 * 60 * 1000)\r\n        }\r\n        return linearDays\r\n    }\r\n\r\n    getDestsWithActs = (destinations, allActs) => {\r\n        destinations = destinations.filter((dest) => {\r\n            return this.isActInDests(dest, allActs)\r\n        })\r\n        return destinations\r\n\r\n    }\r\n\r\n    isActInDests(dest, allActs) {\r\n        for (let acts of allActs) {\r\n            let currActs = acts[1]\r\n            for (let act of currActs) {\r\n                if (act.destination === dest.name) return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    getRowIdx = (timeStamp) => {\r\n        const time = new Date(timeStamp)\r\n        const hour = time.getHours()\r\n        const minuets = time.getMinutes()\r\n        let slot;\r\n        if (minuets === 0) {\r\n            slot = (hour - 6) * 2 - 1\r\n\r\n        } else {\r\n            slot = (hour - 6) * 2\r\n        }\r\n\r\n        return slot\r\n    }\r\n\r\n\r\n    onTogglePage = async (direction) => {\r\n        const { tripLength, page } = this.state\r\n        let pageCount = Math.ceil(tripLength / this.state.daysCount)\r\n        let newPage;\r\n        if (direction === 'next') {\r\n            newPage = (page + 1) % pageCount\r\n\r\n        } else {\r\n            newPage = (page - 1 < 0) ? pageCount - 1 : page - 1\r\n        }\r\n        await this.setState({ page: newPage })\r\n        await this.loadWeekMat()\r\n        this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n    getDayNumOfAct = (day) => {\r\n        return day.reduce((acc, act) => {\r\n            acc += (act.id) ? 1 : 0\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    getTwoDig = (num) => {\r\n        let numStr = num + ''\r\n        return (numStr.length === 1) ? '0' + numStr : numStr\r\n    }\r\n\r\n    renderDayActivities(mat) {\r\n        const actPreviews = []\r\n\r\n        for (let i = 0; i < this.state.daysCount; i++) {\r\n\r\n            var col = this.getCol(mat, i)\r\n            actPreviews.push(<DayActivities onDragMove={this.onDragMove} getTimeFromIdx={this.getTimeFromIdx} destinations={this.props.trip.destinations} onEdit={this.onEdit} onOpenDetails={this.onOpenDetails} onRemoveAct={this.onRemoveAct} getRowIdx={this.getRowIdx} key={utils.makeId()} day={col} />\r\n            )\r\n        }\r\n\r\n        return actPreviews\r\n    }\r\n\r\n\r\n    render() {\r\n        const { weekMat, minDestinations, daysCount } = this.state\r\n        const { destinations } = this.props.trip\r\n        if (!weekMat || !minDestinations) return <div>Loading...</div>\r\n        const dayActs = this.renderDayActivities(weekMat)\r\n        this.mapDestsToHeaderLength()\r\n        return (\r\n            <div className=\"assembly-container\">\r\n                <section className=\"paging-assembly\">\r\n                    <div className=\"toggle-page\" onClick={() => this.onTogglePage('prev')}>{'<'}</div>\r\n                    <span>{this.state.page + 1}</span>\r\n                    <div className=\"toggle-page\" onClick={() => this.onTogglePage('next')}>{'>'}</div>\r\n                </section>\r\n\r\n                <DestinationsHeader daysCount={daysCount} allDestinations={destinations} destinations={minDestinations} />\r\n                <div className={'trip-assembly-main full'} style={{ gridTemplateColumns: `repeat(${daysCount}, minmax(70px, 1fr))` }}>\r\n                    <DayTimeLine />\r\n                    {dayActs}\r\n                </div >\r\n                <button className='editActivity styled-button' onClick={() => this.props.showModal('editActivity', { saveAct: this.saveAct, isOccTimeSlot: this.isOccTimeSlot, act: null, destinations: this.props.trip.destinations })}>add activity</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react'\r\nexport function MembersPreview({ member }) {\r\n    const url=member.imgUrl||'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    return (\r\n        <div className=\"member-preview\" >\r\n            <img className=\"image-preview\" src={url}></img>\r\n            <div className=\"is-active-circle\"></div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { utils } from '../../services/utils'\r\n \r\nimport { MembersPreview } from './MemberPreview'\r\n\r\n\r\nexport class TripNavBar extends React.Component {\r\n    state={\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n    }\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.trip!==this.props.trip){\r\n            this.setState({ trip: this.props.trip})\r\n        }\r\n        \r\n    }\r\n    render(){\r\n        if(!this.props.trip) return <div>1</div>\r\n        return (\r\n            <div className=\"trip-navbar flex align-center justify-center full\">\r\n                <div className=\"members-preview flex\">\r\n                    {this.props.trip.members.map(member=><MembersPreview  key={utils.makeId()} member={member}/>)}\r\n                </div>\r\n                <div className=\"trip-routes flex justify-center\">\r\n                    <NavLink to={`/trip/${this.props.trip._id}/triproute`}>Route</NavLink>\r\n                    <NavLink to={`/trip/${this.props.trip._id}/tripassembly`}>Assembly</NavLink>\r\n                </div>\r\n                <button className=\"ustyled-button add-user-btn\" onClick={() => this.props.showModal('add-member', this.props.trip._id )}><i className=\"fas fa-user-plus\"></i></button>\r\n                {/* <a className='see' onClick={toggleSettings}>settings</a> \r\n                <TripSettings settingsOpen={settingsOpen} tripId={trip._id}/>  */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { GooglePlaces } from '../MainCmps/GooglePlaces'\r\nimport {\r\n    geocodeByAddress,\r\n    // geocodeByPlaceId,\r\n    getLatLng,\r\n} from 'react-places-autocomplete';\r\n\r\nexport class AddDestination extends React.Component {\r\n    state = {\r\n        addDestOpen: false,\r\n        destination: {\r\n            name: '',\r\n            days: '',\r\n            location: null\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.setState({\r\n            destination: {\r\n                name: '',\r\n                days: '',\r\n                location: null\r\n                // location: utils.getRandomLatLng()\r\n            }\r\n        })\r\n    }\r\n\r\n    // onAddDestination = () => {\r\n    //     this.setState({ addDestination: !this.state.addDestination })\r\n    // }\r\n\r\n    handleAddress = (name) => {\r\n        console.log(name);\r\n        this.setState({ destination: { ...this.state.destination, name } }, console.log(this.state))\r\n    }\r\n\r\n    handleSelect = async (value) => {\r\n        console.log(value);\r\n        try {\r\n            const results = await geocodeByAddress(value);\r\n            const latlng = await getLatLng(results[0])\r\n            this.setState({ destination: { ...this.state.destination, location: latlng, name: value } }, () => { console.log(this.state) })\r\n\r\n        }\r\n        catch (err) {\r\n            console.log(err, 'err');\r\n        }\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const { name, value } = ev.target;\r\n        this.setState({ destination: { ...this.state.destination, [name]: value } })\r\n\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        this.toggleAddDestination()\r\n        this.props.addDestination(this.state.destination)\r\n\r\n    }\r\n    toggleAddDestination = () => {\r\n        this.setState({ addDestOpen: !this.state.addDestOpen })\r\n    }\r\n\r\n    render() {\r\n        const addDestOpen = this.state.addDestOpen ? 'form-open' : ''\r\n        return (\r\n            <React.Fragment>\r\n                <i className=\"fas fa-plus add-destination-button\" onClick={this.toggleAddDestination}></i>\r\n                <div className={`add-destination column ${addDestOpen}`}>\r\n                    <div className=\"styled-header\">Add destination</div>\r\n                    <form onSubmit={this.onSubmit} className={`add-destination-form  `}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Enter destination\"\r\n                            // className=\"styled-input\"\r\n                            name=\"name\"\r\n                            value={this.state.destination.name}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        {/* <GooglePlaces\r\n                            handleSelect={this.handleSelect}\r\n                            handleAddress={this.handleAddress}\r\n                            address={this.state.destination.name}\r\n                            location={this.state.destination.location}\r\n                        /> */}\r\n\r\n\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Number of days\"\r\n                            // className=\"styled-input\"\r\n                            name=\"days\"\r\n                            value={this.state.destination.days}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        <button className=\"styled-button\">Add!</button>\r\n                    </form>\r\n                    <div className=\"add-destination-footer\"></div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n\r\n\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function WeekPreview({ dates,showDay }) {\r\n    function hotDog(date) {\r\n        if (!date.td) return\r\n        const keys = Object.keys(date.td)\r\n        return keys.map(key => {\r\n            const className = `dest-${date.td[key]} ${key}`\r\n            return <div key={utils.makeId()} className={className}></div>\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <tr key={utils.makeId()}>\r\n            {dates.map((date, idx) => <td onClick={()=>showDay(date)} className={`${!date.td?'faded':''}`} key={utils.makeId()}>{new Date(date.day).getDate()}{hotDog(date)}</td>)}\r\n        </tr>\r\n    )\r\n\r\n}\r\n","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { WeekPreview } from './WeekPreview'\r\n\r\n\r\nexport function RouteCalendar({ trip,showDay }) {\r\n\r\n    function generateCalendar() {\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination,idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate) , idx }\r\n        })\r\n        const calendarData = calculateDates(tripStart, tripEnd, destinationsTimes)\r\n        const fullCalendarData = getDaysAround(calendarData, tripStart, tripEnd)\r\n        return fullCalendarData\r\n    }\r\n    function getDaysAround(data, start, end) {\r\n        let fullCalendarData = getFirstSunday(start, data)\r\n        fullCalendarData = getLastSaturday(end, data)\r\n        return fullCalendarData\r\n\r\n    }\r\n\r\n    function getFirstSunday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() > 0) {\r\n            currDay = new Date(currDay.getTime() - (1000 * 60 * 60 * 24))\r\n            calendarData.unshift({ day: currDay })\r\n        }\r\n        return calendarData\r\n\r\n    }\r\n    function getLastSaturday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() < 6) {\r\n            currDay = new Date(currDay.getTime() + (1000 * 60 * 60 * 24))\r\n            calendarData.push({ day:currDay })\r\n        }\r\n        return calendarData\r\n    }\r\n\r\n\r\n\r\n    function renderTable(data) {\r\n        const weekCmps = []\r\n        if (data.length % 7 !== 0) return null\r\n        let weeksCount = data.length / 7;\r\n        while (weeksCount) {\r\n            weekCmps.push(<WeekPreview showDay={showDay} key={utils.makeId()} dates={data.splice(0, 7)}  />)\r\n            weeksCount--\r\n        }\r\n        return weekCmps\r\n\r\n    }\r\n\r\n    function calculateDates(start, end, destinations) {\r\n        let nextDay = new Date(start)\r\n        let dates = [{ day: nextDay, td:{'start':0} }]\r\n        while (nextDay.getDate() !== new Date(end).getDate()) {\r\n            nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n            dates.push({ day: nextDay, td:''})\r\n            destinations.forEach(dest=>{\r\n                if(dest.start.getDate()===nextDay.getDate()&& dest.start.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'start':dest.idx}\r\n                }else if(dest.start<nextDay && nextDay.setHours(12)<dest.end.setHours(11) ){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'full':dest.idx}\r\n                }else if(dest.end.getDate()===nextDay.getDate()&& dest.end.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'end':dest.idx}\r\n                }\r\n            })\r\n        }\r\n        return dates\r\n    }\r\n\r\n\r\n    const calendarData = generateCalendar()\r\n    return (\r\n        <table className=\"route-calendar\">\r\n            <thead className=\"table-header\">\r\n                <tr >\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                    <th>\r\n                        M\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        W\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        F\r\n                    </th>\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                </tr>\r\n\r\n            </thead>\r\n            <tbody>\r\n                {renderTable(calendarData) || 'w'}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\n\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function RouteTimeLinePreview({ destination, idx, isLast, updateDestinations}) {\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.DESTINATION,\r\n            id: idx\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            if(item.id===idx)return\r\n            updateDestinations(item.id, idx)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    if(isDragging===true){\r\n    }\r\n\r\n    const _isOver = (isOver)?'is-dragging':''\r\n    const letFire = isDragging? 'on':'';\r\n    return (\r\n        <React.Fragment>\r\n            { <div className={`fire-ring ${letFire}`}></div>}\r\n            <div ref={drop} className=\"time-line-area flex align-center\">\r\n                <div className=\"route-time-line-context flex align-center \">\r\n                    <div ref={drag} className={`index-ball dest-${idx} flex align-center justify-center  ${_isOver} `} ><p>{idx + 1}</p></div>\r\n                    <div className=\"time-line-text\">\r\n                        <p>{destination.name}</p>\r\n                        <p>{utils.calculateDays(destination.startDate, destination.endDate) - 1} Nights</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            { !isLast && <div className=\"line\"></div>}\r\n        </React.Fragment>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { RouteTimeLinePreview } from './RouteTimeLinePreview'\r\n\r\nexport function RouteTimeLine({ trip, updateDestinations }) {\r\n    // export class RouteTimeLine extends React.Component {\r\n  \r\n    return (\r\n        <div  className=\"route-time-line\">\r\n            {trip.destinations.map((destination, idx) => {\r\n                return (\r\n                    <RouteTimeLinePreview\r\n                        key={utils.makeId()}\r\n                        destination={destination}\r\n                        idx={idx}\r\n                        isLast={(idx + 1) === trip.destinations.length ? true : false}\r\n                        updateDestinations={updateDestinations}\r\n                    />)\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","// import { GoogleApiWrapper } from 'google-maps-react';\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { MembersPreview } from '../TripApp/MemberPreview';\r\nimport { AddDestination } from './AddDestiantion';\r\nimport { RouteCalendar } from './RouteCalendar'\r\nimport { RouteTimeLine } from './RouteTimeLine'\r\n\r\nexport function TripRoute({ trip, updateDestinations, showModal, addDestination, toggleChat,  showDay }) {\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            updateDestinations(item.id, -1)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    return (\r\n        <div className=\"trip-route flex column\">\r\n            <div className=\"members-preview flex justify-between align-center\">\r\n                {trip.members.map((member, idx) => <MembersPreview key={idx} member={member} />)}\r\n                <button className=\"ustyled-button add-user-btn\" onClick={() => showModal('add-member', trip._id)}><i className=\"fas fa-user-plus \"></i></button>\r\n            </div>\r\n            <RouteCalendar trip={trip} showDay={showDay} />\r\n            <div className=\"all-destinations-area\">\r\n                <div className=\"trip-bar-icons trip-bar-destinations-icons flex justify-between\">\r\n                    <AddDestination addDestination={addDestination} />\r\n                    <i ref={drop} className={`fas fa-trash `}></i>\r\n\r\n                </div>\r\n                <RouteTimeLine trip={trip} updateDestinations={updateDestinations}  />\r\n            </div>\r\n            <div className=\"trip-bar-icons flex justify-between flex1 align-end\">\r\n                <i className=\"fas fa-sms\"></i>\r\n                <i className=\"fas fa-comments\" onClick={toggleChat} ></i>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { socketService } from '../../services/socketService';\r\n\r\nclass _Chat extends Component {\r\n    state = {\r\n        msg: {\r\n            from: this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler',\r\n            txt: ''\r\n        },\r\n        msgs: [],\r\n        isTyping: ''\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        socketService.on('chat addMsg', this.addMsg);\r\n        socketService.on('isTyping', this.userTyping);\r\n        socketService.on('notTyping', this.userTyping);\r\n\r\n        // socketService.emit('chat history');\r\n        // socketService.on('load history', this.loadHistory)\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('chat addMsg', this.addMsg);\r\n        socketService.off('isTyping', this.userTyping);\r\n        socketService.off('notTyping', this.userTyping);\r\n\r\n\r\n        // socketService.off('chat history', this.loadHistory)\r\n        socketService.terminate();\r\n    }\r\n    loadHistory = history => {\r\n        this.setState({ msgs: history || [] });\r\n    }\r\n    addMsg = newMsg => {\r\n        this.setState(prevState => ({ msgs: [...prevState.msgs, newMsg] }));\r\n    }\r\n    sendMsg = ev => {\r\n        ev.preventDefault();\r\n        socketService.emit('chat newMsg', this.state.msg);\r\n        socketService.emit(\"stopTyping\", \"\");\r\n        // this.addMsg(this.state.msg)//remove\r\n        const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n        this.setState({ msg: { from: user, txt: '' } });\r\n    }\r\n    userTyping = isTyping => {\r\n        this.setState({ isTyping });\r\n    }\r\n\r\n    msgHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        if ((value.trim()).length > 0) {\r\n            const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n            socketService.emit('user typing', user);\r\n\r\n        }\r\n        else {\r\n            socketService.emit(\"stopTyping\", \"\");\r\n        }\r\n        this.setState(prevState => {\r\n            return {\r\n                msg: {\r\n                    ...prevState.msg,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        \r\n        \r\n        return (\r\n            <div className={`chat-container flex column  ${this.props.chatOpen ? 'open' : ''}`}>\r\n                <div className=\"chat-header styled-header\">\r\n                    {this.props.trip.destinations[0].name} Chat\r\n                </div>\r\n\r\n                <ul className=\"chat-history\">\r\n                    {this.state.msgs.map((msg, idx) => (\r\n                        <li key={idx}>\r\n                            <div className=\"message-data\">{this.props.loggedInUser ? ((this.props.loggedInUser.username === msg.from) ? 'Me' : msg.from) : ((msg.from === 'Traveler') ? 'Traveler' : msg.from)}</div>\r\n\r\n\r\n\r\n                            <div className=\"message\">{msg.txt}</div>\r\n\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                {this.props.loggedInUser ? \r\n                ((this.state.isTyping && this.state.isTyping !== this.props.loggedInUser.username) ? <p>{this.state.isTyping} is Typing</p> : '') \r\n                : ((this.state.isTyping && !this.state.msg.txt.trim().length) ? <p>{this.state.isTyping} is Typing</p> : '')}\r\n\r\n\r\n                <form className=\"chat-send flex align-center\" onSubmit={this.sendMsg}>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={this.state.msg.txt}\r\n                        onChange={this.msgHandleChange}\r\n                        name=\"txt\"\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"New message\"\r\n\r\n                    />\r\n                    <button><i className=\"far fa-paper-plane\"></i></button>\r\n                </form>\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat);","import React from 'react'\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\n// const API_KEY = 'AIzaSyBXIyfwpDtmz9fLAQI-MUqWuhQtc-GQYoo'\r\n// const API_KEY =''\r\n\r\nclass _MapContainer extends React.Component {\r\n    state = {\r\n        bounds: '',\r\n        markers: [],\r\n        selectedPlace: '',\r\n        activeMarker: {},\r\n        showingInfoWindow: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const bounds = new this.props.google.maps.LatLngBounds();\r\n        const markers = [];\r\n        for (var i = 0; i < this.props.markers.length; i++) {\r\n            bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\r\n            markers.push(this.props.markers[i])\r\n        }\r\n        const BASE_IMG_URL = 'https://res.cloudinary.com/roidinary/image/upload/c_scale,w_20/'\r\n        const imgs = [\r\n            `${BASE_IMG_URL}v1600380972/locationVector1_xickq3.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector2_jpgbc9.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector3_izhosm.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector4_idbol0.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector5_jjqnfo.png`,\r\n            `${BASE_IMG_URL}v1600381638/locationVector6_nvbbsq.png`\r\n        ]\r\n        this.setState({ bounds, markers, imgs })\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.markers !== prevProps.markers) {\r\n            const bounds = new this.props.google.maps.LatLngBounds();\r\n            for (var i = 0; i < this.props.markers.length; i++) {\r\n                bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\r\n            }\r\n            if (this.state.markers.length > 1&& this.state.map) this.state.map.fitBounds(this.state.bounds)\r\n            else{\r\n                if(this.state.map){\r\n                    this.state.map.panTo(this.props.markers[0].location)\r\n                    this.state.map.setZoom(10)\r\n\r\n                }\r\n            } \r\n            this.setState({ markers: this.props.markers, bounds })\r\n        }\r\n    }\r\n    onMarkerClick = (props, marker, e) =>\r\n        this.setState({\r\n            selectedPlace: props,\r\n            activeMarker: marker,\r\n            showingInfoWindow: true\r\n        });\r\n    onMapClicked = (props) => {\r\n        if (this.state.showingInfoWindow) {\r\n            this.setState({\r\n                showingInfoWindow: false,\r\n                activeMarker: null\r\n            })\r\n        }\r\n    };\r\n\r\n    getMarkers() {\r\n        return this.state.markers.map((marker, idx) => {\r\n            return (<Marker key={utils.makeId()}\r\n                onClick={this.onMarkerClick}\r\n                title={'The marker`s title will appear as a tooltip.'}\r\n                name={marker.name}\r\n                position={marker.location}\r\n                icon={this.state.imgs[idx]}\r\n            >\r\n\r\n            </Marker>)\r\n        })\r\n    }\r\n\r\n    containerStyle = {\r\n        width: '100%',\r\n        height: '300px',\r\n        zIndex: -1\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Map\r\n                google={this.props.google}\r\n                containerStyle={this.containerStyle}\r\n                zoom={10}\r\n                onClick={this.onMapClicked}\r\n                onReady={(mapProps, map) => {\r\n                    if (this.state.markers.length > 1) map.fitBounds(this.state.bounds)\r\n                    else map.panTo(this.state.markers[0].location)\r\n                    this.setState({ map })\r\n                }}\r\n            >\r\n\r\n\r\n                {this.state.markers[0] && this.getMarkers()}\r\n                <InfoWindow\r\n                    marker={this.state.activeMarker}\r\n                    visible={this.state.showingInfoWindow}>\r\n                    <div>\r\n                        <h1>{this.state.selectedPlace.name}</h1>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport const MapContainer = GoogleApiWrapper({\r\n    // apiKey: (API_KEY)\r\n})(_MapContainer)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Router, Switch, withRouter } from 'react-router-dom'\r\nimport { loadTrip, addTrip, addTripFast, setTrip } from '../store/actions/tripActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\n// import { TripRoute } from '../cmps/TripRoute'\r\nimport { tripService } from '.././services/tripService'\r\nimport { TripAssembly } from '../cmps/TripAssembly/TripAssembly'\r\nimport { TripNavBar } from '../cmps/TripApp/TripNavBar'\r\nimport { TripRoute } from '../cmps/TripRoute/TripRoute'\r\nimport { utils } from '../services/utils'\r\nimport { logDOM } from '@testing-library/react'\r\nimport { Chat } from '../cmps/TripApp/Chat'\r\nimport { socketService } from '../services/socketService'\r\nimport { MapContainer } from '../cmps/MainCmps/Map';\r\nimport { closeMsg, showMsg } from '../store/actions/msgActions'\r\nimport { ErrorMsg } from '../cmps/MainCmps/ErrorMsg'\r\nimport { eventBus } from '../services/eventBusService'\r\n// import locationCevtorRed from 'https://res.cloudinary.com/roidinary/image/upload/v1600377967/locationVectorRed_vzufx4.png'\r\n\r\nclass _TripApp extends Component {\r\n\r\n    state = {\r\n        chatOpen: false,\r\n        settingsOpen: false,\r\n        isSocketSetup: false,\r\n        markers: [],\r\n        sideBar: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { setTrip, loadTrip, addTrip } = this.props\r\n        socketService.setup();\r\n        // socketService.on('tripUpdated', setTrip);\r\n        // socketService.on('tripUpdated', loadTrip);\r\n\r\n\r\n        socketService.on('tripUpdated', addTrip);\r\n        const { id } = this.props.match.params\r\n        socketService.emit('enter trip', id);\r\n        try {\r\n            await loadTrip(id, true)\r\n            if (this.props.match.params.openSignup === 'true') {\r\n                this.props.showModal('signup', id)\r\n            }\r\n            const markers = this.getMarkersOfDests()\r\n            this.setState({ isSocketSetup: true, markers })\r\n\r\n        }\r\n        catch (err) {\r\n        }\r\n        // socketService.emit('tripToUpdate', newTrip);\r\n\r\n        // socketService.on('tripUpdated', setTrip);\r\n    }\r\n\r\n    getMarkersOfDests() {\r\n        return this.props.trip.destinations.map(dest => {\r\n            return { location: dest.location, name: dest.name }\r\n        })\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('tripUpdated', this.props.addTrip);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState) {\r\n\r\n        if (prevProps.trip === this.props.trip) return\r\n        const markers = this.getMarkersOfDests()\r\n        this.setState({ markers })\r\n        // socketService.on('tripUpdated', addTrip);\r\n        // socketService.on('tripUpdated', loadTrip);\r\n        // socketService.on('tripUpdated', this.props.setTrip);\r\n\r\n        // socketService.emit('tripUpdated', this.props.trip);\r\n    }\r\n\r\n    updateDestinations = async (destIdxToMove, moveToIdx) => {\r\n        let destinations = [...this.props.trip.destinations]\r\n        let activities = [...this.props.trip.activities]\r\n        const moveDifference = utils.calculateDays(destinations[destIdxToMove].startDate, destinations[destIdxToMove].endDate)\r\n        const destTomove = destinations.splice(destIdxToMove, 1)[0]\r\n        const constant = (1000 * 60 * 60 * 24 * (moveDifference - 1))\r\n        if (moveToIdx === -1) {\r\n            activities = activities.reduce((acc, act, idx) => {\r\n                if (act.destination === destTomove.name) return acc\r\n                acc.push(act)\r\n                return acc\r\n            }, [])\r\n            destinations.forEach((dest, idx) => {\r\n                if (idx >= destIdxToMove) {\r\n                    dest.startDate = dest.startDate - constant\r\n                    dest.endDate = dest.endDate - constant\r\n                    activities.forEach(act => {\r\n                        if (act.destination === dest.name) act.at -= constant\r\n                    })\r\n                }\r\n            })\r\n\r\n        } else {\r\n            if (destIdxToMove > moveToIdx) {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[moveToIdx].startDate, this.props.trip.destinations[destIdxToMove - 1].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate - constant2;\r\n                destTomove.endDate = destTomove.endDate - constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at -= constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx > moveToIdx && idx <= destIdxToMove) {\r\n                        dest.startDate = dest.startDate + constant\r\n                        dest.endDate = dest.endDate + constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at += constant\r\n                        })\r\n                    }\r\n                })\r\n            } else {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[destIdxToMove + 1].startDate, this.props.trip.destinations[moveToIdx].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate + constant2;\r\n                destTomove.endDate = destTomove.endDate + constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at += constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx < moveToIdx && idx >= destIdxToMove) {\r\n                        dest.startDate = dest.startDate - constant\r\n                        dest.endDate = dest.endDate - constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at -= constant\r\n                        })\r\n                    }\r\n                })\r\n\r\n            }\r\n        }\r\n        const newTrip = { ...this.props.trip, activities, destinations }\r\n        await this.props.addTrip(newTrip)\r\n        // socketService.emit('tripToUpdate', newTrip);\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n    }\r\n\r\n    updateTripAct = async (activities) => {\r\n        let _newTrip = { ...this.props.trip, activities }\r\n        let newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n    }\r\n\r\n    toggleChat = () => {\r\n        this.setState({ chatOpen: !this.state.chatOpen })\r\n    }\r\n    toggleSettings = () => {\r\n        this.setState({ settingsOpen: !this.state.settingsOpen })\r\n    }\r\n    getMarkers() {\r\n        return this.props.trip.destinations.map(dest => {\r\n            return { location: dest.location, name: dest.name }\r\n        })\r\n    }\r\n\r\n    addDestination = async (newDest) => {\r\n        const { destinations } = { ...this.props.trip }\r\n        newDest.startDate = destinations[destinations.length - 1].endDate\r\n        newDest.endDate = newDest.startDate + 1000 * 60 * 60 * 24 * (+newDest.days - 1)\r\n        newDest.id = utils.makeId()\r\n        destinations.push(newDest)\r\n        const _newTrip = { ...this.props.trip, destinations }\r\n        const newTrip = await this.props.addTrip(_newTrip)\r\n        // const markers = this.getMarkersOfDests()\r\n        // console.log(markers);\r\n        // this.setState({ markers })\r\n\r\n        socketService.emit('tripToUpdate', newTrip);\r\n    }\r\n\r\n    showDay = (day) => {\r\n        const actToRender = this.props.trip.activities.reduce((acc, act) => {\r\n            if (new Date(act.at).getDate() === day.day.getDate()) {\r\n                acc.push(act)\r\n            }\r\n            return acc\r\n        }, [])\r\n        eventBus.emit('markDay', day)\r\n    }\r\n\r\n    openSideBar = () => {\r\n        this.setState({ sideBar: !this.state.sideBar })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        const sideBarClass = this.state.sideBar ? 'open-side-bar' : ''\r\n        if (!trip|| !trip.destinations) return <div>Loading....</div>\r\n        return (\r\n            <div className=\"trip-app  \">\r\n                <ErrorMsg />\r\n                <div className=\"trip-app-area flex \">\r\n                    <button onClick={this.openSideBar} className={`side-bar-bars ${sideBarClass}`}><i className=\"fas fa-bars \" ></i></button>\r\n                    <div className={`trip-side-bar flex column ${sideBarClass} `}>\r\n                        <TripRoute\r\n                            trip={trip}\r\n                            addDestination={this.addDestination}\r\n                            updateDestinations={this.updateDestinations}\r\n                            showModal={this.props.showModal}\r\n                            toggleChat={this.toggleChat}\r\n                            showDay={this.showDay}\r\n                            openSideBar={this.openSideBar}\r\n                        />\r\n                    </div>\r\n                    <div className=\"trip-app-main full\">\r\n                        {this.state.markers[0] && <MapContainer markers={this.state.markers} />}\r\n                        <TripAssembly\r\n                            showMsg={this.props.showMsg}\r\n                            closeMsg={this.props.closeMsg}\r\n                            trip={trip} updateTripAct={this.updateTripAct}\r\n                            showModal={this.props.showModal}\r\n                            closeModal={this.props.closeModal}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {this.state.isSocketSetup && <Chat chatOpen={this.state.chatOpen} trip={trip} />}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trip: state.tripReducer.currTrip\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadTrip,\r\n    showModal,\r\n    closeModal,\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg,\r\n    setTrip\r\n\r\n\r\n\r\n}\r\nexport const TripApp = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripApp))\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass _UserTrips extends Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const UserTrips = connect(mapStateToProps, mapDispatchToProps)(_UserTrips);","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class EditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: ['relax'],\r\n            duration: 1,\r\n            notes: '',\r\n            price: 0,\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        if (act) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n            minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({\r\n\r\n                activitie: {\r\n                    ...act, name: act.name, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                    destination: act.destination\r\n                }, minTime, maxTime\r\n            })\r\n        } else {\r\n\r\n            minTime = utils.getIsoTime(destinations[0].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destinations.length - 1].endDate)\r\n\r\n            await this.setState({ activitie: { ...this.state.activitie, destination: destinations[0].name }, minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { destinations } = this.props.props\r\n        const { destination } = this.state.activitie\r\n        if (prevState.activitie.destination === destination) return\r\n        if (destination && !this.state.activitie.id) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === destination)\r\n            const minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            const maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({ minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        const field = target.name;\r\n        let value = target.value;\r\n\r\n        // if (field === 'at') {\r\n        //     let time = value.substring(value.length - 5)\r\n        //     let hours = +time.split(':')[0]\r\n        //     let minuets = +time.split(':')[1]\r\n        //     if (minuets <= 15) {\r\n        //         minuets = 0\r\n        //     } else if (minuets >= 45) {\r\n        //         minuets = 0\r\n        //         hours += 1\r\n        //     } else {\r\n        //         minuets = 30\r\n        //     }\r\n        //     if (hours >= 0 && hours < 7) {\r\n        //         alert('Please choose events between 7:00 AM and 11:30 PM')\r\n        //         return\r\n        //     }\r\n        //     minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\r\n        //     hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\r\n        //     value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\r\n        // }\r\n\r\n        if (target.type === 'checkbox') this.setState({ [field]: target.checked });\r\n        else if (target.type === 'number') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n    render() {\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        console.log(\"render -> activitie\", activitie)\r\n        const { destinations } = this.props.props\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let currDate = new Date(activitie.at)\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n        return (\r\n\r\n            // <div>\r\n            //     <p>Name: <span contentEditable={true} suppressContentEditableWarning={true}\r\n            //         onBlur={(ev)=>{this.checkinput(ev, 'name')}}>{this.state.activitie.name}</span></p>\r\n\r\n            // </div>\r\n\r\n            <form className=\"edit-activity-form flex column\" onSubmit={this.onSaveAct}>\r\n                <label htmlFor=\"name\">Name</label>\r\n                <input className=\"styled-input\" placeholder=\"name\" name=\"name\" id=\"name\" value={this.state.activitie.name} onChange={this.handleChange}></input>\r\n                {!activitie.id && <label htmlFor=\"dest-input\">Destination</label>}\r\n                {!activitie.id && <select value={this.state.activitie.destination} placeholder=\"destination\" name=\"destination\" id=\"dest-input\" onChange={this.handleChange}>\r\n                    <option value=\"\" disabled selected>Select Destination</option>\r\n                    {destinations.map((dest, idx) => {\r\n                        return <option key={utils.makeId()} value={dest.name}>{dest.name}</option>\r\n\r\n                    })}\r\n                </select>}\r\n                <label htmlFor=\"start-time-activity-input\">Time</label>\r\n                <DatePicker\r\n                    minDate={minT}\r\n                    maxDate={maxT}\r\n                    selected={this.getValidTime().getTime()}\r\n                    minTime={min}\r\n                    maxTime={max}\r\n                    autoComplete=\"off\"\r\n                    className=\"styled-input\"\r\n                    showTimeSelect\r\n                    required\r\n                    showFullMonthYearPicker\r\n                    dateFormat=\"Pp\"\r\n                    onChange={time => this.handleTime(time)}\r\n                />\r\n                {/* <input className=\"styled-input\" type=\"datetime-local\" id=\"start-time-activity-input\" min={minTime} max={maxTime} name=\"at\"\r\n                    onChange={this.handleChange} value={this.state.activitie.at}\r\n                    required=\"required\" id=\"date-activity-input\" /> */}\r\n                <label htmlFor=\"duration\">Duration (Half hours)</label>\r\n                <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                <label htmlFor=\"notes\">Notes</label>\r\n                <textarea placeholder=\"notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                <label htmlFor=\"price\" id=\"price\">Price</label>\r\n                <input className=\"styled-input\" type=\"number\" placeholder=\"price\" name=\"price\" id=\"price\" onChange={this.handleChange} placeholder=\"price\" value={this.state.activitie.price}></input>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class PrevEditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: '',\r\n            duration: '',\r\n            notes: '',\r\n            price: '',\r\n            currency: '',\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: '',\r\n        isInputOpen: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n        minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n        maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n        this.setState({\r\n\r\n            activitie: {\r\n                ...act, name: act.name, currency: act.price.currency, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                destination: act.destination\r\n            }, minTime, maxTime\r\n        })\r\n    }\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const field = ev.target.name;\r\n        let value = ev.target.value;\r\n\r\n        if (field === 'at') {\r\n            let time = value.substring(value.length - 5)\r\n            let hours = +time.split(':')[0]\r\n            let minuets = +time.split(':')[1]\r\n            if (minuets <= 15) {\r\n                minuets = 0\r\n            } else if (minuets >= 45) {\r\n                minuets = 0\r\n                hours += 1\r\n            } else {\r\n                minuets = 30\r\n            }\r\n            if (hours >= 0 && hours < 7) {\r\n                this.props.showMsg({ type: 'input', msg: 'Please choose events between 7:00 AM and 11:30 PM' })\r\n                return\r\n            }\r\n            minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\r\n            hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\r\n            value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\r\n            this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n        }\r\n\r\n        else if (field === 'duration') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    handleContentEditable = (ev) => {\r\n        const field = ev.currentTarget.dataset.name\r\n        let value = ev.target.innerText\r\n        if (field === 'price') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            this.props.showMsg({ type: 'input', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        const { destinations } = this.props.props\r\n        const startTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime())\r\n        const endTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime() + (this.state.activitie.duration / 2) * 60 * 60 * 1000)\r\n\r\n        console.log(\"PrevEditActivity -> render -> activitie\", activitie)\r\n\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let currDate = new Date(activitie.at)\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n\r\n        return (\r\n\r\n\r\n            <form className=\"preview-activity-form flex column\" >\r\n                <h2 contentEditable={true} suppressContentEditableWarning={true} autoCorrect=\"off\" data-name=\"name\" onInput={this.handleContentEditable}>{this.state.activitie.name}</h2>\r\n                <div className=\"flex\">\r\n                    <small><i className=\"fas fa-map-marker\"></i> {this.state.activitie.destination}</small>\r\n                    <small><i className=\"far fa-clock\"></i>{`${startTime}-${endTime}`} <i onClick={() => { this.setState({ isInputOpen: !this.state.isInputOpen }) }} className=\"fas fa-edit\"></i></small>\r\n                </div>\r\n\r\n                <ErrorMsg />\r\n\r\n                <div className={`flex time-container ${this.state.isInputOpen ? 'openHeight' : ''} `}>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Beginning time:</h4>\r\n\r\n\r\n                        <input className=\"styled-input date\" type=\"datetime-local\" id=\"start-time-activity-input\" min={minTime} max={maxTime} name=\"at\"\r\n                            onChange={this.handleChange} value={this.state.activitie.at}\r\n                            required=\"required\" id=\"date-activity-input\" />\r\n                    </div>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Duration (Half hours)</h4>\r\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                    </div>\r\n\r\n                </div>\r\n                {<img src={this.props.props.act.imgUrl} alt=\"https://teddytennis.com/cyprus/wp-content/uploads/sites/76/2017/11/placeholder.png\"/>}\r\n\r\n                <DatePicker\r\n                    minDate={minT}\r\n                    maxDate={maxT}\r\n                    selected={this.getValidTime().getTime()}\r\n                    minTime={min}\r\n                    maxTime={max}\r\n                    autoComplete=\"off\"\r\n                    className=\"styled-input prev-date-picker\"\r\n                    showTimeSelect\r\n                    required\r\n                \r\n                    dateFormat=\"Pp\"\r\n                    onChange={time => this.handleTime(time)}\r\n                />\r\n                <h4 htmlFor=\"notes\">Notes</h4>\r\n                <textarea placeholder=\"notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                <div className=\"flex\">\r\n                    <h4>Price:</h4>\r\n                    <p>{this.state.activitie.currency}</p>\r\n                    <p contentEditable={true} suppressContentEditableWarning={true} data-name=\"price\" onBlur={this.handleContentEditable}>{this.state.activitie.price}</p>\r\n                </div>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form >\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg'\r\n\r\n\r\n\r\nexport class AddReview extends React.Component {\r\n\r\n    state = {\r\n        reviewToAdd: {\r\n            content: '',\r\n            name: '',\r\n            rating: null,\r\n        }\r\n    }\r\n    elInput = React.createRef()\r\n\r\n    componentDidMount() {\r\n        this.elInput.current.focus()\r\n    }\r\n\r\n\r\n    onInputChange = (value, inputType) => {\r\n        this.setState({\r\n            reviewToAdd: { ...this.state.reviewToAdd, [inputType]: value }\r\n        })\r\n    }\r\n\r\n    onAddReview = (ev, review) => {\r\n        ev.preventDefault();\r\n        let addReview = this.props.props\r\n        if (!review.rating) {\r\n            this.props.showMsg('You must rate this trip first')\r\n            return\r\n        }\r\n        addReview(review)\r\n        this.props.closeModal()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'review-modal flex'}>\r\n                <form className=\"flex column \" onSubmit={(ev) => { this.onAddReview(ev, this.state.reviewToAdd) }}>\r\n                    <div className=\" headline\">\r\n                        <h2>Review</h2>\r\n                    </div>\r\n                    <input className=\"styled-input\" placeholder=\"Enter your name\" type=\"text\" name=\"name\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} />\r\n                    <textarea id=\"content\" required name=\"content\" placeholder=\"Enter your review here\" ref={this.elInput} onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }}>\r\n                    </textarea>\r\n                    <ErrorMsg />\r\n                    <select name=\"rating\" defaultValue=\"-1\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} >\r\n                        <option disabled value=\"-1\">Rate the trip</option>\r\n                        <option value=\"1\">1</option>\r\n                        <option value=\"2\">2</option>\r\n                        <option value=\"3\">3</option>\r\n                        <option value=\"4\">4</option>\r\n                        <option value=\"5\">5</option>\r\n                    </select>\r\n                    <button onSubmit={(ev) => { this.onAddReview(ev, this.state.reviewToAdd) }}>Save</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\nexport class AddMember extends Component {\r\n\r\n    state = {\r\n        value: '',\r\n        copied: false,\r\n        // emailToSend: {\r\n        //     subject: '',\r\n        //     body: '',\r\n        //     email: ''\r\n\r\n        // }\r\n    }\r\n\r\n    componentDidMount() {\r\n    this.setState({value:`http://localhost:3000/#/trip/${this.props.props}/triproute/true`})\r\n    }\r\n    \r\n\r\n    handleInput = (value, name) => {\r\n        this.setState({ emailToSend: { ...this.state.emailToSend, [name]: value } })\r\n    }\r\n\r\n    onAddMember(ev, mail) {\r\n        ev.preventDefault()\r\n        this.props.closeModal()\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n            return (\r\n            <div className=\"flex column share-trip\">\r\n                <h3>Share this link with your trip partners and start planning together!</h3>\r\n                <img src=\"https://thumbs.dreamstime.com/b/group-young-people-friends-celebrating-successful-hiking-expedition-group-young-people-friends-celebrating-successful-hiking-123552345.jpg\" alt=\"\"/>\r\n                <input disabled className=\"styled-input\" value={this.state.value}\r\n                    onChange={({ target: { value } }) => this.setState({ value, copied: false })} />\r\n\r\n                {/* <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <span>Copy to clipboard with span</span>\r\n                </CopyToClipboard> */}\r\n\r\n                <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <button className=\"styled-button\">Copy and share</button>\r\n                </CopyToClipboard>\r\n\r\n                {this.state.copied ? <span style={{ color: 'orange' }}>Copied!</span> : null}\r\n            </div>\r\n\r\n            // <div className={'add-member'}>\r\n            //     <form className=\"flex column\" onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>\r\n            //         <div className=\"headline\">\r\n            //             <h2>Add Member</h2>\r\n            //         </div>\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter your friend Email\"\r\n            //             type=\"email\"\r\n            //             name=\"email\"\r\n            //             required\r\n            //             value={this.state.emailToSend.email}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter subject\"\r\n            //             type=\"text\"\r\n            //             name=\"subject\"\r\n            //             required\r\n            //             value={this.state.emailToSend.subject}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <textarea\r\n            //             required\r\n            //             name=\"body\"\r\n            //             placeholder=\"Enter your review here\"\r\n            //             value={this.state.emailToSend.body}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }}>\r\n            //         </textarea>\r\n            //         {/* <ErrorMsg /> */}\r\n            //         <button onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>Save</button>\r\n            //     </form>\r\n            // </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst appRoot = document.createElement('div');\r\ndocument.body.appendChild(appRoot);\r\n// ReactDOM.render(<App />, appRoot);","import React, { Component } from 'react'\r\n\r\n\r\nexport class NotificationMsg extends Component {\r\n    state = {\r\n        isShown: false,\r\n        msg: '',\r\n        type: ''\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <p>Are you sure you want to delete?</p>\r\n                <div className=\"flex notification-btns\">\r\n                    <button className=\"styled-button\" onClick={() => this.props.props.removeAct(this.props.props.actId)}>Delete</button>\r\n                    <button className=\"styled-button\" onClick={() => this.props.closeModal()}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        )\r\n        // const { isShown, msg, type } = this.state\r\n        // const _hidden = (isShown)?'':'hidden-msg'\r\n        // return (\r\n        //     <div className={ `notification-box ${type} ${_hidden}` }  >\r\n        //         { isShown && <span onClick={ () => this.setState({ isShown: false }) }>X</span> }\r\n        //         { isShown && <h2> { msg }</h2> }\r\n        //     </div>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { LoginSignupPage } from '../../pages/LoginSignupPage';\r\nimport { closeModal, showModal } from '../../store/actions/modalActions'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions';\r\nimport { EditActivity } from '../TripAssembly/EditActivity';\r\nimport { PrevEditActivity } from '../TripAssembly/PrevEditActivity';\r\nimport { AddReview } from '../tripReviews/AddReview';\r\nimport { AddMember } from './AddMember';\r\nimport { NotificationMsg } from './NotificationMsg';\r\n\r\nclass _Modal extends React.Component {\r\n    state = {\r\n        dynamicCmp: '',\r\n        nameToDisplay: ''\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const curCmp = this.props.modal.cmp\r\n        // console.log(prevProps.modal.cmp, curCmp);\r\n        if (prevProps.modal.cmp === curCmp) return\r\n        let dynamicCmp = '';\r\n        let nameToDisplay = '';\r\n        switch (curCmp) {\r\n            case 'login':\r\n                dynamicCmp = <LoginSignupPage page={true} handleClick={this.handleClick} />\r\n                nameToDisplay = 'Please Login'\r\n                break\r\n            case 'signup':\r\n                const tripId = this.props.modal.props\r\n                dynamicCmp = <LoginSignupPage page={false} handleClick={this.handleClick} tripId={tripId} />\r\n                nameToDisplay = 'Please Sign Up'\r\n                break\r\n            case 'editActivity':\r\n                dynamicCmp = <EditActivity props={this.props.modal.props} />\r\n                nameToDisplay = 'Edit activity'\r\n                break\r\n            case 'activityDetails':\r\n                dynamicCmp = <PrevEditActivity props={this.props.modal.props} showMsg={this.props.showMsg}\r\n                closeMsg={this.props.closeMsg}/>\r\n                nameToDisplay = 'Activity Details'\r\n                break\r\n            case 'removeActivity':\r\n                dynamicCmp = <NotificationMsg props={this.props.modal.props} closeModal={this.props.closeModal} />\r\n                nameToDisplay = 'Delete Activity'\r\n                break\r\n            case 'add-review':\r\n                dynamicCmp = <AddReview props={this.props.modal.props.addReview} showMsg={this.props.showMsg}\r\n                    closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Review'\r\n                break\r\n            case 'add-member':\r\n                dynamicCmp = <AddMember props={this.props.modal.props}\r\n                    closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Member'\r\n                break\r\n            default:\r\n                dynamicCmp = <div>proplem loading modal</div>\r\n        }\r\n        this.setState({ dynamicCmp, nameToDisplay })\r\n\r\n    }\r\n    handleClick = (cmp) => {\r\n        this.props.showModal(cmp)\r\n    }\r\n\r\n\r\n    checkKey = (ev) => {\r\n        if (ev.key === \"Escape\") this.closeModal()\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.props.closeModal()\r\n    }\r\n\r\n\r\n    render() {\r\n        const showLoginSignup = this.state.curCmp === 'login' || this.state.curCmp === 'signup' ? true : false;\r\n        return (\r\n            <div className={`modal-screen flex align-center justify-center ${this.props.modal.isShown ? '' : 'hide'}`} onKeyDown={this.checkKey} onMouseDown={this.closeModal}>\r\n                <div className={`modal-container `} onMouseDown={(ev) => ev.stopPropagation()} >\r\n                    <div className=\"modal-header flex align-center justify-center styled-header\" ><p>{this.state.nameToDisplay}</p><button onClick={this.closeModal}>X</button></div>\r\n                    <div className=\"modal-content\"  >\r\n                        {this.state.dynamicCmp}\r\n                        {/* {this.props.msg? <p>{this.props.msg}</p>:''} */}\r\n                    </div>\r\n                </div >\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.modalReducer,\r\n        msg: state.msgReducer.msg\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    closeModal,\r\n    showModal,\r\n    showMsg,\r\n    closeMsg\r\n}\r\nexport const Modal = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Modal))\r\n","import React from 'react'\r\n\r\n\r\nexport class LongTxt extends React.Component {\r\n\r\n    state = {\r\n        text: this.props.text,\r\n        isLongTxtShown: false\r\n    }\r\n\r\n    onReadMore = () => {\r\n        this.setState({ isLongTxtShown: !this.state.isLongTxtShown })\r\n    }\r\n\r\n    render() {\r\n        const  text  = this.state.text\r\n        var isLongTxtShown = this.state.isLongTxtShown\r\n        return (\r\n            <p>\r\n                {(text.length < 100 || (isLongTxtShown && text.length > 100)) ? text : text.substring(0, 100) + ' . . .'}\r\n                {text.length > 100 && <button className=\" styled-button expend-description\" onClick={this.onReadMore}>{this.state.isLongTxtShown ? 'Less' : 'More'}</button>}\r\n            </p >\r\n        )\r\n    }\r\n}\r\n","\r\nimport React from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { LongTxt } from '../MainCmps/LongText';\r\n\r\n\r\nexport function ReviewPreview({ review }) {\r\n    const rating = '⭐'.repeat(review.rating);\r\n    \r\n\r\n    function getStars() {\r\n        let stars = [];\r\n        for (let i = 0; i < review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />)\r\n        }\r\n        for (let i = 0; i < 5 - review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600690459/450716_preview1_pvoieq.png\" alt=\"\" />)\r\n        }\r\n        return stars\r\n    }\r\n\r\n\r\n    const time = `${new Date(review.createdAt).getDate()}/${new Date(review.createdAt).getMonth() + 1}/${new Date(review.createdAt).getFullYear()}`\r\n    return (\r\n        < React.Fragment >\r\n            <div className=\"review-details flex justify-between\">\r\n                <div>{getStars()} </div>\r\n                <p>{time}</p>\r\n            </div>\r\n            <h3>{review.name || 'Traveler'}</h3>\r\n            {review.content && <LongTxt text={review.content} />}\r\n\r\n        </React.Fragment >\r\n    )\r\n}\r\n","import { ReviewPreview } from './ReviewPreview.jsx'\r\nimport React from 'react'\r\n\r\n\r\nexport function ReviewList({ reviews }) {\r\n    return (\r\n        <ul className=\"review-list flex column container\">\r\n            <h3>What people Saying about this trip: </h3>\r\n            {(!reviews || !reviews.length)? 'No reviews have been written for this trip yet' : reviews.map((review) =>\r\n                <li className=\"review flex column\" key={review.id}>\r\n                    <ReviewPreview key={review._id} review={review} />\r\n                </li>\r\n\r\n            )}\r\n        </ul>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { utils } from '../services/utils'\r\nimport { TripPreview } from '../cmps/Home/TripPreview'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { ReviewList } from '../cmps/tripReviews/ReviewList'\r\nimport { reviewActions } from '../store/actions/reviewActions'\r\nimport { loadTrip } from '../store/actions/tripActions'\r\nimport { showModal } from '../store/actions/modalActions'\r\n\r\nclass _TripDetails extends Component {\r\n\r\n    state = {\r\n        trip: '',\r\n        isReviewOpen: false,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { id } = this.props.match.params\r\n        try {\r\n           await this.props.loadTrip(id)\r\n            await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    onToggleExpend = () => {\r\n        this.setState({ isReviewOpen: true })\r\n    }\r\n\r\n\r\n    addReview = async (review) => {\r\n        // review.byUserId = this.props.loggedInUser._id\r\n        review.aboutTrip = this.props.trip._id\r\n        await reviewActions.addReview(review)\r\n        await this.props.loadReviews({ tripId: this.props.trip._id })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        if (!trip) return <p> Loading . . .</p>\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n\r\n\r\n        return (\r\n            <div className=\"trip-preview reviews-page\">\r\n                <div className=\"img-wraper\">\r\n                    <img src={utils.getRandomPic()} alt=\"\" />\r\n                </div>\r\n                <h2>{days} days to {trip.destinations[0].name}</h2>\r\n                <p>By: Moshe544</p>\r\n                {/* <TripPreview trip={trip} img={utils.getRandomPic()} style={{ pointerEvents: 'none' }} addClass={'details'} /> */}\r\n                <div className=\"addreview-container\">\r\n                    <Link to={`/trip/${trip._id}/triproute`}>\r\n                        <button onClick={this.props.closeModal} className=\"styled-button\">Explore this trip</button>\r\n                    </Link>\r\n                    <ReviewList reviews={this.props.reviews} />\r\n                    <div className=\"flex reviews-btns-container\">\r\n                        <button className=\"review-btns styled-button\" onClick={() => this.props.showModal('add-review', { addReview: this.addReview })}>Add Review</button>\r\n                        <button className=\"review-btns styled-button\" onClick={() => { this.props.history.push('/trip') }}>Back</button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        trip: state.tripReducer.currTrip,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addReview: reviewActions.addReview,\r\n    loadReviews: reviewActions.loadReviews,\r\n    loadTrip,\r\n    showModal,\r\n}\r\n\r\nexport const TripDetails = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripDetails))\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nclass _Loader extends React.Component {\r\n    render() {\r\n        if(!this.props.loader)  return <React.Fragment/>\r\n\r\n        return (\r\n            <div className=\"positioning-container\">\r\n                <div className=\"spinning-container\">\r\n                <span>LOADING</span>\r\n                    <div className=\"airplane-container\">\r\n                        {/* <span className=\"fa fa-plane\"></span> */}\r\n                        <img className=\"plane\" src=\"https://res.cloudinary.com/roidinary/image/upload/v1600624566/Asset_dwekpj.png\"></img>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loader: state.modalReducer.loaderOn\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    \r\n}\r\nexport const Loader = connect(mapStateToProps, mapDispatchToProps)(_Loader)","import React from 'react';\r\nexport function Footer() {\r\n    return (\r\n        <div className=\"footer flex align-center justify-center\">\r\n            TrollyRights 2022\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { MainNavBar } from './cmps/MainCmps/MainNavBar';\r\nimport { About } from './pages/About';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { TripStock } from './pages/TripStock';\r\nimport { LoginSignupPage } from './pages/LoginSignupPage';\r\nimport { TripApp } from './pages/TripApp.jsx'\r\nimport { UserTrips } from './pages/UserTrips';\r\nimport { Modal } from './cmps/MainCmps/Modal';\r\n\r\nimport '../src/scss/main.scss'\r\nimport { TripDetails } from './pages/TripDetails';\r\n\r\nimport { Loader } from './cmps/MainCmps/Loader';\r\nimport { Footer } from './cmps/MainCmps/Footer';\r\n\r\n\r\nexport function App() {\r\n\r\n  return (\r\n\r\n    <div style={{position:\"relative\"}} className=\"App \">\r\n      <MainNavBar />\r\n      <main>\r\n        <Modal />\r\n        <Loader />\r\n        <Switch>\r\n          <Route component={LoginSignupPage} path='/lognsignup' />\r\n          <Route component={TripApp} path='/trip/:id/:triproute/:openSignup?' />\r\n          {/* <Route component={TripApp} path='/trip/:id/:triproute' /> */}\r\n          <Route component={TripDetails} path='/trip/:id/' />\r\n          <Route component={UserTrips} path='/user/:id' />\r\n          <Route component={TripStock} path='/trip' />\r\n          <Route component={About} path='/about' />\r\n          <Route exact component={HomePage} path='/' />\r\n        </Switch>\r\n      </main>\r\n        <Footer/>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const initialState = {\r\n    isShown: false,\r\n    props: null,\r\n    cmp: null,\r\n    msg:null,\r\n    loaderOn: false\r\n}\r\n\r\nexport function modalReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MODAL':\r\n            return {\r\n                isShown: true,\r\n                props: action.props,\r\n                cmp: action.cmp\r\n            }\r\n        case 'CLOSE_MODAL':\r\n            return {\r\n                isShown: false,\r\n                props: null,\r\n                cmp: null\r\n            }\r\n        case 'LOGIN_PROBLEML':\r\n            return {\r\n                ...state,\r\n                msg:'wrong email or password'\r\n            }\r\n        case 'SET_LOADER':\r\n            return {\r\n                loaderOn: true,\r\n            }\r\n        case 'CLOSE_LOADER':\r\n            return {\r\n                loaderOn: false,\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    isShown: false,\r\n    type: '',\r\n    msg: ''\r\n}\r\n\r\nexport function msgReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MSG':\r\n            return {\r\n                isShown: true,\r\n                msg: action.msg.msg,\r\n                type: action.msg.type\r\n            }\r\n        case 'CLOSE_MSG':\r\n            return {\r\n                isShown: false,\r\n                type: '',\r\n                msg: ''\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    reviews: [],\r\n    selectedReview: null\r\n  };\r\n  \r\n  export function reviewReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n      case 'SET_REVIEWS':\r\n        return { ...state, reviews: action.reviews };\r\n      case 'REVIEW_ADD':\r\n        return { ...state, reviews: [...state.reviews, action.review] };\r\n      case 'REVIEW_UPDATE':\r\n        return {\r\n          ...state,\r\n          reviews: state.reviews.map(review =>\r\n            review._id === action.review._id ? action.review : review\r\n          )};\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  ","const initialState = {\r\n    trips: [],\r\n    currTrip: null\r\n\r\n}\r\n\r\n\r\nexport function tripReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_TRIPS':\r\n            return {\r\n                ...state,\r\n                trips: action.trips\r\n            }\r\n        case 'EDIT_TRIP':\r\n            return {\r\n                ...state, currTrip: { ...action.trip }, trips: state.trips.map(trip => {\r\n                    if (action.trip._id === trip._id) return action.trip\r\n                    return trip;\r\n                })\r\n            }\r\n        case 'SET_TRIP':\r\n            return {\r\n                ...state,\r\n                currTrip: { ...action.trip }\r\n            }\r\n\r\n\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","\r\nlet localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n    users: [],\r\n    loggedInUser: localLoggedinUser\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            return {\r\n                users:[...state.users],\r\n                loggedInUser: action.user\r\n            }\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { modalReducer } from './reducers/modalReducer';\r\nimport { msgReducer } from './reducers/msgReducer';\r\nimport { reviewReducer } from './reducers/reviewReducer';\r\nimport {tripReducer } from './reducers/tripReducer';\r\nimport { userReducer } from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    tripReducer,\r\n    userReducer,\r\n    modalReducer,\r\n    reviewReducer,\r\n    msgReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { DndProvider } from 'react-dnd'\r\nimport {HTML5Backend} from 'react-dnd-html5-backend'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <DndProvider backend={HTML5Backend}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </DndProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}